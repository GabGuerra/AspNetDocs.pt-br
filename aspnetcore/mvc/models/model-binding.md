---
title: Model binding no ASP.NET Core
author: tdykstra
description: Saiba como o model binding no ASP.NET Core MVC mapeia dados de solicitações HTTP para os parâmetros de método de ação.
ms.assetid: 0be164aa-1d72-4192-bd6b-192c9c301164
ms.author: tdykstra
ms.date: 11/13/2018
uid: mvc/models/model-binding
ms.openlocfilehash: 1dc9b41328ed78440622acc1865b6f088d394403
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57037043"
---
# <a name="model-binding-in-aspnet-core"></a><span data-ttu-id="66122-103">Model binding no ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="66122-103">Model Binding in ASP.NET Core</span></span>

<span data-ttu-id="66122-104">Por [Rachel Appel](https://github.com/rachelappel)</span><span class="sxs-lookup"><span data-stu-id="66122-104">By [Rachel Appel](https://github.com/rachelappel)</span></span>

## <a name="introduction-to-model-binding"></a><span data-ttu-id="66122-105">Introdução ao model binding</span><span class="sxs-lookup"><span data-stu-id="66122-105">Introduction to model binding</span></span>

<span data-ttu-id="66122-106">O model binding do ASP.NET Core MVC mapeia dados de solicitações HTTP para parâmetros de método de ação.</span><span class="sxs-lookup"><span data-stu-id="66122-106">Model binding in ASP.NET Core MVC maps data from HTTP requests to action method parameters.</span></span> <span data-ttu-id="66122-107">Os parâmetros podem ser tipos simples, como cadeias de caracteres, inteiros ou floats, ou podem ser tipos complexos.</span><span class="sxs-lookup"><span data-stu-id="66122-107">The parameters may be simple types such as strings, integers, or floats, or they may be complex types.</span></span> <span data-ttu-id="66122-108">Esse é um ótimo recurso do MVC, pois o mapeamento dos dados de entrada para um equivalente é um cenário repetido com frequência, independentemente do tamanho ou da complexidade dos dados.</span><span class="sxs-lookup"><span data-stu-id="66122-108">This is a great feature of MVC because mapping incoming data to a counterpart is an often repeated scenario, regardless of size or complexity of the data.</span></span> <span data-ttu-id="66122-109">O MVC resolve esse problema com a abstração da associação, de modo que os desenvolvedores não precisem continuar reconfigurando uma versão ligeiramente diferente desse mesmo código em cada aplicativo.</span><span class="sxs-lookup"><span data-stu-id="66122-109">MVC solves this problem by abstracting binding away so developers don't have to keep rewriting a slightly different version of that same code in every app.</span></span> <span data-ttu-id="66122-110">A escrita de seu próprio texto para tipar o código de conversor é entediante e propensa a erros.</span><span class="sxs-lookup"><span data-stu-id="66122-110">Writing your own text to type converter code is tedious, and error prone.</span></span>

## <a name="how-model-binding-works"></a><span data-ttu-id="66122-111">Como funciona o model binding</span><span class="sxs-lookup"><span data-stu-id="66122-111">How model binding works</span></span>

<span data-ttu-id="66122-112">Quando o MVC recebe uma solicitação HTTP, ele encaminha-a a um método de ação específico de um controlador.</span><span class="sxs-lookup"><span data-stu-id="66122-112">When MVC receives an HTTP request, it routes it to a specific action method of a controller.</span></span> <span data-ttu-id="66122-113">Ele determina qual método de ação será executado com base no que está nos dados de rota e, em seguida, ele associa valores da solicitação HTTP aos parâmetros desse método de ação.</span><span class="sxs-lookup"><span data-stu-id="66122-113">It determines which action method to run based on what is in the route data, then it binds values from the HTTP request to that action method's parameters.</span></span> <span data-ttu-id="66122-114">Por exemplo, considere a seguinte URL:</span><span class="sxs-lookup"><span data-stu-id="66122-114">For example, consider the following URL:</span></span>

`http://contoso.com/movies/edit/2`

<span data-ttu-id="66122-115">Como o modelo de rota é semelhante a isto, `{controller=Home}/{action=Index}/{id?}`, `movies/edit/2` encaminha para o controlador `Movies` e seu método de ação `Edit`.</span><span class="sxs-lookup"><span data-stu-id="66122-115">Since the route template looks like this, `{controller=Home}/{action=Index}/{id?}`, `movies/edit/2` routes to the `Movies` controller, and its `Edit` action method.</span></span> <span data-ttu-id="66122-116">Ele também aceita um parâmetro opcional chamado `id`.</span><span class="sxs-lookup"><span data-stu-id="66122-116">It also accepts an optional parameter called `id`.</span></span> <span data-ttu-id="66122-117">O código para o método de ação deve ter esta aparência:</span><span class="sxs-lookup"><span data-stu-id="66122-117">The code for the action method should look something like this:</span></span>

```csharp
public IActionResult Edit(int? id)
   ```

<span data-ttu-id="66122-118">Observação: As cadeias de caracteres na rota de URL não diferenciam maiusculas de minúsculas.</span><span class="sxs-lookup"><span data-stu-id="66122-118">Note: The strings in the URL route are not case sensitive.</span></span>

<span data-ttu-id="66122-119">O MVC tentará associar os dados de solicitação aos parâmetros de ação por nome.</span><span class="sxs-lookup"><span data-stu-id="66122-119">MVC will try to bind request data to the action parameters by name.</span></span> <span data-ttu-id="66122-120">O MVC procurará valores para cada parâmetro usando o nome do parâmetro e os nomes de suas propriedades configuráveis públicas.</span><span class="sxs-lookup"><span data-stu-id="66122-120">MVC will look for values for each parameter using the parameter name and the names of its public settable properties.</span></span> <span data-ttu-id="66122-121">No exemplo acima, o único parâmetro de ação é chamado `id`, que o MVC associa ao valor com o mesmo nome nos valores de rota.</span><span class="sxs-lookup"><span data-stu-id="66122-121">In the above example, the only action parameter is named `id`, which MVC binds to the value with the same name in the route values.</span></span> <span data-ttu-id="66122-122">Além dos valores de rota, o MVC associará dados de várias partes da solicitação e faz isso em uma ordem específica.</span><span class="sxs-lookup"><span data-stu-id="66122-122">In addition to route values MVC will bind data from various parts of the request and it does so in a set order.</span></span> <span data-ttu-id="66122-123">Veja abaixo uma lista das fontes de dados na ordem em que o model binding examina-as:</span><span class="sxs-lookup"><span data-stu-id="66122-123">Below is a list of the data sources in the order that model binding looks through them:</span></span>

1. <span data-ttu-id="66122-124">`Form values`: Estes são os valores de formulário que entram na solicitação HTTP usando o método POST.</span><span class="sxs-lookup"><span data-stu-id="66122-124">`Form values`: These are form values that go in the HTTP request using the POST method.</span></span> <span data-ttu-id="66122-125">(incluindo as solicitações POST jQuery).</span><span class="sxs-lookup"><span data-stu-id="66122-125">(including jQuery POST requests).</span></span>

2. <span data-ttu-id="66122-126">`Route values`: O conjunto de valores de rota fornecidos pelo [roteamento](xref:fundamentals/routing)</span><span class="sxs-lookup"><span data-stu-id="66122-126">`Route values`: The set of route values provided by [Routing](xref:fundamentals/routing)</span></span>

3. <span data-ttu-id="66122-127">`Query strings`: A parte da cadeia de caracteres de consulta do URI.</span><span class="sxs-lookup"><span data-stu-id="66122-127">`Query strings`: The query string part of the URI.</span></span>

<!-- DocFX BUG
The link works but generates an error when building with DocFX
@fundamentals/routing
[Routing](xref:fundamentals/routing)
-->

<span data-ttu-id="66122-128">Observação: Valores de formulário, dados de rota e cadeias de caracteres são armazenadas como pares nome-valor de consulta.</span><span class="sxs-lookup"><span data-stu-id="66122-128">Note: Form values, route data, and query strings are all stored as name-value pairs.</span></span>

<span data-ttu-id="66122-129">Como o model binding solicitou uma chave chamada `id` e não há nada chamado `id` nos valores de formulário, ela passou para os valores de rota procurando essa chave.</span><span class="sxs-lookup"><span data-stu-id="66122-129">Since model binding asked for a key named `id` and there's nothing named `id` in the form values, it moved on to the route values looking for that key.</span></span> <span data-ttu-id="66122-130">Em nosso exemplo, isso é uma correspondência.</span><span class="sxs-lookup"><span data-stu-id="66122-130">In our example, it's a match.</span></span> <span data-ttu-id="66122-131">A associação ocorre e o valor é convertido no inteiro 2.</span><span class="sxs-lookup"><span data-stu-id="66122-131">Binding happens, and the value is converted to the integer 2.</span></span> <span data-ttu-id="66122-132">A mesma solicitação que usa Edit(string id) converterá na cadeia de caracteres "2".</span><span class="sxs-lookup"><span data-stu-id="66122-132">The same request using Edit(string id) would convert to the string "2".</span></span>

<span data-ttu-id="66122-133">Até agora, o exemplo usa tipos simples.</span><span class="sxs-lookup"><span data-stu-id="66122-133">So far the example uses simple types.</span></span> <span data-ttu-id="66122-134">No MVC, os tipos simples são qualquer tipo primitivo do .NET ou um tipo com um conversor de tipo de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="66122-134">In MVC simple types are any .NET primitive type or type with a string type converter.</span></span> <span data-ttu-id="66122-135">Se o parâmetro do método de ação for uma classe, como o tipo `Movie`, que contém tipos simples e complexos como propriedades, o model binding do MVC ainda o manipulará perfeitamente.</span><span class="sxs-lookup"><span data-stu-id="66122-135">If the action method's parameter were a class such as the `Movie` type, which contains both simple and complex types as properties, MVC's model binding will still handle it nicely.</span></span> <span data-ttu-id="66122-136">Ele usa a reflexão e recursão para percorrer as propriedades de tipos complexos procurando correspondências.</span><span class="sxs-lookup"><span data-stu-id="66122-136">It uses reflection and recursion to traverse the properties of complex types looking for matches.</span></span> <span data-ttu-id="66122-137">O model binding procura o padrão *nome_do_parâmetro.nome_da_propriedade* para associar valores a propriedades.</span><span class="sxs-lookup"><span data-stu-id="66122-137">Model binding looks for the pattern *parameter_name.property_name* to bind values to properties.</span></span> <span data-ttu-id="66122-138">Se ela não encontrar os valores correspondentes desse formulário, ela tentará associar usando apenas o nome da propriedade.</span><span class="sxs-lookup"><span data-stu-id="66122-138">If it doesn't find matching values of this form, it will attempt to bind using just the property name.</span></span> <span data-ttu-id="66122-139">Para esses tipos como tipos `Collection`, o model binding procura correspondências para *parameter_name [index]* ou apenas *[index]*.</span><span class="sxs-lookup"><span data-stu-id="66122-139">For those types such as `Collection` types, model binding looks for matches to *parameter_name[index]* or just *[index]*.</span></span> <span data-ttu-id="66122-140">O model binding trata tipos `Dictionary` da mesma forma, solicitando *parameter_name[key]* ou apenas *[key]*, desde que as chaves sejam tipos simples.</span><span class="sxs-lookup"><span data-stu-id="66122-140">Model binding treats  `Dictionary` types similarly, asking for *parameter_name[key]* or just *[key]*, as long as the keys are simple types.</span></span> <span data-ttu-id="66122-141">As chaves compatíveis correspondem o HTML dos nomes de campo e os auxiliares de marca gerados para o mesmo tipo de modelo.</span><span class="sxs-lookup"><span data-stu-id="66122-141">Keys that are supported match the field names HTML and tag helpers generated for the same model type.</span></span> <span data-ttu-id="66122-142">Isso permite a ida e vinda dos valores, de modo que os campos de formulário permaneçam preenchidos com a entrada do usuário para sua conveniência, por exemplo, quando os dados associados de uma criação ou edição não são aprovados na validação.</span><span class="sxs-lookup"><span data-stu-id="66122-142">This enables round-tripping values so that the form fields remain filled with the user's input for their convenience, for example, when bound data from a create or edit didn't pass validation.</span></span>

<span data-ttu-id="66122-143">Para possibilitar o model binding, a classe deve ter um construtor padrão público e propriedades públicas graváveis para associar.</span><span class="sxs-lookup"><span data-stu-id="66122-143">To make model binding possible, the class must have a public default constructor and public writable properties to bind.</span></span> <span data-ttu-id="66122-144">Quando o model binding ocorrer, será criada uma instância da classe usando o construtor padrão público e, em seguida, as propriedades poderão ser definidas.</span><span class="sxs-lookup"><span data-stu-id="66122-144">When model binding occurs, the class is instantiated using the public default constructor, then the properties can be set.</span></span>

<span data-ttu-id="66122-145">Quando um parâmetro é associado, o model binding para de procurar valores com esse nome e ele passa para associar o próximo parâmetro.</span><span class="sxs-lookup"><span data-stu-id="66122-145">When a parameter is bound, model binding stops looking for values with that name and it moves on to bind the next parameter.</span></span> <span data-ttu-id="66122-146">Caso contrário, o comportamento padrão do model binding define parâmetros com seus valores padrão, dependendo de seu tipo:</span><span class="sxs-lookup"><span data-stu-id="66122-146">Otherwise, the default model binding behavior sets parameters to their default values depending on their type:</span></span>

* <span data-ttu-id="66122-147">`T[]`: Com exceção de matrizes do tipo `byte[]`, associação define parâmetros do tipo `T[]` para `Array.Empty<T>()`.</span><span class="sxs-lookup"><span data-stu-id="66122-147">`T[]`: With the exception of arrays of type `byte[]`, binding sets parameters of type `T[]` to `Array.Empty<T>()`.</span></span> <span data-ttu-id="66122-148">Matrizes do tipo `byte[]` são definidas como `null`.</span><span class="sxs-lookup"><span data-stu-id="66122-148">Arrays of type `byte[]` are set to `null`.</span></span>

* <span data-ttu-id="66122-149">Tipos de referência: Associação cria uma instância de uma classe com o construtor padrão sem definir propriedades.</span><span class="sxs-lookup"><span data-stu-id="66122-149">Reference Types: Binding creates an instance of a class with the default constructor without setting properties.</span></span> <span data-ttu-id="66122-150">No entanto, o model binding define parâmetros `string` como `null`.</span><span class="sxs-lookup"><span data-stu-id="66122-150">However, model binding sets `string` parameters to `null`.</span></span>

* <span data-ttu-id="66122-151">Tipos que permitem valor nulos: Tipos anuláveis são definidos como `null`.</span><span class="sxs-lookup"><span data-stu-id="66122-151">Nullable Types: Nullable types are set to `null`.</span></span> <span data-ttu-id="66122-152">No exemplo acima, o model binding define `id` como `null`, pois ele é do tipo `int?`.</span><span class="sxs-lookup"><span data-stu-id="66122-152">In the above example, model binding sets `id` to `null` since it's of type `int?`.</span></span>

* <span data-ttu-id="66122-153">Tipos de valor: Tipos de valor não nulo de tipo `T` são definidos como `default(T)`.</span><span class="sxs-lookup"><span data-stu-id="66122-153">Value Types: Non-nullable value types of type `T` are set to `default(T)`.</span></span> <span data-ttu-id="66122-154">Por exemplo, o model binding definirá um parâmetro `int id` como 0.</span><span class="sxs-lookup"><span data-stu-id="66122-154">For example, model binding will set a parameter `int id` to 0.</span></span> <span data-ttu-id="66122-155">Considere o uso da validação de modelo ou de tipos que permitem valor nulo, em vez de depender de valores padrão.</span><span class="sxs-lookup"><span data-stu-id="66122-155">Consider using model validation or nullable types rather than relying on default values.</span></span>

<span data-ttu-id="66122-156">Se a associação falhar, o MVC não gerará um erro.</span><span class="sxs-lookup"><span data-stu-id="66122-156">If binding fails, MVC doesn't throw an error.</span></span> <span data-ttu-id="66122-157">Todas as ações que aceitam a entrada do usuário devem verificar a propriedade `ModelState.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="66122-157">Every action which accepts user input should check the `ModelState.IsValid` property.</span></span>

<span data-ttu-id="66122-158">Observação: Cada entrada do controlador `ModelState` propriedade é um `ModelStateEntry` que contém um `Errors` propriedade.</span><span class="sxs-lookup"><span data-stu-id="66122-158">Note: Each entry in the controller's `ModelState` property is a `ModelStateEntry` containing an `Errors` property.</span></span> <span data-ttu-id="66122-159">Raramente é necessário consultar essa coleção por conta própria.</span><span class="sxs-lookup"><span data-stu-id="66122-159">It's rarely necessary to query this collection yourself.</span></span> <span data-ttu-id="66122-160">Use `ModelState.IsValid` em seu lugar.</span><span class="sxs-lookup"><span data-stu-id="66122-160">Use `ModelState.IsValid` instead.</span></span>

<span data-ttu-id="66122-161">Além disso, há alguns tipos de dados especiais que o MVC precisa considerar ao realizar o model binding:</span><span class="sxs-lookup"><span data-stu-id="66122-161">Additionally, there are some special data types that MVC must consider when performing model binding:</span></span>

* <span data-ttu-id="66122-162">`IFormFile`, `IEnumerable<IFormFile>`: Um ou mais arquivos carregados que fazem parte da solicitação HTTP.</span><span class="sxs-lookup"><span data-stu-id="66122-162">`IFormFile`, `IEnumerable<IFormFile>`: One or more uploaded files that are part of the HTTP request.</span></span>

* <span data-ttu-id="66122-163">`CancellationToken`: Usado para cancelar a atividade em controladores assíncronos.</span><span class="sxs-lookup"><span data-stu-id="66122-163">`CancellationToken`: Used to cancel activity in asynchronous controllers.</span></span>

<span data-ttu-id="66122-164">Esses tipos podem ser associados a parâmetros de ação ou a propriedades em um tipo de classe.</span><span class="sxs-lookup"><span data-stu-id="66122-164">These types can be bound to action parameters or to properties on a class type.</span></span>

<span data-ttu-id="66122-165">Após a conclusão do model binding, a [Validação](validation.md) ocorrerá.</span><span class="sxs-lookup"><span data-stu-id="66122-165">Once model binding is complete, [Validation](validation.md) occurs.</span></span> <span data-ttu-id="66122-166">O model binding padrão funciona bem para a maioria dos cenários de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="66122-166">Default model binding works great for the vast majority of development scenarios.</span></span> <span data-ttu-id="66122-167">Também é extensível e, portanto, se você tiver necessidades exclusivas, poderá personalizar o comportamento interno.</span><span class="sxs-lookup"><span data-stu-id="66122-167">It's also extensible so if you have unique needs you can customize the built-in behavior.</span></span>

## <a name="customize-model-binding-behavior-with-attributes"></a><span data-ttu-id="66122-168">Personalizar o comportamento do model binding com atributos</span><span class="sxs-lookup"><span data-stu-id="66122-168">Customize model binding behavior with attributes</span></span>

<span data-ttu-id="66122-169">O MVC contém vários atributos que podem ser usados para direcionar seu comportamento de model binding padrão para outra fonte.</span><span class="sxs-lookup"><span data-stu-id="66122-169">MVC contains several attributes that you can use to direct its default model binding behavior to a different source.</span></span> <span data-ttu-id="66122-170">Por exemplo, você pode especificar se a associação é obrigatória para uma propriedade ou se ela nunca deve ocorrer usando os atributos `[BindRequired]` ou `[BindNever]`.</span><span class="sxs-lookup"><span data-stu-id="66122-170">For example, you can specify whether binding is required for a property, or if it should never happen at all by using the `[BindRequired]` or `[BindNever]` attributes.</span></span> <span data-ttu-id="66122-171">Como alternativa, você pode substituir a fonte de dados padrão e especificar a fonte de dados do associador de modelos.</span><span class="sxs-lookup"><span data-stu-id="66122-171">Alternatively, you can override the default data source, and specify the model binder's data source.</span></span> <span data-ttu-id="66122-172">Veja abaixo uma lista dos atributos de model binding:</span><span class="sxs-lookup"><span data-stu-id="66122-172">Below is a list of model binding attributes:</span></span>

* <span data-ttu-id="66122-173">`[BindRequired]`: Esse atributo adiciona um erro de estado de modelo se a associação não pode ocorrer.</span><span class="sxs-lookup"><span data-stu-id="66122-173">`[BindRequired]`: This attribute adds a model state error if binding cannot occur.</span></span>

* <span data-ttu-id="66122-174">`[BindNever]`: Informa ao associador de modelos a nunca associar a esse parâmetro.</span><span class="sxs-lookup"><span data-stu-id="66122-174">`[BindNever]`: Tells the model binder to never bind to this parameter.</span></span>

* <span data-ttu-id="66122-175">`[FromHeader]`, `[FromQuery]`, `[FromRoute]`, `[FromForm]`: Usá-los para especificar a origem da associação exata que deseja aplicar.</span><span class="sxs-lookup"><span data-stu-id="66122-175">`[FromHeader]`, `[FromQuery]`, `[FromRoute]`, `[FromForm]`: Use these to specify the exact binding source you want to apply.</span></span>

* <span data-ttu-id="66122-176">`[FromServices]`: Esse atributo usa [injeção de dependência](../../fundamentals/dependency-injection.md) para associar parâmetros de serviços.</span><span class="sxs-lookup"><span data-stu-id="66122-176">`[FromServices]`: This attribute uses [dependency injection](../../fundamentals/dependency-injection.md) to bind parameters from services.</span></span>

* <span data-ttu-id="66122-177">`[FromBody]`: Use os formatadores configurados para associar dados do corpo da solicitação.</span><span class="sxs-lookup"><span data-stu-id="66122-177">`[FromBody]`: Use the configured formatters to bind data from the request body.</span></span> <span data-ttu-id="66122-178">O formatador é selecionado de acordo com o tipo de conteúdo da solicitação.</span><span class="sxs-lookup"><span data-stu-id="66122-178">The formatter is selected based on content type of the request.</span></span>

* <span data-ttu-id="66122-179">`[ModelBinder]`: Usado para substituir o associador de modelo padrão, origem e o nome de associação.</span><span class="sxs-lookup"><span data-stu-id="66122-179">`[ModelBinder]`: Used to override the default model binder, binding source and name.</span></span>

<span data-ttu-id="66122-180">Os atributos são ferramentas muito úteis quando você precisa substituir o comportamento padrão do model binding.</span><span class="sxs-lookup"><span data-stu-id="66122-180">Attributes are very helpful tools when you need to override the default behavior of model binding.</span></span>

## <a name="customize-model-binding-and-validation-globally"></a><span data-ttu-id="66122-181">Personalizar a validação e o model binding globalmente</span><span class="sxs-lookup"><span data-stu-id="66122-181">Customize model binding and validation globally</span></span>

<span data-ttu-id="66122-182">O comportamento do sistema de validação e model binding é orientado pelo [ModelMetadata](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.modelmetadata) que descreve:</span><span class="sxs-lookup"><span data-stu-id="66122-182">The model binding and validation system's behavior is driven by [ModelMetadata](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.modelmetadata) that describes:</span></span>

* <span data-ttu-id="66122-183">Como um modelo deve ser associado.</span><span class="sxs-lookup"><span data-stu-id="66122-183">How a model is to be bound.</span></span>
* <span data-ttu-id="66122-184">Como ocorre a validação no tipo e em suas propriedades.</span><span class="sxs-lookup"><span data-stu-id="66122-184">How validation occurs on the type and its properties.</span></span>

<span data-ttu-id="66122-185">Os aspectos do comportamento do sistema podem ser configurados globalmente adicionando um provedor de detalhes a [MvcOptions.ModelMetadataDetailsProviders](/dotnet/api/microsoft.aspnetcore.mvc.mvcoptions.modelmetadatadetailsproviders#Microsoft_AspNetCore_Mvc_MvcOptions_ModelMetadataDetailsProviders).</span><span class="sxs-lookup"><span data-stu-id="66122-185">Aspects of the system's behavior can be configured globally by adding a details provider to [MvcOptions.ModelMetadataDetailsProviders](/dotnet/api/microsoft.aspnetcore.mvc.mvcoptions.modelmetadatadetailsproviders#Microsoft_AspNetCore_Mvc_MvcOptions_ModelMetadataDetailsProviders).</span></span> <span data-ttu-id="66122-186">O MVC tem alguns provedores de detalhes internos que permitem configurar o comportamento, como desabilitar a validação ou o model binding de determinados tipos.</span><span class="sxs-lookup"><span data-stu-id="66122-186">MVC has a few built-in details providers that allow configuring behavior such as disabling model binding or validation for certain types.</span></span>

<span data-ttu-id="66122-187">Para desabilitar o model binding em todos os modelos de um determinado tipo, adicione um [ExcludeBindingMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.excludebindingmetadataprovider) em `Startup.ConfigureServices`.</span><span class="sxs-lookup"><span data-stu-id="66122-187">To disable model binding on all models of a certain type, add an [ExcludeBindingMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.excludebindingmetadataprovider) in `Startup.ConfigureServices`.</span></span> <span data-ttu-id="66122-188">Por exemplo, para desabilitar o model binding em todos os modelos do tipo `System.Version`:</span><span class="sxs-lookup"><span data-stu-id="66122-188">For example, to disable model binding on all models of type `System.Version`:</span></span>

```csharp
services.AddMvc().AddMvcOptions(options =>
    options.ModelMetadataDetailsProviders.Add(
        new ExcludeBindingMetadataProvider(typeof(System.Version))));
```

<span data-ttu-id="66122-189">Para desabilitar a validação nas propriedades de um determinado tipo, adicione um [SuppressChildValidationMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.suppresschildvalidationmetadataprovider) em `Startup.ConfigureServices`.</span><span class="sxs-lookup"><span data-stu-id="66122-189">To disable validation on properties of a certain type, add a [SuppressChildValidationMetadataProvider](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.suppresschildvalidationmetadataprovider) in `Startup.ConfigureServices`.</span></span> <span data-ttu-id="66122-190">Por exemplo, para desabilitar a validação nas propriedades do tipo `System.Guid`:</span><span class="sxs-lookup"><span data-stu-id="66122-190">For example, to disable validation on properties of type `System.Guid`:</span></span>

```csharp
services.AddMvc().AddMvcOptions(options =>
    options.ModelMetadataDetailsProviders.Add(
        new SuppressChildValidationMetadataProvider(typeof(System.Guid))));
```

## <a name="bind-formatted-data-from-the-request-body"></a><span data-ttu-id="66122-191">Associar dados formatados do corpo da solicitação</span><span class="sxs-lookup"><span data-stu-id="66122-191">Bind formatted data from the request body</span></span>

<span data-ttu-id="66122-192">Os dados de solicitação podem ser recebidos em uma variedade de formatos, incluindo JSON, XML e muitos outros.</span><span class="sxs-lookup"><span data-stu-id="66122-192">Request data can come in a variety of formats including JSON, XML and many others.</span></span> <span data-ttu-id="66122-193">Quando você usa o atributo [FromBody] para indicar que deseja associar um parâmetro a dados no corpo da solicitação, o MVC usa um conjunto configurado de formatadores para manipular os dados de solicitação de acordo com seu tipo de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="66122-193">When you use the [FromBody] attribute to indicate that you want to bind a parameter to data in the request body, MVC uses a configured set of formatters to handle the request data based on its content type.</span></span> <span data-ttu-id="66122-194">Por padrão, o MVC inclui uma classe `JsonInputFormatter` para manipular dados JSON, mas você pode adicionar outros formatadores para manipular XML e outros formatos personalizados.</span><span class="sxs-lookup"><span data-stu-id="66122-194">By default MVC includes a `JsonInputFormatter` class for handling JSON data, but you can add additional formatters for handling XML and other custom formats.</span></span>

> [!NOTE]
> <span data-ttu-id="66122-195">Pode haver, no máximo, um parâmetro por ação decorado com `[FromBody]`.</span><span class="sxs-lookup"><span data-stu-id="66122-195">There can be at most one parameter per action decorated with `[FromBody]`.</span></span> <span data-ttu-id="66122-196">O tempo de execução do ASP.NET Core MVC delega a responsabilidade de ler o fluxo da solicitação ao formatador.</span><span class="sxs-lookup"><span data-stu-id="66122-196">The ASP.NET Core MVC run-time delegates the responsibility of reading the request stream to the formatter.</span></span> <span data-ttu-id="66122-197">Depois que o fluxo da solicitação é lido para um parâmetro, geralmente, não é possível ler o fluxo da solicitação novamente para associar outros parâmetros `[FromBody]`.</span><span class="sxs-lookup"><span data-stu-id="66122-197">Once the request stream is read for a parameter, it's generally not possible to read the request stream again for binding other `[FromBody]` parameters.</span></span>

> [!NOTE]
> <span data-ttu-id="66122-198">O `JsonInputFormatter` é o formatador padrão e se baseia no [Json.NET](https://www.newtonsoft.com/json).</span><span class="sxs-lookup"><span data-stu-id="66122-198">The `JsonInputFormatter` is the default formatter and is based on [Json.NET](https://www.newtonsoft.com/json).</span></span>

<span data-ttu-id="66122-199">O ASP.NET Core seleciona formatadores de entrada com base no cabeçalho [Content-Type](https://www.w3.org/Protocols/rfc1341/4_Content-Type.html) e no tipo do parâmetro, a menos que haja um atributo aplicado a ele com outra especificação.</span><span class="sxs-lookup"><span data-stu-id="66122-199">ASP.NET Core selects input formatters based on the [Content-Type](https://www.w3.org/Protocols/rfc1341/4_Content-Type.html) header and the type of the parameter, unless there's an attribute applied to it specifying otherwise.</span></span> <span data-ttu-id="66122-200">Se deseja usar XML ou outro formato, configure-o no arquivo *Startup.cs*, mas talvez você precise obter primeiro uma referência a `Microsoft.AspNetCore.Mvc.Formatters.Xml` usando o NuGet.</span><span class="sxs-lookup"><span data-stu-id="66122-200">If you'd like to use XML or another format you must configure it in the *Startup.cs* file, but you may first have to obtain a reference to `Microsoft.AspNetCore.Mvc.Formatters.Xml` using NuGet.</span></span> <span data-ttu-id="66122-201">O código de inicialização deverá ter uma aparência semelhante a esta:</span><span class="sxs-lookup"><span data-stu-id="66122-201">Your startup code should look something like this:</span></span>

```csharp
public void ConfigureServices(IServiceCollection services)
{
    services.AddMvc()
        .AddXmlSerializerFormatters();
   }
```

<span data-ttu-id="66122-202">O código no arquivo *Startup.cs* contém um método `ConfigureServices` com um argumento `services` que você pode usar para criar serviços para o aplicativo ASP.NET Core.</span><span class="sxs-lookup"><span data-stu-id="66122-202">Code in the *Startup.cs* file contains a `ConfigureServices` method with a `services` argument you can use to build up services for your ASP.NET Core app.</span></span> <span data-ttu-id="66122-203">No exemplo, estamos adicionando um formatador XML como um serviço que o MVC fornecerá para este aplicativo.</span><span class="sxs-lookup"><span data-stu-id="66122-203">In the sample, we are adding an XML formatter as a service that MVC will provide for this app.</span></span> <span data-ttu-id="66122-204">O argumento `options` passado para o método `AddMvc` permite que você adicione e gerencie filtros, formatadores e outras opções do sistema no MVC após a inicialização do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="66122-204">The `options` argument passed into the `AddMvc` method allows you to add and manage filters, formatters, and other system options from MVC upon app startup.</span></span> <span data-ttu-id="66122-205">Em seguida, aplique o atributo `Consumes` a classes do controlador ou métodos de ação para trabalhar com o formato desejado.</span><span class="sxs-lookup"><span data-stu-id="66122-205">Then apply the `Consumes` attribute to controller classes or action methods to work with the format you want.</span></span>

### <a name="custom-model-binding"></a><span data-ttu-id="66122-206">Model binding personalizado</span><span class="sxs-lookup"><span data-stu-id="66122-206">Custom Model Binding</span></span>

<span data-ttu-id="66122-207">Estenda o model binding escrevendo seus próprios associadores de modelos personalizados.</span><span class="sxs-lookup"><span data-stu-id="66122-207">You can extend model binding by writing your own custom model binders.</span></span> <span data-ttu-id="66122-208">Saiba mais sobre o [model binding personalizado](../advanced/custom-model-binding.md).</span><span class="sxs-lookup"><span data-stu-id="66122-208">Learn more about [custom model binding](../advanced/custom-model-binding.md).</span></span>
