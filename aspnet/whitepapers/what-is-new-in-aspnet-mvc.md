---
uid: whitepapers/what-is-new-in-aspnet-mvc
title: O que há de novo no ASP.NET MVC 2 | Microsoft Docs
author: rick-anderson
description: Este documento descreve novos recursos e aprimoramentos introduzidos no ASP.NET MVC 2. Este documento também está disponível para download.
ms.author: riande
ms.date: 04/20/2010
ms.assetid: 69a8d6f8-4b10-4602-8822-2d6c05fc432b
msc.legacyurl: /whitepapers/what-is-new-in-aspnet-mvc
msc.type: content
ms.openlocfilehash: 7f846e807309f3123db52b3053b9aa8d6aca81e6
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/17/2019
ms.locfileid: "59394829"
---
# <a name="whats-new-in-aspnet-mvc-2"></a><span data-ttu-id="e0547-104">Novidades no ASP.NET MVC 2</span><span class="sxs-lookup"><span data-stu-id="e0547-104">What's New in ASP.NET MVC 2</span></span>

> <span data-ttu-id="e0547-105">Este documento descreve novos recursos e aprimoramentos introduzidos no ASP.NET MVC 2.</span><span class="sxs-lookup"><span data-stu-id="e0547-105">This document describes new features and improvements introduced in ASP.NET MVC 2.</span></span> <span data-ttu-id="e0547-106">Este documento também está disponível para [baixar](https://download.microsoft.com/download/F/1/6/F16F9AF9-8EF4-4845-BC97-639791D5699C/WhatIsNewInMVC_2.pdf)</span><span class="sxs-lookup"><span data-stu-id="e0547-106">This document is also available for [Download](https://download.microsoft.com/download/F/1/6/F16F9AF9-8EF4-4845-BC97-639791D5699C/WhatIsNewInMVC_2.pdf)</span></span>


<span data-ttu-id="e0547-107">[Introdução](#_TOC1) </span><span class="sxs-lookup"><span data-stu-id="e0547-107">[Introduction](#_TOC1) </span></span>  
<span data-ttu-id="e0547-108">[Atualizando um projeto do ASP.NET MVC 1.0 para o ASP.NET MVC 2](#_TOC2) </span><span class="sxs-lookup"><span data-stu-id="e0547-108">[Upgrading an ASP.NET MVC 1.0 Project to ASP.NET MVC 2](#_TOC2) </span></span>  
<span data-ttu-id="e0547-109">[Novos recursos](#_TOC3) </span><span class="sxs-lookup"><span data-stu-id="e0547-109">[New Features](#_TOC3) </span></span>  
<span data-ttu-id="e0547-110">[Auxiliares com modelos](#_TOC3_1) </span><span class="sxs-lookup"><span data-stu-id="e0547-110">[Templated Helpers](#_TOC3_1) </span></span>  
<span data-ttu-id="e0547-111">[Áreas](#_TOC3_2) </span><span class="sxs-lookup"><span data-stu-id="e0547-111">[Areas](#_TOC3_2) </span></span>  
<span data-ttu-id="e0547-112">[Suporte para controladores assíncronos](#_TOC3_3) </span><span class="sxs-lookup"><span data-stu-id="e0547-112">[Support for Asynchronous Controllers](#_TOC3_3) </span></span>  
<span data-ttu-id="e0547-113">[Suporte para DefaultValueAttribute nos parâmetros do método de ação](#_TOC3_4) </span><span class="sxs-lookup"><span data-stu-id="e0547-113">[Support for DefaultValueAttribute in Action-Method Parameters](#_TOC3_4) </span></span>  
<span data-ttu-id="e0547-114">[Suporte para dados binários com associadores de modelo de associação](#_TOC3_5) </span><span class="sxs-lookup"><span data-stu-id="e0547-114">[Support for Binding Binary Data with Model Binders](#_TOC3_5) </span></span>  
<span data-ttu-id="e0547-115">[Classes de ModelMetadataProvider e ModelMetadata](#_TOC3_6) </span><span class="sxs-lookup"><span data-stu-id="e0547-115">[ModelMetadata and ModelMetadataProvider Classes](#_TOC3_6) </span></span>  
<span data-ttu-id="e0547-116">[Suporte para atributos de DataAnnotations](#_TOC3_7) </span><span class="sxs-lookup"><span data-stu-id="e0547-116">[Support for DataAnnotations Attributes](#_TOC3_7) </span></span>  
<span data-ttu-id="e0547-117">[Provedores do validador de modelo](#_TOC3_8) </span><span class="sxs-lookup"><span data-stu-id="e0547-117">[Model-Validator Providers](#_TOC3_8) </span></span>  
<span data-ttu-id="e0547-118">[Validação do lado do cliente](#_TOC3_9) </span><span class="sxs-lookup"><span data-stu-id="e0547-118">[Client-Side Validation](#_TOC3_9) </span></span>  
<span data-ttu-id="e0547-119">[Novos trechos de código para Visual Studio 2010](#_TOC3_10) </span><span class="sxs-lookup"><span data-stu-id="e0547-119">[New Code Snippets for Visual Studio 2010](#_TOC3_10) </span></span>  
<span data-ttu-id="e0547-120">[Novo filtro de ação RequireHttpsAttribute](#_TOC3_11) </span><span class="sxs-lookup"><span data-stu-id="e0547-120">[New RequireHttpsAttribute Action Filter](#_TOC3_11) </span></span>  
<span data-ttu-id="e0547-121">[Substituindo o método HTTP verbo](#_TOC3_12) </span><span class="sxs-lookup"><span data-stu-id="e0547-121">[Overriding the HTTP Method Verb](#_TOC3_12) </span></span>  
<span data-ttu-id="e0547-122">[Nova classe HiddenInputAttribute para auxiliares com modelos](#_TOC3_13) </span><span class="sxs-lookup"><span data-stu-id="e0547-122">[New HiddenInputAttribute Class for Templated Helpers](#_TOC3_13) </span></span>  
<span data-ttu-id="e0547-123">[Método auxiliar Html.ValidationSummary pode exibir erros de nível de modelo](#_TOC3_14) </span><span class="sxs-lookup"><span data-stu-id="e0547-123">[Html.ValidationSummary Helper Method Can Display Model-Level Errors](#_TOC3_14) </span></span>  
<span data-ttu-id="e0547-124">[Modelos T4 no Visual Studio gerar código específico para a versão de destino do .NET Framework](#_TOC3_15)[melhorias na API](#_TOC4)</span><span class="sxs-lookup"><span data-stu-id="e0547-124">[T4 Templates in Visual Studio Generate Code that is Specific to the Target Version of the .NET Framework](#_TOC3_15)[API Improvements](#_TOC4)</span></span>  
[<span data-ttu-id="e0547-125">Alterações significativas</span><span class="sxs-lookup"><span data-stu-id="e0547-125">Breaking Changes</span></span>](#_TOC5)  
[<span data-ttu-id="e0547-126">Isenção de responsabilidade</span><span class="sxs-lookup"><span data-stu-id="e0547-126">Disclaimer</span></span>](#_TOC6)  

## <a id="_TOC1"></a>  <span data-ttu-id="e0547-127">Introdução</span><span class="sxs-lookup"><span data-stu-id="e0547-127">Introduction</span></span>

<span data-ttu-id="e0547-128">ASP.NET MVC 2 se baseia no ASP.NET MVC 1.0 e apresenta um grande conjunto de aprimoramentos e recursos voltados para o aumento da produtividade.</span><span class="sxs-lookup"><span data-stu-id="e0547-128">ASP.NET MVC 2 builds on ASP.NET MVC 1.0 and introduces a large set of enhancements and features that are focused on increasing productivity.</span></span> <span data-ttu-id="e0547-129">Esta versão é compatível com o ASP.NET MVC 1.0, para que todos os seus dados de Conhecimento, habilidades, código e extensões para o ASP.NET MVC 1.0 continuam a aplicar.</span><span class="sxs-lookup"><span data-stu-id="e0547-129">This release is compatible with ASP.NET MVC 1.0, so all your knowledge, skills, code, and extensions for ASP.NET MVC 1.0 continue to apply.</span></span>

<span data-ttu-id="e0547-130">Para obter mais informações sobre o ASP.NET MVC, visite os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="e0547-130">For more information about ASP.NET MVC, visit the following resources:</span></span>

- [<span data-ttu-id="e0547-131">Documentação do ASP.NET MVC no MSDN</span><span class="sxs-lookup"><span data-stu-id="e0547-131">ASP.NET MVC documentation on MSDN</span></span>](https://go.microsoft.com/fwlink/?LinkId=159758)
- [<span data-ttu-id="e0547-132">O site da Web do ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="e0547-132">The ASP.NET MVC Web site</span></span>](https://asp.net/mvc/)
- [<span data-ttu-id="e0547-133">Fóruns do ASP.NET MVC</span><span class="sxs-lookup"><span data-stu-id="e0547-133">The ASP.NET MVC forums</span></span>](https://forums.asp.net/1146.aspx)

## <a id="_TOC2"></a>  <span data-ttu-id="e0547-134">Atualizando um projeto do ASP.NET MVC 1.0 para o ASP.NET MVC 2</span><span class="sxs-lookup"><span data-stu-id="e0547-134">Upgrading an ASP.NET MVC 1.0 Project to ASP.NET MVC 2</span></span>

<span data-ttu-id="e0547-135">ASP.NET MVC 2 pode ser instalado lado a lado com o ASP.NET MVC 1.0 no mesmo servidor, que fornece a flexibilidade de desenvolvedores de aplicativo na escolha quando atualizar um aplicativo ASP.NET MVC 1.0 para o ASP.NET MVC 2.</span><span class="sxs-lookup"><span data-stu-id="e0547-135">ASP.NET MVC 2 can be installed side by side with ASP.NET MVC 1.0 on the same server, which gives application developers flexibility in choosing when to upgrade an ASP.NET MVC 1.0 application to ASP.NET MVC 2.</span></span> <span data-ttu-id="e0547-136">Para obter informações sobre como atualizar, consulte o documento [atualizando um aplicativo ASP.NET MVC 1.0 para o ASP.NET MVC 2](https://go.microsoft.com/fwlink/?LinkID=185459).</span><span class="sxs-lookup"><span data-stu-id="e0547-136">For information on how to upgrade, see the document [Upgrading an ASP.NET MVC 1.0 Application to ASP.NET MVC 2](https://go.microsoft.com/fwlink/?LinkID=185459).</span></span>

## <a id="_TOC3"></a>  <span data-ttu-id="e0547-137">Novos recursos</span><span class="sxs-lookup"><span data-stu-id="e0547-137">New Features</span></span>

<span data-ttu-id="e0547-138">Esta seção descreve os recursos que foram introduzidos na versão 2 do MVC.</span><span class="sxs-lookup"><span data-stu-id="e0547-138">This section describes features that have been introduced in the MVC 2 release.</span></span>

### <a id="_TOC3_1"></a>  <span data-ttu-id="e0547-139">Auxiliares com modelos</span><span class="sxs-lookup"><span data-stu-id="e0547-139">Templated Helpers</span></span>

<span data-ttu-id="e0547-140">Auxiliares com modelos permitem que você associados automaticamente elementos HTML para edição e exibição com tipos de dados.</span><span class="sxs-lookup"><span data-stu-id="e0547-140">Templated helpers let you automatically associate HTML elements for edit and display with data types.</span></span> <span data-ttu-id="e0547-141">Por exemplo, quando os dados do tipo System. DateTime são exibidos em uma exibição, um elemento de interface do usuário do seletor de data pode ser processado automaticamente.</span><span class="sxs-lookup"><span data-stu-id="e0547-141">For example, when data of type System.DateTime is displayed in a view, a date-picker UI element can be automatically rendered.</span></span> <span data-ttu-id="e0547-142">Isso é semelhante ao funcionam dos modelos de campo nos dados dinâmicos do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="e0547-142">This is similar to how field templates work in ASP.NET Dynamic Data.</span></span> <span data-ttu-id="e0547-143">Para obter mais informações, consulte [usando auxiliares modelo para exibir dados](https://go.microsoft.com/fwlink/?LinkId=159062) no site do MSDN.</span><span class="sxs-lookup"><span data-stu-id="e0547-143">For more information, see [Using Templated Helpers to Display Data](https://go.microsoft.com/fwlink/?LinkId=159062) on the MSDN Web site.</span></span>

### <a id="_TOC3_2"></a>  <span data-ttu-id="e0547-144">Areas</span><span class="sxs-lookup"><span data-stu-id="e0547-144">Areas</span></span>

<span data-ttu-id="e0547-145">Áreas permitem organizar um projeto grande em várias seções menores para gerenciar a complexidade de um aplicativo Web grande.</span><span class="sxs-lookup"><span data-stu-id="e0547-145">Areas let you organize a large project into multiple smaller sections in order to manage the complexity of a large Web application.</span></span> <span data-ttu-id="e0547-146">Cada seção ("área") normalmente representa uma seção separada de um site grande e é usada para agrupar conjuntos relacionados de controladores e exibições.</span><span class="sxs-lookup"><span data-stu-id="e0547-146">Each section ("area") typically represents a separate section of a large Web site and is used to group related sets of controllers and views.</span></span> <span data-ttu-id="e0547-147">Para obter mais informações, confira [Passo a passo: Organizando um aplicativo ASP.NET MVC por áreas](https://go.microsoft.com/fwlink/?LinkId=158978) no site do MSDN.</span><span class="sxs-lookup"><span data-stu-id="e0547-147">For more information, see [Walkthrough: Organizing an ASP.NET MVC Application by Areas](https://go.microsoft.com/fwlink/?LinkId=158978) on the MSDN Web site.</span></span>

<span data-ttu-id="e0547-148">Para criar uma nova área, no Gerenciador de soluções, clique com botão direito no projeto, clique em Adicionar e, em seguida, clique em área.</span><span class="sxs-lookup"><span data-stu-id="e0547-148">To create a new area, in Solution Explorer, right-click the project, click Add, and then click Area.</span></span> <span data-ttu-id="e0547-149">Isso exibe uma caixa de diálogo que solicitará o nome da área.</span><span class="sxs-lookup"><span data-stu-id="e0547-149">This displays a dialog box that prompts you for the area name.</span></span> <span data-ttu-id="e0547-150">Depois de inserir o nome da área, o Visual Studio adiciona uma nova área ao projeto.</span><span class="sxs-lookup"><span data-stu-id="e0547-150">After you enter the area name, Visual Studio adds a new area to the project.</span></span>

<span data-ttu-id="e0547-151">A figura a seguir mostra um exemplo de layout para um projeto com duas áreas, Blogs e administrador.</span><span class="sxs-lookup"><span data-stu-id="e0547-151">The following figure shows an example layout for a project with two areas, Admin and Blogs.</span></span>

![](what-is-new-in-aspnet-mvc/_static/image1.png)

<span data-ttu-id="e0547-152">Quando você cria uma área, o Visual Studio adiciona uma classe que deriva de AreaRegistration para cada área.</span><span class="sxs-lookup"><span data-stu-id="e0547-152">When you create an area, Visual Studio adds a class that derives from AreaRegistration to each area.</span></span> <span data-ttu-id="e0547-153">Essa classe é necessária para registrar a área e suas rotas, conforme mostrado no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="e0547-153">This class is required in order to register the area and its routes, as shown in the following example:</span></span>

[!code-csharp[Main](what-is-new-in-aspnet-mvc/samples/sample1.cs)]

<span data-ttu-id="e0547-154">O modelo de projeto padrão do ASP.NET MVC 2 inclui uma chamada ao método RegisterAllAreas no código para o arquivo global asax.</span><span class="sxs-lookup"><span data-stu-id="e0547-154">The default project template for ASP.NET MVC 2 includes a call to the RegisterAllAreas method in the code for the Global.asax file.</span></span> <span data-ttu-id="e0547-155">Esse método registra cada área no projeto, procurando por todos os tipos que derivam da classe AreaRegistration, criando uma instância do tipo e, em seguida, chamando o método RegisterArea na instância.</span><span class="sxs-lookup"><span data-stu-id="e0547-155">This method registers each area in the project by looking for all types that derive from the AreaRegistration class, instantiating an instance of the type, and then calling the RegisterArea method on the instance.</span></span> <span data-ttu-id="e0547-156">O exemplo a seguir mostra como isso é feito.</span><span class="sxs-lookup"><span data-stu-id="e0547-156">The following example shows how this is done.</span></span>

[!code-csharp[Main](what-is-new-in-aspnet-mvc/samples/sample2.cs)]

<span data-ttu-id="e0547-157">Se você não especificar o namespace no método RegisterArea chamando o contexto. Método Namespaces.Add, o namespace da classe de registro é usado por padrão.</span><span class="sxs-lookup"><span data-stu-id="e0547-157">If you do not specify the namespace in the RegisterArea method by calling the context.Namespaces.Add method, the namespace of the registration class is used by default.</span></span>

### <a id="_TOC3_3"></a>  <span data-ttu-id="e0547-158">Suporte para controladores assíncronos</span><span class="sxs-lookup"><span data-stu-id="e0547-158">Support for Asynchronous Controllers</span></span>

<span data-ttu-id="e0547-159">ASP.NET MVC 2 agora permite que os controladores processar solicitações de forma assíncrona.</span><span class="sxs-lookup"><span data-stu-id="e0547-159">ASP.NET MVC 2 now allows controllers to process requests asynchronously.</span></span> <span data-ttu-id="e0547-160">Isso pode levar a ganhos de desempenho, permitindo que os servidores que frequentemente chamar operações de bloqueio (como solicitações de rede) para chamar contrapartes sem bloqueio em vez disso.</span><span class="sxs-lookup"><span data-stu-id="e0547-160">This can lead to performance gains by allowing servers which frequently call blocking operations (like network requests) to call non-blocking counterparts instead.</span></span> <span data-ttu-id="e0547-161">Para obter mais informações, consulte o [usando um controlador assíncrono no ASP.NET MVC](https://msdn.microsoft.com/library/ee728598(v=VS.100).aspx) tópico no MSDN.</span><span class="sxs-lookup"><span data-stu-id="e0547-161">For more information, see the [Using an Asynchronous Controller in ASP.NET MVC](https://msdn.microsoft.com/library/ee728598(v=VS.100).aspx) topic on MSDN.</span></span>

### <a id="_TOC3_4"></a>  <span data-ttu-id="e0547-162">Suporte para DefaultValueAttribute nos parâmetros do método de ação</span><span class="sxs-lookup"><span data-stu-id="e0547-162">Support for DefaultValueAttribute in Action-Method Parameters</span></span>

<span data-ttu-id="e0547-163">A classe System.ComponentModel.DefaultValueAttribute permite que um valor padrão deve ser fornecido para o parâmetro de argumento para um método de ação.</span><span class="sxs-lookup"><span data-stu-id="e0547-163">The System.ComponentModel.DefaultValueAttribute class allows a default value to be supplied for the argument parameter to an action method.</span></span> <span data-ttu-id="e0547-164">Por exemplo, suponha que a rota padrão a seguir é definida:</span><span class="sxs-lookup"><span data-stu-id="e0547-164">For example, assume that the following default route is defined:</span></span>

[!code-json[Main](what-is-new-in-aspnet-mvc/samples/sample3.json)]

<span data-ttu-id="e0547-165">Suponha também que o seguinte método de controlador e ação é definido:</span><span class="sxs-lookup"><span data-stu-id="e0547-165">Also assume that the following controller and action method is defined:</span></span>

[!code-csharp[Main](what-is-new-in-aspnet-mvc/samples/sample4.cs)]

<span data-ttu-id="e0547-166">Qualquer um dos seguinte solicitação URLs invocará o método de ação de exibição que é definido no exemplo anterior.</span><span class="sxs-lookup"><span data-stu-id="e0547-166">Any of the following request URLs will invoke the View action method that is defined in the preceding example.</span></span>

- <span data-ttu-id="e0547-167">Artigo/123/exibição</span><span class="sxs-lookup"><span data-stu-id="e0547-167">/Article/View/123</span></span>
- <span data-ttu-id="e0547-168">Artigo/123/modo de exibição? página = 1 (efetivamente o mesmo que a solicitação anterior)</span><span class="sxs-lookup"><span data-stu-id="e0547-168">/Article/View/123?page=1 (Effectively the same as the previous request)</span></span>
- <span data-ttu-id="e0547-169">/Article/View/123?page=2</span><span class="sxs-lookup"><span data-stu-id="e0547-169">/Article/View/123?page=2</span></span>

<span data-ttu-id="e0547-170">Sem o atributo DefaultValueAttribute, a primeira URL da lista anterior não funcionaria, pois o argumento de página é um tipo de valor não anulável cujo valor não foi fornecido.</span><span class="sxs-lookup"><span data-stu-id="e0547-170">Without the DefaultValueAttribute attribute, the first URL from the preceding list would not work, because the page argument is a non-nullable value type whose value has not been provided.</span></span>

<span data-ttu-id="e0547-171">Se seu código é escrito em Visual Basic 2010 ou Visual c# 2010, você pode usar parâmetros opcionais em vez do atributo DefaultValueAttribute, conforme mostrado no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="e0547-171">If your code is written in Visual Basic 2010 or Visual C# 2010, you can use optional parameters instead of the DefaultValueAttribute attribute, as shown in the following example:</span></span>

[!code-vb[Main](what-is-new-in-aspnet-mvc/samples/sample5.vb)]

### <a id="_TOC3_5"></a>  <span data-ttu-id="e0547-172">Suporte para dados binários com associadores de modelo de associação</span><span class="sxs-lookup"><span data-stu-id="e0547-172">Support for Binding Binary Data with Model Binders</span></span>

<span data-ttu-id="e0547-173">Há duas novas sobrecargas do auxiliar Html.Hidden que codificar valores binários como cadeias de caracteres codificada em base-64:</span><span class="sxs-lookup"><span data-stu-id="e0547-173">There are two new overloads of the Html.Hidden helper that encode binary values as base-64-encoded strings:</span></span>

[!code-csharp[Main](what-is-new-in-aspnet-mvc/samples/sample6.cs)]

<span data-ttu-id="e0547-174">Um uso típico é inserir um carimbo de hora para um objeto no modo de exibição.</span><span class="sxs-lookup"><span data-stu-id="e0547-174">A typical use is to embed a timestamp for an object in the view.</span></span> <span data-ttu-id="e0547-175">Por exemplo, seu aplicativo pode incluir o seguinte objeto de produto:</span><span class="sxs-lookup"><span data-stu-id="e0547-175">For example, your application might include the following Product object:</span></span>

[!code-csharp[Main](what-is-new-in-aspnet-mvc/samples/sample7.cs)]

<span data-ttu-id="e0547-176">Um formulário de edição pode processar a propriedade de carimbo de hora no formulário, conforme mostrado no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="e0547-176">An edit form can render the TimeStamp property in the form as shown in the following example:</span></span>

[!code-aspx[Main](what-is-new-in-aspnet-mvc/samples/sample8.aspx)]

<span data-ttu-id="e0547-177">Essa marcação renderiza um elemento de entrada oculto com o valor de carimbo de hora como uma cadeia de caracteres codificado em base 64 que se parece com o exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="e0547-177">This markup renders a hidden input element with the timestamp value as a base-64-encoded string that resembles the following example:</span></span>

[!code-html[Main](what-is-new-in-aspnet-mvc/samples/sample9.html)]

<span data-ttu-id="e0547-178">Este formulário pode ser lançado para um método de ação que tem um argumento do tipo de produto, conforme mostrado no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="e0547-178">This form might be posted to an action method that has an argument of type Product, as shown in the following example:</span></span>

[!code-csharp[Main](what-is-new-in-aspnet-mvc/samples/sample10.cs)]

<span data-ttu-id="e0547-179">No método de ação, a propriedade de carimbo de hora é preenchida corretamente porque a cadeia de caracteres postada codificado em base 64 é convertida em uma matriz de bytes.</span><span class="sxs-lookup"><span data-stu-id="e0547-179">In the action method, the TimeStamp property is populated correctly because the posted base-64-encoded string is converted to a byte array.</span></span>

### <a id="_TOC3_6"></a>  <span data-ttu-id="e0547-180">Classes de ModelMetadataProvider e ModelMetadata</span><span class="sxs-lookup"><span data-stu-id="e0547-180">ModelMetadata and ModelMetadataProvider Classes</span></span>

<span data-ttu-id="e0547-181">A classe ModelMetadataProvider fornece uma abstração para obtenção de metadados para o modelo em um modo de exibição.</span><span class="sxs-lookup"><span data-stu-id="e0547-181">The ModelMetadataProvider class provides an abstraction for obtaining metadata for the model within a view.</span></span> <span data-ttu-id="e0547-182">MVC 2 inclui um provedor padrão que disponibiliza os metadados que é exposto pelos atributos no namespace DataAnnotations.</span><span class="sxs-lookup"><span data-stu-id="e0547-182">MVC 2 includes a default provider that makes available the metadata that is exposed by the attributes in the System.ComponentModel.DataAnnotations namespace.</span></span> <span data-ttu-id="e0547-183">É possível criar provedores de metadados que fornecem metadados de outros armazenamentos de dados, como bancos de dados ou arquivos XML.</span><span class="sxs-lookup"><span data-stu-id="e0547-183">It is possible to create metadata providers that provide metadata from other data stores, such as databases or XML files.</span></span>

<span data-ttu-id="e0547-184">A classe ViewDataDictionary expõe um objeto ModelMetadata que contém os metadados que é extraído do modelo pela classe ModelMetadataProvider.</span><span class="sxs-lookup"><span data-stu-id="e0547-184">The ViewDataDictionary class exposes a ModelMetadata object that contains the metadata that is extracted from the model by the ModelMetadataProvider class.</span></span> <span data-ttu-id="e0547-185">Isso permite que os auxiliares de modelo para consumir esses metadados e ajustar sua saída de acordo.</span><span class="sxs-lookup"><span data-stu-id="e0547-185">This enables the templated helpers to consume this metadata and adjust their output accordingly.</span></span>

<span data-ttu-id="e0547-186">Para obter mais informações, consulte a documentação para o [ModelMetadata](https://msdn.microsoft.com/library/system.web.mvc.modelmetadataprovider(VS.100).aspx) e [ModelMetadataProvider](https://msdn.microsoft.com/library/system.web.mvc.modelmetadataprovider(VS.100).aspx) classes.</span><span class="sxs-lookup"><span data-stu-id="e0547-186">For more information, see the documentation for the [ModelMetadata](https://msdn.microsoft.com/library/system.web.mvc.modelmetadataprovider(VS.100).aspx) and [ModelMetadataProvider](https://msdn.microsoft.com/library/system.web.mvc.modelmetadataprovider(VS.100).aspx) classes.</span></span>

### <a id="_TOC3_7"></a>  <span data-ttu-id="e0547-187">Suporte para atributos de DataAnnotations</span><span class="sxs-lookup"><span data-stu-id="e0547-187">Support for DataAnnotations Attributes</span></span>

<span data-ttu-id="e0547-188">ASP.NET MVC 2 dá suporte ao uso de atributos de validação RangeAttribute, RequiredAttribute, StringLengthAttribute e RegexAttribute (definidos no namespace DataAnnotations) quando você associa a um modelo para fornecer entrada validação.</span><span class="sxs-lookup"><span data-stu-id="e0547-188">ASP.NET MVC 2 supports using the RangeAttribute, RequiredAttribute, StringLengthAttribute, and RegexAttribute validation attributes (defined in the System.ComponentModel.DataAnnotations namespace) when you bind to a model in order to provide input validation.</span></span>

<span data-ttu-id="e0547-189">Para obter mais informações, confira [Como: Validar dados de modelo usando atributos de DataAnnotations](https://go.microsoft.com/fwlink/?LinkId=159063) no site do MSDN.</span><span class="sxs-lookup"><span data-stu-id="e0547-189">For more information, see [How to: Validate Model Data Using DataAnnotations Attributes](https://go.microsoft.com/fwlink/?LinkId=159063) on the MSDN Web site.</span></span> <span data-ttu-id="e0547-190">Um projeto de exemplo que ilustra o uso desses atributos está disponível para download em [ https://go.microsoft.com/fwlink/?LinkId=157753 ](https://go.microsoft.com/fwlink/?LinkId=157753).</span><span class="sxs-lookup"><span data-stu-id="e0547-190">A sample project that illustrates the use of these attributes is available for download at [https://go.microsoft.com/fwlink/?LinkId=157753](https://go.microsoft.com/fwlink/?LinkId=157753).</span></span>

### <a id="_TOC3_8"></a>  <span data-ttu-id="e0547-191">Provedores do validador de modelo</span><span class="sxs-lookup"><span data-stu-id="e0547-191">Model-Validator Providers</span></span>

<span data-ttu-id="e0547-192">A classe de provedor de validação do modelo representa uma abstração que fornece lógica de validação para o modelo.</span><span class="sxs-lookup"><span data-stu-id="e0547-192">The model-validation provider class represents an abstraction that provides validation logic for the model.</span></span> <span data-ttu-id="e0547-193">O ASP.NET MVC inclui um provedor de padrão com base em atributos de validação que estão incluídos no namespace DataAnnotations.</span><span class="sxs-lookup"><span data-stu-id="e0547-193">ASP.NET MVC includes a default provider based on validation attributes that are included in the System.ComponentModel.DataAnnotations namespace.</span></span> <span data-ttu-id="e0547-194">Você também pode criar seus próprios provedores de validação que definem as regras de validação personalizada e mapeamentos personalizados de regras de validação ao modelo.</span><span class="sxs-lookup"><span data-stu-id="e0547-194">You can also create your own validation providers that define custom validation rules and custom mappings of validation rules to the model.</span></span> <span data-ttu-id="e0547-195">Para obter mais informações, consulte a documentação para o [ModelValidatorProvider](https://msdn.microsoft.com/library/system.web.mvc.ModelValidatorProvider(VS.100).aspx) classe.</span><span class="sxs-lookup"><span data-stu-id="e0547-195">For more information, see the documentation for the [ModelValidatorProvider](https://msdn.microsoft.com/library/system.web.mvc.ModelValidatorProvider(VS.100).aspx) class.</span></span>

### <a id="_TOC3_9"></a>  <span data-ttu-id="e0547-196">Validação do lado do cliente</span><span class="sxs-lookup"><span data-stu-id="e0547-196">Client-Side Validation</span></span>

<span data-ttu-id="e0547-197">A classe de provedor de validador de modelo expõe metadados de validação para o navegador na forma de dados serializados em JSON que podem ser consumidos por uma biblioteca de validação do lado do cliente.</span><span class="sxs-lookup"><span data-stu-id="e0547-197">The model-validator provider class exposes validation metadata to the browser in the form of JSON-serialized data that can be consumed by a client-side validation library.</span></span> <span data-ttu-id="e0547-198">ASP.NET MVC 2 inclui uma biblioteca de validação de cliente e o adaptador que ofereça suporte os atributos de validação de namespace DataAnnotations observados anteriormente.</span><span class="sxs-lookup"><span data-stu-id="e0547-198">ASP.NET MVC 2 includes a client validation library and adapter that supports the DataAnnotations namespace validation attributes noted earlier.</span></span> <span data-ttu-id="e0547-199">A classe de provedor também permite que você usar outras bibliotecas de validação do cliente, escrevendo um adaptador que processa os dados JSON e chamadas para a biblioteca alternativa.</span><span class="sxs-lookup"><span data-stu-id="e0547-199">The provider class also enables you to use other client-validation libraries by writing an adapter that processes the JSON data and calls into the alternate library.</span></span>

### <a id="_TOC3_10"></a>  <span data-ttu-id="e0547-200">Novos trechos de código para Visual Studio 2010</span><span class="sxs-lookup"><span data-stu-id="e0547-200">New Code Snippets for Visual Studio 2010</span></span>

<span data-ttu-id="e0547-201">Um conjunto de trechos de código HTML para o ASP.NET MVC 2 é instalado com o Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="e0547-201">A set of HTML code snippets for ASP.NET MVC 2 is installed with Visual Studio 2010.</span></span> <span data-ttu-id="e0547-202">Para exibir uma lista de trechos de código, no menu Ferramentas, selecione o Gerenciador de trechos de código.</span><span class="sxs-lookup"><span data-stu-id="e0547-202">To view a list of these snippets, in the Tools menu, select Code Snippets Manager.</span></span> <span data-ttu-id="e0547-203">Para o idioma, selecione o HTML e para o local, selecione ASP.NET MVC 2.</span><span class="sxs-lookup"><span data-stu-id="e0547-203">For the language, select HTML, and for location, select ASP.NET MVC 2.</span></span> <span data-ttu-id="e0547-204">Para obter mais informações sobre como usar trechos de código, consulte a documentação do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e0547-204">For more information about how to use code snippets, see the Visual Studio documentation.</span></span>

### <a id="_TOC3_11"></a>  <span data-ttu-id="e0547-205">Novo filtro de ação RequireHttpsAttribute</span><span class="sxs-lookup"><span data-stu-id="e0547-205">New RequireHttpsAttribute Action Filter</span></span>

<span data-ttu-id="e0547-206">O ASP.NET MVC 2 inclui uma nova classe RequireHttpsAttribute que pode ser aplicada a controladores e métodos de ação.</span><span class="sxs-lookup"><span data-stu-id="e0547-206">ASP.NET MVC 2 includes a new RequireHttpsAttribute class that can be applied to action methods and controllers.</span></span> <span data-ttu-id="e0547-207">Por padrão, o filtro redireciona uma solicitação de HTTP não - SSL para o equivalente de habilitado para SSL (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="e0547-207">By default, the filter redirects a non-SSL (HTTP) request to the SSL-enabled (HTTPS) equivalent.</span></span>

### <a id="_TOC3_12"></a>  <span data-ttu-id="e0547-208">Substituindo o método HTTP verbo</span><span class="sxs-lookup"><span data-stu-id="e0547-208">Overriding the HTTP Method Verb</span></span>

<span data-ttu-id="e0547-209">Quando você cria um site da Web usando o estilo de arquitetura REST, verbos HTTP são usados para determinar qual ação executar para um recurso.</span><span class="sxs-lookup"><span data-stu-id="e0547-209">When you build a Web site by using the REST architectural style, HTTP verbs are used to determine which action to perform for a resource.</span></span> <span data-ttu-id="e0547-210">O REST requer que suportam aplicativos a gama completa de verbos HTTP comuns, incluindo GET, PUT, POST e excluir.</span><span class="sxs-lookup"><span data-stu-id="e0547-210">REST requires that applications support the full range of common HTTP verbs, including GET, PUT, POST, and DELETE.</span></span>

<span data-ttu-id="e0547-211">O ASP.NET MVC 2 inclui novos atributos que você pode aplicar métodos de ação e essa sintaxe compacta do recurso.</span><span class="sxs-lookup"><span data-stu-id="e0547-211">ASP.NET MVC 2 includes new attributes that you can apply to action methods and that feature compact syntax.</span></span> <span data-ttu-id="e0547-212">Esses atributos habilitam o ASP.NET MVC selecionar um método de ação com base no verbo HTTP.</span><span class="sxs-lookup"><span data-stu-id="e0547-212">These attributes enable ASP.NET MVC to select an action method based on the HTTP verb.</span></span> <span data-ttu-id="e0547-213">No exemplo a seguir, uma solicitação POST chamará o primeiro método de ação e uma solicitação PUT chamará o segundo método de ação.</span><span class="sxs-lookup"><span data-stu-id="e0547-213">In the following example, a POST request will call the first action method and a PUT request will call the second action method.</span></span>

[!code-csharp[Main](what-is-new-in-aspnet-mvc/samples/sample11.cs)]

<span data-ttu-id="e0547-214">Em versões anteriores do ASP.NET MVC, esses métodos de ação necessária uma sintaxe mais detalhada, conforme mostrado no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="e0547-214">In earlier versions of ASP.NET MVC, these action methods required more verbose syntax, as shown in the following example:</span></span>

[!code-csharp[Main](what-is-new-in-aspnet-mvc/samples/sample12.cs)]

<span data-ttu-id="e0547-215">Como navegadores oferecem suporte a somente os verbos GET e HTTP POST, não é possível postar em uma ação que requer um verbo diferente.</span><span class="sxs-lookup"><span data-stu-id="e0547-215">Because browsers support only the GET and POST HTTP verbs, it is not possible to post to an action that requires a different verb.</span></span> <span data-ttu-id="e0547-216">Portanto, não é possível com suporte nativo de todas as solicitações RESTful.</span><span class="sxs-lookup"><span data-stu-id="e0547-216">Thus it is not possible to natively support all RESTful requests.</span></span>

<span data-ttu-id="e0547-217">No entanto, para dar suporte a RESTful solicitações durante as operações POST, o ASP.NET MVC 2 introduz um novo método auxiliar HttpMethodOverride HTML.</span><span class="sxs-lookup"><span data-stu-id="e0547-217">However, to support RESTful requests during POST operations, ASP.NET MVC 2 introduces a new HttpMethodOverride HTML helper method.</span></span> <span data-ttu-id="e0547-218">Este método renderiza um elemento de entrada oculta que faz com que o formulário emular efetivamente qualquer método HTTP.</span><span class="sxs-lookup"><span data-stu-id="e0547-218">This method renders a hidden input element that causes the form to effectively emulate any HTTP method.</span></span> <span data-ttu-id="e0547-219">Por exemplo, usando o método auxiliar HttpMethodOverride HTML, você pode ter um envio de formulário aparecer uma solicitação PUT ou DELETE.</span><span class="sxs-lookup"><span data-stu-id="e0547-219">For example, by using the HttpMethodOverride HTML helper method, you can have a form submission appear be a PUT or DELETE request.</span></span> <span data-ttu-id="e0547-220">O comportamento de HttpMethodOverride afeta os seguintes atributos:</span><span class="sxs-lookup"><span data-stu-id="e0547-220">The behavior of HttpMethodOverride affects the following attributes:</span></span>

- <span data-ttu-id="e0547-221">HttpPostAttribute</span><span class="sxs-lookup"><span data-stu-id="e0547-221">HttpPostAttribute</span></span>
- <span data-ttu-id="e0547-222">HttpPutAttribute</span><span class="sxs-lookup"><span data-stu-id="e0547-222">HttpPutAttribute</span></span>
- <span data-ttu-id="e0547-223">HttpGetAttribute</span><span class="sxs-lookup"><span data-stu-id="e0547-223">HttpGetAttribute</span></span>
- <span data-ttu-id="e0547-224">HttpDeleteAttribute</span><span class="sxs-lookup"><span data-stu-id="e0547-224">HttpDeleteAttribute</span></span>
- <span data-ttu-id="e0547-225">AcceptVerbsAttribute</span><span class="sxs-lookup"><span data-stu-id="e0547-225">AcceptVerbsAttribute</span></span>

<span data-ttu-id="e0547-226">O elemento de entrada oculto tem seu nome X-HTTP-Method-Override e seu valor definido para o verbo HTTP para emular.</span><span class="sxs-lookup"><span data-stu-id="e0547-226">The hidden input element has its name X-HTTP-Method-Override and its value set to the HTTP verb to emulate.</span></span> <span data-ttu-id="e0547-227">O valor de substituição também pode ser especificado em um cabeçalho HTTP ou em um valor de cadeia de caracteres de consulta como um par nome/valor.</span><span class="sxs-lookup"><span data-stu-id="e0547-227">The override value can also be specified in an HTTP header or in a query string value as a name/value pair.</span></span>

<span data-ttu-id="e0547-228">A substituição só pode ser usada quando a solicitação real é uma solicitação POST.</span><span class="sxs-lookup"><span data-stu-id="e0547-228">The override can only be used when the real request is a POST request.</span></span> <span data-ttu-id="e0547-229">O valor de substituição será ignorado para solicitações que usam qualquer outro verbo HTTP.</span><span class="sxs-lookup"><span data-stu-id="e0547-229">The override value will be ignored for requests that use any other HTTP verb.</span></span>

### <a id="_TOC3_13"></a>  <span data-ttu-id="e0547-230">Nova classe HiddenInputAttribute para auxiliares com modelos</span><span class="sxs-lookup"><span data-stu-id="e0547-230">New HiddenInputAttribute Class for Templated Helpers</span></span>

<span data-ttu-id="e0547-231">Você pode aplicar o novo atributo HiddenInputAttribute para uma propriedade de modelo para indicar se um elemento de entrada oculto deve ser renderizado ao exibir o modelo em um modelo do editor.</span><span class="sxs-lookup"><span data-stu-id="e0547-231">You can apply the new HiddenInputAttribute attribute to a model property to indicate whether a hidden input element should be rendered when displaying the model in an editor template.</span></span> <span data-ttu-id="e0547-232">(O atributo define um valor de UIHint implícito de HiddenInput).</span><span class="sxs-lookup"><span data-stu-id="e0547-232">(The attribute sets an implicit UIHint value of HiddenInput).</span></span> <span data-ttu-id="e0547-233">A propriedade do atributo DisplayValue permite especificar se o valor é exibido no editor e modos de exibição.</span><span class="sxs-lookup"><span data-stu-id="e0547-233">The attribute's DisplayValue property lets you specify whether the value is displayed in editor and display modes.</span></span> <span data-ttu-id="e0547-234">Quando DisplayValue é definido como false, nada é exibido, nem mesmo a marcação HTML que normalmente envolve um campo.</span><span class="sxs-lookup"><span data-stu-id="e0547-234">When DisplayValue is set to false, nothing is displayed, not even the HTML markup that normally surrounds a field.</span></span> <span data-ttu-id="e0547-235">O valor padrão para DisplayValue é verdadeiro.</span><span class="sxs-lookup"><span data-stu-id="e0547-235">The default value for DisplayValue is true.</span></span>

<span data-ttu-id="e0547-236">Você pode usar o atributo HiddenInputAttribute nos seguintes cenários:</span><span class="sxs-lookup"><span data-stu-id="e0547-236">You might use HiddenInputAttribute attribute in the following scenarios:</span></span>

- <span data-ttu-id="e0547-237">Quando um modo de exibição permite aos usuários editar a ID de um objeto e é necessário exibir o valor, bem como para fornecer um elemento de entrada oculto que contém a ID do antiga para que ele pode ser passado de volta para o controlador.</span><span class="sxs-lookup"><span data-stu-id="e0547-237">When a view lets users edit the ID of an object and it is necessary to display the value as well as to provide a hidden input element that contains the old ID so that it can be passed back to the controller.</span></span>
- <span data-ttu-id="e0547-238">Quando um modo de exibição permite que os usuários editar uma propriedade binária que nunca deve ser exibida, como uma propriedade de carimbo de hora.</span><span class="sxs-lookup"><span data-stu-id="e0547-238">When a view lets users edit a binary property that should never be displayed, such as a timestamp property.</span></span> <span data-ttu-id="e0547-239">Nesse caso, o valor e uma marcação HTML ao redor (como o rótulo e valor) não são exibidos.</span><span class="sxs-lookup"><span data-stu-id="e0547-239">In that case, the value and surrounding HTML markup (such as the label and value) are not displayed.</span></span>

<span data-ttu-id="e0547-240">O exemplo a seguir mostra como usar a classe HiddenInputAttribute.</span><span class="sxs-lookup"><span data-stu-id="e0547-240">The following example shows how to use the HiddenInputAttribute class.</span></span>

[!code-csharp[Main](what-is-new-in-aspnet-mvc/samples/sample13.cs)]

<span data-ttu-id="e0547-241">Quando o atributo é definido como true (ou nenhum parâmetro for especificado), ocorre o seguinte:</span><span class="sxs-lookup"><span data-stu-id="e0547-241">When the attribute is set to true (or no parameter is specified), the following occurs:</span></span>

- <span data-ttu-id="e0547-242">Em modelos de exibição, um rótulo é renderizado e o valor é exibido ao usuário.</span><span class="sxs-lookup"><span data-stu-id="e0547-242">In display templates, a label is rendered and the value is displayed to the user.</span></span>
- <span data-ttu-id="e0547-243">No editor de modelos, um rótulo é renderizado e o valor é processado em um elemento de entrada oculto.</span><span class="sxs-lookup"><span data-stu-id="e0547-243">In editor templates, a label is rendered and the value is rendered in a hidden input element.</span></span>

<span data-ttu-id="e0547-244">Quando o atributo é definido como false, ocorre o seguinte:</span><span class="sxs-lookup"><span data-stu-id="e0547-244">When the attribute is set to false, the following occurs:</span></span>

- <span data-ttu-id="e0547-245">Em modelos de exibição, nada será renderizado para esse campo.</span><span class="sxs-lookup"><span data-stu-id="e0547-245">In display templates, nothing is rendered for that field.</span></span>
- <span data-ttu-id="e0547-246">No editor de modelos, nenhum rótulo é renderizado e o valor é processado em um elemento de entrada oculto.</span><span class="sxs-lookup"><span data-stu-id="e0547-246">In editor templates, no label is rendered and the value is rendered in a hidden input element.</span></span>

### <a id="_TOC3_14"></a>  <span data-ttu-id="e0547-247">Método auxiliar Html.ValidationSummary pode exibir erros de nível de modelo</span><span class="sxs-lookup"><span data-stu-id="e0547-247">Html.ValidationSummary Helper Method Can Display Model-Level Errors</span></span>

<span data-ttu-id="e0547-248">Em vez de sempre exibir todos os erros de validação, o método auxiliar Html.ValidationSummary tem uma nova opção para exibir somente os erros de nível de modelo.</span><span class="sxs-lookup"><span data-stu-id="e0547-248">Instead of always displaying all validation errors, the Html.ValidationSummary helper method has a new option to display only model-level errors.</span></span> <span data-ttu-id="e0547-249">Isso permite que os erros de nível de modelo a ser exibido no resumo de validação e erros específicos de campo a ser exibido ao lado de cada campo.</span><span class="sxs-lookup"><span data-stu-id="e0547-249">This enables model-level errors to be displayed in the validation summary and field-specific errors to be displayed next to each field.</span></span>

### <a id="_TOC3_15"></a>  <span data-ttu-id="e0547-250">Modelos T4 no Visual Studio gerar código específico para a versão de destino do .NET Framework</span><span class="sxs-lookup"><span data-stu-id="e0547-250">T4 Templates in Visual Studio Generate Code that is Specific to the Target Version of the .NET Framework</span></span>

<span data-ttu-id="e0547-251">Uma nova propriedade está disponível para arquivos T4 do host do ASP.NET MVC T4 que especifica a versão do .NET Framework que é usado pelo aplicativo.</span><span class="sxs-lookup"><span data-stu-id="e0547-251">A new property is available to T4 files from the ASP.NET MVC T4 host that specifies the version of the .NET Framework that is used by the application.</span></span> <span data-ttu-id="e0547-252">Isso permite que os modelos T4 gerar o código e a marcação que é específica para uma versão do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="e0547-252">This enables T4 templates to generate code and markup that is specific to a version of the .NET Framework.</span></span> <span data-ttu-id="e0547-253">No Visual Studio 2008, o valor é sempre .NET 3.5.</span><span class="sxs-lookup"><span data-stu-id="e0547-253">In Visual Studio 2008, the value is always .NET 3.5.</span></span> <span data-ttu-id="e0547-254">No Visual Studio 2010, o valor é o .NET 3.5 ou 4 do .NET.</span><span class="sxs-lookup"><span data-stu-id="e0547-254">In Visual Studio 2010, the value is either .NET 3.5 or .NET 4.</span></span>

## <a id="_TOC4"></a>  <span data-ttu-id="e0547-255">Melhorias na API</span><span class="sxs-lookup"><span data-stu-id="e0547-255">API Improvements</span></span>

<span data-ttu-id="e0547-256">Esta seção descreve as alterações a membros e tipos de ASP.NET MVC existentes.</span><span class="sxs-lookup"><span data-stu-id="e0547-256">This section describes changes to existing ASP.NET MVC types and members.</span></span>

- <span data-ttu-id="e0547-257">Adicionado um método CreateActionInvoker virtual protegido na classe do controlador.</span><span class="sxs-lookup"><span data-stu-id="e0547-257">Added a protected virtual CreateActionInvoker method in the Controller class.</span></span> <span data-ttu-id="e0547-258">Esse método é invocado pela propriedade ActionInvoker do controlador e permite a instanciação lenta do invocador se nenhum chamador já está definido.</span><span class="sxs-lookup"><span data-stu-id="e0547-258">This method is invoked by the ActionInvoker property of Controller and allows for lazy instantiation of the invoker if no invoker is already set.</span></span>
- <span data-ttu-id="e0547-259">Adicionado um método HandleUnauthorizedRequest virtual protegido na classe AuthorizeAttribute.</span><span class="sxs-lookup"><span data-stu-id="e0547-259">Added a protected virtual HandleUnauthorizedRequest method in the AuthorizeAttribute class.</span></span> <span data-ttu-id="e0547-260">Isso permite que os filtros que derivam de AuthorizeAttribute para controlar o comportamento quando ocorre falha na autorização.</span><span class="sxs-lookup"><span data-stu-id="e0547-260">This enables filters that derive from AuthorizeAttribute to control the behavior when authorization fails.</span></span>
- <span data-ttu-id="e0547-261">Adicionado um método Add (cadeia de caracteres chave, valor do objeto) na classe ValueProviderDictionary.</span><span class="sxs-lookup"><span data-stu-id="e0547-261">Added an Add(string key, object value) method in the ValueProviderDictionary class.</span></span> <span data-ttu-id="e0547-262">Isso permite que você use a sintaxe do inicializador de dicionário para ValueProviderDictionary, como no exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="e0547-262">This enables you to use the dictionary initializer syntax for ValueProviderDictionary, as in the following example:</span></span>

[!code-csharp[Main](what-is-new-in-aspnet-mvc/samples/sample14.cs)]

- <span data-ttu-id="e0547-263">Adicionado um get\_método na classe Sys.Mvc.AjaxContext do objeto.</span><span class="sxs-lookup"><span data-stu-id="e0547-263">Added a get\_object method in the Sys.Mvc.AjaxContext class.</span></span> <span data-ttu-id="e0547-264">Esse é um método de JavaScript que é semelhante ao get\_método de dados, mas se o tipo de conteúdo da resposta é application/json, obter\_retorna o objeto JSON.</span><span class="sxs-lookup"><span data-stu-id="e0547-264">This is a JavaScript method that is similar to the get\_data method, but if the content type of the response is application/json, get\_object returns the JSON object.</span></span>
- <span data-ttu-id="e0547-265">Adicionada uma propriedade ActionDescriptor na classe AuthorizationContext.</span><span class="sxs-lookup"><span data-stu-id="e0547-265">Added an ActionDescriptor property in the AuthorizationContext class.</span></span>
- <span data-ttu-id="e0547-266">Adicionado um token de UrlParameter.Optional que pode ser usado para solucionar problemas ao associar a um modelo que contém uma propriedade de ID quando a propriedade estiver ausente em uma postagem de formulário.</span><span class="sxs-lookup"><span data-stu-id="e0547-266">Added a UrlParameter.Optional token that can be used to work around problems when binding to a model that contains an ID property when the property is absent in a form post.</span></span> <span data-ttu-id="e0547-267">Para obter mais detalhes, consulte a entrada [parâmetros de URL opcional do ASP.NET MVC 2](http://haacked.com/archive/2010/02/12/asp-net-mvc-2-optional-url-parameters.aspx) no blog de Phil Haack.</span><span class="sxs-lookup"><span data-stu-id="e0547-267">For more detail, see the entry [ASP.NET MVC 2 Optional URL Parameters](http://haacked.com/archive/2010/02/12/asp-net-mvc-2-optional-url-parameters.aspx) on Phil Haack's blog.</span></span>

## <a id="_TOC5"></a>  <span data-ttu-id="e0547-268">Alterações significativas</span><span class="sxs-lookup"><span data-stu-id="e0547-268">Breaking Changes</span></span>

<span data-ttu-id="e0547-269">As seguintes alterações podem causar erros em aplicativos existentes do ASP.NET MVC 1.0.</span><span class="sxs-lookup"><span data-stu-id="e0547-269">The following changes might cause errors in existing ASP.NET MVC 1.0 applications.</span></span>

#### <a name="change-in-property-validation-behavior-for-classes-that-implement-idataerrorinfo"></a><span data-ttu-id="e0547-270">Alteração no comportamento de validação de propriedade para classes que implementam IDataErrorInfo</span><span class="sxs-lookup"><span data-stu-id="e0547-270">Change in property validation behavior for classes that implement IDataErrorInfo</span></span>

<span data-ttu-id="e0547-271">Para objetos de modelo que usam IDataErrorInfo para executar a validação, cada propriedade é validada, independentemente se um novo valor foi definido.</span><span class="sxs-lookup"><span data-stu-id="e0547-271">For model objects that use IDataErrorInfo to perform validation, every property is validated, regardless of whether a new value was set.</span></span> <span data-ttu-id="e0547-272">No ASP.NET MVC 1.0, apenas as propriedades que tinham novos valores definida foram validadas.</span><span class="sxs-lookup"><span data-stu-id="e0547-272">In ASP.NET MVC 1.0, only properties that had new values set were validated.</span></span> <span data-ttu-id="e0547-273">No ASP.NET MVC 2, a propriedade Error de IDataErrorInfo é chamada apenas se todos os validadores de propriedade foram bem-sucedidas.</span><span class="sxs-lookup"><span data-stu-id="e0547-273">In ASP.NET MVC 2, the Error property of IDataErrorInfo is called only if all the property validators were successful.</span></span>

#### <a name="iis-script-mapping-script-is-no-longer-available-in-the-installer"></a><span data-ttu-id="e0547-274">Script de mapeamento de script do IIS não está mais disponível no instalador</span><span class="sxs-lookup"><span data-stu-id="e0547-274">IIS script mapping script is no longer available in the installer</span></span>

<span data-ttu-id="e0547-275">O script de mapeamento de script do IIS é um script de linha de comando que é usado para configurar mapeamentos de script para IIS 6 e IIS 7 no modo clássico.</span><span class="sxs-lookup"><span data-stu-id="e0547-275">The IIS script-mapping script is a command-line script that is used to configure script maps for IIS 6 and for IIS 7 in Classic mode.</span></span> <span data-ttu-id="e0547-276">O script de mapeamento de script não será necessária se você usar o Visual Studio Development Server ou se você usar o IIS 7 no modo integrado.</span><span class="sxs-lookup"><span data-stu-id="e0547-276">The script-mapping script is not needed if you use the Visual Studio Development Server or if you use IIS 7 in Integrated mode.</span></span> <span data-ttu-id="e0547-277">Os scripts estão disponíveis como um download separado sem suporte nas [WebStack ASP.NET](https://github.com/aspnet/AspNetWebStack).</span><span class="sxs-lookup"><span data-stu-id="e0547-277">The scripts are available as a separate unsupported download on the [ASP.NET WebStack](https://github.com/aspnet/AspNetWebStack).</span></span>

#### <a name="the-htmlsubstitute-helper-method-in-mvc-futures-is-no-longer-available"></a><span data-ttu-id="e0547-278">O método auxiliar de Html.Substitute na versão futura do MVC não está mais disponível</span><span class="sxs-lookup"><span data-stu-id="e0547-278">The Html.Substitute helper method in MVC Futures is no longer available</span></span>

<span data-ttu-id="e0547-279">Devido a alterações no comportamento de renderização de mecanismos de exibição do MVC, o método auxiliar Html.Substitute não funciona e foi removido.</span><span class="sxs-lookup"><span data-stu-id="e0547-279">Due to changes in the rendering behavior of MVC view engines, the Html.Substitute helper method does not work and has been removed.</span></span>

#### <a name="the-ivalueprovider-interface-replaces-all-uses-of-idictionary"></a><span data-ttu-id="e0547-280">A interface do IValueProvider substitui todos os usos de IDictionary</span><span class="sxs-lookup"><span data-stu-id="e0547-280">The IValueProvider interface replaces all uses of IDictionary</span></span>

<span data-ttu-id="e0547-281">Cada argumento de método ou propriedade que aceita o IDictionary no MVC 1.0 agora aceita IValueProvider.</span><span class="sxs-lookup"><span data-stu-id="e0547-281">Every property or method argument that accepted IDictionary in MVC 1.0 now accepts IValueProvider.</span></span> <span data-ttu-id="e0547-282">Essa alteração afeta somente os aplicativos que incluem provedores de valor personalizados ou associadores de modelo personalizados.</span><span class="sxs-lookup"><span data-stu-id="e0547-282">This change affects only applications that include custom value providers or custom model binders.</span></span> <span data-ttu-id="e0547-283">Exemplos de propriedades e métodos que são afetados por essa alteração incluem o seguinte:</span><span class="sxs-lookup"><span data-stu-id="e0547-283">Examples of properties and methods that are affected by this change include the following:</span></span>

- <span data-ttu-id="e0547-284">A propriedade ValueProvider das classes ControllerBase e ModelBindingContext.</span><span class="sxs-lookup"><span data-stu-id="e0547-284">The ValueProvider property of the ControllerBase and ModelBindingContext classes.</span></span>
- <span data-ttu-id="e0547-285">Os métodos de TryUpdateModel da classe do controlador.</span><span class="sxs-lookup"><span data-stu-id="e0547-285">The TryUpdateModel methods of the Controller class.</span></span>

#### <a name="new-css-classes-were-added-in-the-sitecss-file"></a><span data-ttu-id="e0547-286">Novas classes CSS foram adicionadas no arquivo site.</span><span class="sxs-lookup"><span data-stu-id="e0547-286">New CSS classes were added in the Site.css file</span></span>

<span data-ttu-id="e0547-287">O arquivo CSS nos modelos de projeto do ASP.NET MVC foi atualizado para incluir novos estilos usados pela funcionalidade de validação e pelos auxiliares de modelo.</span><span class="sxs-lookup"><span data-stu-id="e0547-287">The Site.css file in the ASP.NET MVC project templates has been updated to include new styles used by the validation functionality and by the templated helpers.</span></span>

#### <a name="helpers-now-return-an-mvchtmlstring-object"></a><span data-ttu-id="e0547-288">Os auxiliares agora retornam um objeto MvcHtmlString</span><span class="sxs-lookup"><span data-stu-id="e0547-288">Helpers now return an MvcHtmlString object</span></span>

<span data-ttu-id="e0547-289">Para aproveitar a nova sintaxe de expressão de codificação HTML no ASP.NET 4, o tipo de retorno para os auxiliares HTML estará MvcHtmlString em vez de uma cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="e0547-289">In order to take advantage of the new HTML-encoding expression syntax in ASP.NET 4, the return type for HTML helpers is now MvcHtmlString instead of a string.</span></span> <span data-ttu-id="e0547-290">Se você usar o ASP.NET MVC 2 e os auxiliares de novo no ASP.NET 3.5, você não poderá aproveitar a sintaxe de codificação HTML; a nova sintaxe está disponível somente quando você executar o ASP.NET MVC 2 no ASP.NET 4.</span><span class="sxs-lookup"><span data-stu-id="e0547-290">If you use ASP.NET MVC 2 and the new helpers on ASP.NET 3.5, you will not be able to take advantage of the HTML-encoding syntax; the new syntax is available only when you run ASP.NET MVC 2 on ASP.NET 4.</span></span>

#### <a name="jsonresult-now-responds-only-to-http-post-requests"></a><span data-ttu-id="e0547-291">JsonResult agora responde apenas às solicitações HTTP POST</span><span class="sxs-lookup"><span data-stu-id="e0547-291">JsonResult now responds only to HTTP POST requests</span></span>

<span data-ttu-id="e0547-292">Para minimizar ataques que têm o potencial de divulgação de informações, por padrão, de sequestro de JSON a classe JsonResult agora responde apenas às solicitações HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="e0547-292">In order to mitigate JSON hijacking attacks that have the potential for information disclosure, by default, the JsonResult class now responds only to HTTP POST requests.</span></span> <span data-ttu-id="e0547-293">OBTER AJAX chamadas a métodos de ação que retornam um objeto JsonResult devem ser alteradas para usar POST em vez disso.</span><span class="sxs-lookup"><span data-stu-id="e0547-293">Ajax GET calls to action methods that return a JsonResult object should be changed to use POST instead.</span></span> <span data-ttu-id="e0547-294">Se necessário, você pode substituir esse comportamento, definindo a propriedade JsonRequestBehavior novo de JsonResult.</span><span class="sxs-lookup"><span data-stu-id="e0547-294">If necessary, you can override this behavior by setting the new JsonRequestBehavior property of JsonResult.</span></span> <span data-ttu-id="e0547-295">Para obter mais informações sobre a exploração de possíveis, consulte o postagem no blog [sequestro de JSON](http://haacked.com/archive/2009/06/25/json-hijacking.aspx) no blog de Phil Haack.</span><span class="sxs-lookup"><span data-stu-id="e0547-295">For more information about the potential exploit, see the blog post [JSON Hijacking](http://haacked.com/archive/2009/06/25/json-hijacking.aspx) on Phil Haack's blog.</span></span>

#### <a name="model-and-modeltype-property-setters-on-modelbindingcontext-are-obsolete"></a><span data-ttu-id="e0547-296">Modelo e os setters de propriedade ModelType em ModelBindingContext estão obsoletos</span><span class="sxs-lookup"><span data-stu-id="e0547-296">Model and ModelType property setters on ModelBindingContext are obsolete</span></span>

<span data-ttu-id="e0547-297">Uma nova propriedade ModelMetadata configurável adicionou à classe ModelBindingContext.</span><span class="sxs-lookup"><span data-stu-id="e0547-297">A new settable ModelMetadata property has been added to the ModelBindingContext class.</span></span> <span data-ttu-id="e0547-298">A nova propriedade encapsula o modelo e as propriedades de ModelType.</span><span class="sxs-lookup"><span data-stu-id="e0547-298">The new property encapsulates both the Model and the ModelType properties.</span></span> <span data-ttu-id="e0547-299">Embora as propriedades de modelo e ModelType são obsoletas, para compatibilidade com versões anteriores de getters de propriedade ainda funcionam; eles delegam para a propriedade ModelMetadata para recuperar o valor.</span><span class="sxs-lookup"><span data-stu-id="e0547-299">Although the Model and ModelType properties are obsolete, for backward compatibility the property getters still work; they delegate to the ModelMetadata property to retrieve the value.</span></span>

#### <a name="changes-to-the-defaultcontrollerfactory-class-break-custom-controller-factories-that-derive-from-it"></a><span data-ttu-id="e0547-300">Alterações para a classe de DefaultControllerFactory interromper alocadores de controlador personalizado que derivam dela</span><span class="sxs-lookup"><span data-stu-id="e0547-300">Changes to the DefaultControllerFactory class break custom controller factories that derive from it</span></span>

<span data-ttu-id="e0547-301">A classe de DefaultControllerFactory foi corrigida, removendo a propriedade RequestContext.</span><span class="sxs-lookup"><span data-stu-id="e0547-301">The DefaultControllerFactory class was fixed by removing the RequestContext property.</span></span> <span data-ttu-id="e0547-302">No lugar essa propriedade, a instância do contexto de solicitação é passada para os métodos GetControllerInstance e GetControllerType virtuais protegidos.</span><span class="sxs-lookup"><span data-stu-id="e0547-302">In place of this property, the request context instance is passed to the protected virtual GetControllerInstance and GetControllerType methods.</span></span> <span data-ttu-id="e0547-303">Essa alteração afeta os alocadores de controlador personalizado que derivam de DefaultControllerFactory.</span><span class="sxs-lookup"><span data-stu-id="e0547-303">This change affects custom controller factories that derive from DefaultControllerFactory.</span></span>

<span data-ttu-id="e0547-304">Alocadores de controlador personalizado geralmente são usados para fornecer aplicativos de injeção de dependência para o ASP.NET MVC.</span><span class="sxs-lookup"><span data-stu-id="e0547-304">Custom controller factories are often used to provide dependency injection for ASP.NET MVC applications.</span></span> <span data-ttu-id="e0547-305">Para atualizar as fábricas de controlador personalizado para dar suporte a ASP.NET MVC 2, alterar a assinatura do método ou assinaturas para coincidir com as novas assinaturas e usar o parâmetro de contexto de solicitação em vez da propriedade.</span><span class="sxs-lookup"><span data-stu-id="e0547-305">To update the custom controller factories to support ASP.NET MVC 2, change the method signature or signatures to match the new signatures, and use the request context parameter instead of the property.</span></span>

#### <a name="area-is-a-now-a-reserved-route-value-key"></a><span data-ttu-id="e0547-306">"Área de" agora é uma uma chave do valor de rota reservado</span><span class="sxs-lookup"><span data-stu-id="e0547-306">"Area" is a now a reserved route-value key</span></span>

<span data-ttu-id="e0547-307">A cadeia de caracteres "área de" em valores de rota agora tem um significado especial no ASP.NET MVC, da mesma maneira que fazem "controller" e "ação".</span><span class="sxs-lookup"><span data-stu-id="e0547-307">The string "area" in Route values now has special meaning in ASP.NET MVC, in the same way that "controller" and "action" do.</span></span> <span data-ttu-id="e0547-308">Uma implicação é que se os auxiliares HTML são fornecidos com um dicionário de valores de rota que contém "área", os auxiliares não acrescentará "área de" na cadeia de caracteres de consulta.</span><span class="sxs-lookup"><span data-stu-id="e0547-308">One implication is that if HTML helpers are supplied with a route-value dictionary containing "area", the helpers will no longer append "area" in the query string.</span></span>

<span data-ttu-id="e0547-309">Se você estiver usando o recurso de áreas, verifique se não usar {área} como parte de sua URL da rota.</span><span class="sxs-lookup"><span data-stu-id="e0547-309">If you are using the Areas feature, make sure to not use {area} as part of your route URL.</span></span>


## <a id="_TOC6"></a>  <span data-ttu-id="e0547-310">Isenção de responsabilidade</span><span class="sxs-lookup"><span data-stu-id="e0547-310">Disclaimer</span></span>

<span data-ttu-id="e0547-311">Este é um documento preliminar e pode ser alterado substancialmente antes da versão comercial final do software descrito aqui.</span><span class="sxs-lookup"><span data-stu-id="e0547-311">This is a preliminary document and may be changed substantially prior to final commercial release of the software described herein.</span></span>

<span data-ttu-id="e0547-312">As informações contidas neste documento representam a visão atual da Microsoft Corporation sobre os problemas discutidos a partir da data da publicação.</span><span class="sxs-lookup"><span data-stu-id="e0547-312">The information contained in this document represents the current view of Microsoft Corporation on the issues discussed as of the date of publication.</span></span> <span data-ttu-id="e0547-313">Como a Microsoft deve responder às condições do mercado em constante mudança, este documento não deve ser interpretado como um compromisso por parte da Microsoft, e a Microsoft não pode garantir a exatidão de nenhuma informação apresentada após a data da publicação.</span><span class="sxs-lookup"><span data-stu-id="e0547-313">Because Microsoft must respond to changing market conditions, it should not be interpreted to be a commitment on the part of Microsoft, and Microsoft cannot guarantee the accuracy of any information presented after the date of publication.</span></span>

<span data-ttu-id="e0547-314">Este whitepaper é apenas para fins informativos.</span><span class="sxs-lookup"><span data-stu-id="e0547-314">This White Paper is for informational purposes only.</span></span> <span data-ttu-id="e0547-315">A MICROSOFT NÃO OFERECE GARANTIA, EXPRESSA, IMPLÍCITA OU ESTATUTÁRIA, DAS INFORMAÇÕES CONTIDAS NESTE DOCUMENTO.</span><span class="sxs-lookup"><span data-stu-id="e0547-315">MICROSOFT MAKES NO WARRANTIES, EXPRESS, IMPLIED OR STATUTORY, AS TO THE INFORMATION IN THIS DOCUMENT.</span></span>

<span data-ttu-id="e0547-316">Estar em conformidade com todas as leis de direitos autorais aplicáveis é responsabilidade do usuário.</span><span class="sxs-lookup"><span data-stu-id="e0547-316">Complying with all applicable copyright laws is the responsibility of the user.</span></span> <span data-ttu-id="e0547-317">Sem limitar os direitos autorais, nenhuma parte deste documento pode ser reproduzida, armazenada ou inserida em um sistema de recuperação, ou transmitida de qualquer forma, por qualquer meio (eletrônico, mecânico, fotocópia, gravação ou outro) ou para qualquer fim, sem a permissão expressa, por escrito, da Microsoft Corporation.</span><span class="sxs-lookup"><span data-stu-id="e0547-317">Without limiting the rights under copyright, no part of this document may be reproduced, stored in or introduced into a retrieval system, or transmitted in any form or by any means (electronic, mechanical, photocopying, recording, or otherwise), or for any purpose, without the express written permission of Microsoft Corporation.</span></span>

<span data-ttu-id="e0547-318">A Microsoft pode ter patentes, solicitações de patente, marcas comerciais, direitos autorais ou outros direitos de propriedade intelectual que abrangem o conteúdo deste documento.</span><span class="sxs-lookup"><span data-stu-id="e0547-318">Microsoft may have patents, patent applications, trademarks, copyrights, or other intellectual property rights covering subject matter in this document.</span></span> <span data-ttu-id="e0547-319">A não ser que especificado expressamente em um contrato de licença da Microsoft, o fornecimento deste documento não confere a você nenhum direito sobre as supracitadas patentes, marcas comerciais, direitos autorais ou outra propriedade intelectual.</span><span class="sxs-lookup"><span data-stu-id="e0547-319">Except as expressly provided in any written license agreement from Microsoft, the furnishing of this document does not give you any license to these patents, trademarks, copyrights, or other intellectual property.</span></span>

<span data-ttu-id="e0547-320">A menos que indicado o contrário, os exemplos de empresas que as organizações, produtos, nomes de domínio, endereços de email, logotipos, pessoas, lugares e eventos aqui representados são fictícios e nenhuma associação com qualquer empresa, organização, produto, nome de domínio, email endereço, logotipo, pessoa, lugar ou evento é intencional ou deve ser inferido.</span><span class="sxs-lookup"><span data-stu-id="e0547-320">Unless otherwise noted, the example companies, organizations, products, domain names, email addresses, logos, people, places and events depicted herein are fictitious, and no association with any real company, organization, product, domain name, email address, logo, person, place or event is intended or should be inferred.</span></span>

<span data-ttu-id="e0547-321">© 2010 Microsoft Corporation.</span><span class="sxs-lookup"><span data-stu-id="e0547-321">© 2010 Microsoft Corporation.</span></span> <span data-ttu-id="e0547-322">Todos os direitos reservados.</span><span class="sxs-lookup"><span data-stu-id="e0547-322">All rights reserved.</span></span>

<span data-ttu-id="e0547-323">Microsoft e Windows são marcas registradas ou comerciais da Microsoft Corporation nos Estados Unidos e/ou em outros países.</span><span class="sxs-lookup"><span data-stu-id="e0547-323">Microsoft and Windows are either registered trademarks or trademarks of Microsoft Corporation in the United States and/or other countries.</span></span>

<span data-ttu-id="e0547-324">Os nomes de empresas reais e produtos mencionados aqui podem ser marcas comerciais de seus respectivos proprietários.</span><span class="sxs-lookup"><span data-stu-id="e0547-324">The names of actual companies and products mentioned herein may be the trademarks of their respective owners.</span></span>
