---
uid: single-page-application/overview/introduction/knockoutjs-template
title: 'Aplicativo de página única: Modelo KnockoutJS | Microsoft Docs'
author: MikeWasson
description: Modelo Knockout
ms.author: riande
ms.date: 01/30/2013
ms.assetid: f9c07af0-4b20-4b08-af8f-47fc3df169a2
msc.legacyurl: /single-page-application/overview/introduction/knockoutjs-template
msc.type: authoredcontent
ms.openlocfilehash: 60bc8bf95cace722244ffc87ff4c00126a0ed2a0
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57030393"
---
<a name="single-page-application-knockoutjs-template"></a><span data-ttu-id="859d4-103">Aplicativo de página única: Modelo KnockoutJS</span><span class="sxs-lookup"><span data-stu-id="859d4-103">Single Page Application: KnockoutJS template</span></span>
====================
<span data-ttu-id="859d4-104">por [Mike Wasson](https://github.com/MikeWasson)</span><span class="sxs-lookup"><span data-stu-id="859d4-104">by [Mike Wasson](https://github.com/MikeWasson)</span></span>

> <span data-ttu-id="859d4-105">O modelo MVC Knockout é parte do ASP.NET e Web Tools 2012.2</span><span class="sxs-lookup"><span data-stu-id="859d4-105">The Knockout MVC Template is part of ASP.NET and Web Tools 2012.2</span></span>
> 
> [<span data-ttu-id="859d4-106">Baixar o ASP.NET and Web Tools 2012.2</span><span class="sxs-lookup"><span data-stu-id="859d4-106">Download ASP.NET and Web Tools 2012.2</span></span>](https://go.microsoft.com/fwlink/?LinkId=282650)


<span data-ttu-id="859d4-107">A atualização do ASP.NET e Web Tools 2012.2 inclui um modelo de aplicativo de página única (SPA) para o ASP.NET MVC 4.</span><span class="sxs-lookup"><span data-stu-id="859d4-107">The ASP.NET and Web Tools 2012.2 update includes a Single-Page Application (SPA) template for ASP.NET MVC 4.</span></span> <span data-ttu-id="859d4-108">Esse modelo é projetado para ajudá-lo a começar a criar rapidamente aplicativos web interativos do lado do cliente.</span><span class="sxs-lookup"><span data-stu-id="859d4-108">This template is designed to get you started quickly building interactive client-side web apps.</span></span>

<span data-ttu-id="859d4-109">"Aplicativo de página única" (SPA) é o termo geral para um aplicativo web que carrega uma página HTML única e, em seguida, atualiza a página dinamicamente, em vez de carregar novas páginas.</span><span class="sxs-lookup"><span data-stu-id="859d4-109">"Single-page application" (SPA) is the general term for a web application that loads a single HTML page and then updates the page dynamically, instead of loading new pages.</span></span> <span data-ttu-id="859d4-110">Após o carregamento de página inicial, o SPA se comunica com o servidor por meio de solicitações AJAX.</span><span class="sxs-lookup"><span data-stu-id="859d4-110">After the initial page load, the SPA talks with the server through AJAX requests.</span></span>

![](knockoutjs-template/_static/image1.png)

<span data-ttu-id="859d4-111">AJAX não é novidade, mas hoje em dia há estruturas de JavaScript que facilitam criar e manter um grande aplicativo SPA sofisticado.</span><span class="sxs-lookup"><span data-stu-id="859d4-111">AJAX is nothing new, but today there are JavaScript frameworks that make it easier to build and maintain a large sophisticated SPA application.</span></span> <span data-ttu-id="859d4-112">Além disso, HTML 5 e CSS3 são tornando mais fácil criar interfaces do usuário avançadas.</span><span class="sxs-lookup"><span data-stu-id="859d4-112">Also, HTML 5 and CSS3 are making it easier to create rich UIs.</span></span>

<span data-ttu-id="859d4-113">Para começar, o modelo SPA cria um aplicativo de exemplo "Lista de tarefas pendentes".</span><span class="sxs-lookup"><span data-stu-id="859d4-113">To get you started, the SPA template creates a sample "To-do list" application.</span></span> <span data-ttu-id="859d4-114">Neste tutorial, vamos dar um tour guiado do modelo.</span><span class="sxs-lookup"><span data-stu-id="859d4-114">In this tutorial, we'll take a guided tour of the template.</span></span> <span data-ttu-id="859d4-115">Primeiro, vamos vai examinar o aplicativo de lista de tarefas pendentes e examinar as partes de tecnologia que fazê-lo funcionar.</span><span class="sxs-lookup"><span data-stu-id="859d4-115">First we'll look at the To-do list application itself, then examine the technology pieces that make it work.</span></span>

## <a name="create-a-new-spa-template-project"></a><span data-ttu-id="859d4-116">Criar um novo projeto de modelo do SPA</span><span class="sxs-lookup"><span data-stu-id="859d4-116">Create a New SPA Template Project</span></span>

<span data-ttu-id="859d4-117">Requisitos:</span><span class="sxs-lookup"><span data-stu-id="859d4-117">Requirements:</span></span>

- <span data-ttu-id="859d4-118">Visual Studio 2012 ou Visual Studio Express 2012 para Web</span><span class="sxs-lookup"><span data-stu-id="859d4-118">Visual Studio 2012 or Visual Studio Express 2012 for Web</span></span>
- <span data-ttu-id="859d4-119">ASP.NET Web Tools 2012.2 atualizam.</span><span class="sxs-lookup"><span data-stu-id="859d4-119">ASP.NET Web Tools 2012.2 update.</span></span> <span data-ttu-id="859d4-120">Você pode instalar a atualização [aqui](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span><span class="sxs-lookup"><span data-stu-id="859d4-120">You can install the update [here](https://www.microsoft.com/web/handlers/webpi.ashx?command=getinstallerredirect&appid=ASPDOTNETandWebTools2012_2).</span></span>

<span data-ttu-id="859d4-121">Inicie o Visual Studio e selecione **novo projeto** na página inicial.</span><span class="sxs-lookup"><span data-stu-id="859d4-121">Start Visual Studio and select **New Project** from the Start page.</span></span> <span data-ttu-id="859d4-122">Ou, no menu **Arquivo**, selecione **Novo** e, em seguida, **Projeto**.</span><span class="sxs-lookup"><span data-stu-id="859d4-122">Or, from the **File** menu, select **New** and then **Project**.</span></span>

<span data-ttu-id="859d4-123">No painel **Modelos**, selecione **Modelos Instalados** e expanda o nó **Visual C#**.</span><span class="sxs-lookup"><span data-stu-id="859d4-123">In the **Templates** pane, select **Installed Templates** and expand the **Visual C#** node.</span></span> <span data-ttu-id="859d4-124">Em **Visual C#**, selecione **Web**.</span><span class="sxs-lookup"><span data-stu-id="859d4-124">Under **Visual C#**, select **Web**.</span></span> <span data-ttu-id="859d4-125">Na lista de modelos de projeto, selecione **aplicativo Web do ASP.NET MVC 4**.</span><span class="sxs-lookup"><span data-stu-id="859d4-125">In the list of project templates, select **ASP.NET MVC 4 Web Application**.</span></span> <span data-ttu-id="859d4-126">Nomeie o projeto e clique em **Okey**.</span><span class="sxs-lookup"><span data-stu-id="859d4-126">Name the project and click **OK**.</span></span>

![](knockoutjs-template/_static/image2.png)

<span data-ttu-id="859d4-127">No **novo projeto** assistente, selecione **aplicativo de página única**.</span><span class="sxs-lookup"><span data-stu-id="859d4-127">In the **New Project** wizard, select **Single Page Application**.</span></span>

![](knockoutjs-template/_static/image3.png)

<span data-ttu-id="859d4-128">Pressione F5 para compilar e executar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="859d4-128">Press F5 to build and run the application.</span></span> <span data-ttu-id="859d4-129">Quando o aplicativo é executado pela primeira vez, ele exibe uma tela de logon.</span><span class="sxs-lookup"><span data-stu-id="859d4-129">When the application first runs, it displays a login screen.</span></span>

![](knockoutjs-template/_static/image4.png)

<span data-ttu-id="859d4-130">Clique o &quot;Inscreva-se&quot; vincular e criar um novo usuário.</span><span class="sxs-lookup"><span data-stu-id="859d4-130">Click the &quot;Sign up&quot; link and create a new user.</span></span>

![](knockoutjs-template/_static/image5.png)

<span data-ttu-id="859d4-131">Depois de fazer logon, o aplicativo cria uma lista de tarefas padrão com dois itens.</span><span class="sxs-lookup"><span data-stu-id="859d4-131">After you log in, the application creates a default Todo list with two items.</span></span> <span data-ttu-id="859d4-132">Você pode clicar em "Adicionar a lista de tarefas" para adicionar uma nova lista.</span><span class="sxs-lookup"><span data-stu-id="859d4-132">You can click "Add Todo list" to add a new list.</span></span>

![](knockoutjs-template/_static/image6.png)

<span data-ttu-id="859d4-133">A lista de renomear, adicionar itens à lista e desmarcá-las.</span><span class="sxs-lookup"><span data-stu-id="859d4-133">Rename the list, add items to the list, and check them off.</span></span> <span data-ttu-id="859d4-134">Você também pode excluir itens ou excluir uma lista inteira.</span><span class="sxs-lookup"><span data-stu-id="859d4-134">You can also delete items or delete an entire list.</span></span> <span data-ttu-id="859d4-135">As alterações são persistidas automaticamente para um banco de dados no servidor (na verdade, LocalDB neste ponto, pois você está executando o aplicativo localmente).</span><span class="sxs-lookup"><span data-stu-id="859d4-135">The changes are automatically persisted to a database on the server (actually LocalDB at this point, because you are running the application locally).</span></span>

![](knockoutjs-template/_static/image7.png)

## <a name="architecture-of-the-spa-template"></a><span data-ttu-id="859d4-136">Arquitetura do modelo de SPA</span><span class="sxs-lookup"><span data-stu-id="859d4-136">Architecture of the SPA Template</span></span>

<span data-ttu-id="859d4-137">Este diagrama mostra os principais blocos de construção para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="859d4-137">This diagram shows the main building blocks for the application.</span></span>

![](knockoutjs-template/_static/image8.png)

<span data-ttu-id="859d4-138">No lado do servidor, o ASP.NET MVC serve o HTML e também lida com autenticação baseada em formulários.</span><span class="sxs-lookup"><span data-stu-id="859d4-138">On the server side, ASP.NET MVC serves the HTML and also handles forms-based authentication.</span></span>

<span data-ttu-id="859d4-139">API Web ASP.NET manipula todas as solicitações relacionam aos ToDoLists e ToDoItems, incluindo a introdução, criar, atualizar e excluir.</span><span class="sxs-lookup"><span data-stu-id="859d4-139">ASP.NET Web API handles all requests that relate to the ToDoLists and ToDoItems, including getting, creating, updating and deleting.</span></span> <span data-ttu-id="859d4-140">O cliente troca dados com a API Web no formato JSON.</span><span class="sxs-lookup"><span data-stu-id="859d4-140">The client exchanges data with Web API in JSON format.</span></span>

<span data-ttu-id="859d4-141">Entity Framework (EF) é a camada do / RM.</span><span class="sxs-lookup"><span data-stu-id="859d4-141">Entity Framework (EF) is the O/RM layer.</span></span> <span data-ttu-id="859d4-142">Ele atua como mediador entre o mundo orientado a objeto do ASP.NET e banco de dados subjacente.</span><span class="sxs-lookup"><span data-stu-id="859d4-142">It mediates between the object-oriented world of ASP.NET and the underlying database.</span></span> <span data-ttu-id="859d4-143">O banco de dados usa o LocalDB, mas você pode alterar isso no arquivo Web. config.</span><span class="sxs-lookup"><span data-stu-id="859d4-143">The database uses LocalDB but you can change this in the Web.config file.</span></span> <span data-ttu-id="859d4-144">Normalmente você usaria LocalDB para o desenvolvimento local e, em seguida, implantar um banco de dados SQL no servidor, usando a migração do EF código primeiro.</span><span class="sxs-lookup"><span data-stu-id="859d4-144">Typically you would use LocalDB for local development and then deploy to a SQL database on the server, using EF code-first migration.</span></span>

<span data-ttu-id="859d4-145">No lado do cliente, a biblioteca Knockout. js manipula atualizações de página de solicitações AJAX.</span><span class="sxs-lookup"><span data-stu-id="859d4-145">On the client side, the Knockout.js library handles page updates from AJAX requests.</span></span> <span data-ttu-id="859d4-146">O Knockout usa associação de dados para sincronizar a página com os dados mais recentes.</span><span class="sxs-lookup"><span data-stu-id="859d4-146">Knockout uses data binding to synchronize the page with the latest data.</span></span> <span data-ttu-id="859d4-147">Dessa forma, você não precisa escrever nenhum código que percorre os dados JSON e atualiza o DOM.</span><span class="sxs-lookup"><span data-stu-id="859d4-147">That way, you don't have to write any of the code that walks through the JSON data and updates the DOM.</span></span> <span data-ttu-id="859d4-148">Em vez disso, você deve colocar atributos declarativos em HTML que dizer a Knockout como apresentar os dados.</span><span class="sxs-lookup"><span data-stu-id="859d4-148">Instead, you put declarative attributes in the HTML that tell Knockout how to present the data.</span></span>

<span data-ttu-id="859d4-149">Uma grande vantagem dessa arquitetura é que ele separa a camada de apresentação da lógica do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="859d4-149">A big advantage of this architecture is that it separates the presentation layer from the application logic.</span></span> <span data-ttu-id="859d4-150">Você pode criar a parte da API da Web sem saber nada sobre qual será a aparência de sua página da web.</span><span class="sxs-lookup"><span data-stu-id="859d4-150">You can create the Web API portion without knowing anything about how your web page will look.</span></span> <span data-ttu-id="859d4-151">No lado do cliente, você cria um "modelo de exibição" para representar esses dados e o modelo de exibição usa o Knockout para vincular ao HTML.</span><span class="sxs-lookup"><span data-stu-id="859d4-151">On the client side, you create a "view model" to represent that data, and the view model uses Knockout to bind to the HTML.</span></span> <span data-ttu-id="859d4-152">Que lhe permite alterar facilmente o HTML sem alterar o modelo de exibição.</span><span class="sxs-lookup"><span data-stu-id="859d4-152">That lets you easily change the HTML without changing the view model.</span></span> <span data-ttu-id="859d4-153">(Vamos examinar o Knockout um pouco mais tarde.)</span><span class="sxs-lookup"><span data-stu-id="859d4-153">(We'll look at Knockout a bit later.)</span></span>

## <a name="models"></a><span data-ttu-id="859d4-154">Modelos</span><span class="sxs-lookup"><span data-stu-id="859d4-154">Models</span></span>

<span data-ttu-id="859d4-155">No projeto do Visual Studio, na pasta Modelos contém os modelos que são usados no lado do servidor.</span><span class="sxs-lookup"><span data-stu-id="859d4-155">In the Visual Studio project, the Models folder contains the models that are used on the server side.</span></span> <span data-ttu-id="859d4-156">(Também há modelos no lado do cliente, falaremos sobre aqueles.)</span><span class="sxs-lookup"><span data-stu-id="859d4-156">(There are also models on the client side; we'll get to those.)</span></span>

![](knockoutjs-template/_static/image9.png)

<span data-ttu-id="859d4-157">**TodoItem, TodoList**</span><span class="sxs-lookup"><span data-stu-id="859d4-157">**TodoItem, TodoList**</span></span>

<span data-ttu-id="859d4-158">Esses são os modelos de banco de dados para o Entity Framework Code First.</span><span class="sxs-lookup"><span data-stu-id="859d4-158">These are the database models for Entity Framework Code First.</span></span> <span data-ttu-id="859d4-159">Observe que esses modelos têm propriedades que apontam para si.</span><span class="sxs-lookup"><span data-stu-id="859d4-159">Notice that these models have properties that point to each other.</span></span> <span data-ttu-id="859d4-160">`ToDoList` contém uma coleção de ToDoItems e cada `ToDoItem` tem uma referência à sua lista de tarefas pai.</span><span class="sxs-lookup"><span data-stu-id="859d4-160">`ToDoList` contains a collection of ToDoItems, and each `ToDoItem` has a reference back to its parent ToDoList.</span></span> <span data-ttu-id="859d4-161">Essas propriedades são chamadas de propriedades de navegação e eles representam a relação um-para-muitos, uma lista de tarefas e seus itens de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="859d4-161">These properties are called navigation properties, and they represent the one-to-many relation a to-do list and its to-do items.</span></span>

<span data-ttu-id="859d4-162">O `ToDoItem` classe também usa o **[ForeignKey]** atributo para especificar que `ToDoListId` é uma chave estrangeira para a `ToDoList` tabela.</span><span class="sxs-lookup"><span data-stu-id="859d4-162">The `ToDoItem` class also uses the **[ForeignKey]** attribute to specify that `ToDoListId` is a foreign key into the `ToDoList` table.</span></span> <span data-ttu-id="859d4-163">Isso informa ao EF para adicionar uma restrição de chave estrangeira no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="859d4-163">This tells EF to add a foreign-key constraint to the database.</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample1.cs)]

<span data-ttu-id="859d4-164">**TodoItemDto, TodoListDto**</span><span class="sxs-lookup"><span data-stu-id="859d4-164">**TodoItemDto, TodoListDto**</span></span>

<span data-ttu-id="859d4-165">Essas classes definem os dados que serão enviados ao cliente.</span><span class="sxs-lookup"><span data-stu-id="859d4-165">These classes define the data that will be sent to the client.</span></span> <span data-ttu-id="859d4-166">"DTO" significa "objeto de transferência de dados".</span><span class="sxs-lookup"><span data-stu-id="859d4-166">"DTO" stands for "data transfer object."</span></span> <span data-ttu-id="859d4-167">O DTO define como as entidades serão serializadas em JSON.</span><span class="sxs-lookup"><span data-stu-id="859d4-167">The DTO defines how the entities will be serialized into JSON.</span></span> <span data-ttu-id="859d4-168">Em geral, há várias razões para usar DTOs:</span><span class="sxs-lookup"><span data-stu-id="859d4-168">In general, there are several reasons to use DTOs:</span></span>

- <span data-ttu-id="859d4-169">Para controlar quais propriedades são serializadas.</span><span class="sxs-lookup"><span data-stu-id="859d4-169">To control which properties are serialized.</span></span> <span data-ttu-id="859d4-170">O DTO pode conter um subconjunto das propriedades do modelo de domínio.</span><span class="sxs-lookup"><span data-stu-id="859d4-170">The DTO can contain a subset of the properties from the domain model.</span></span> <span data-ttu-id="859d4-171">Você pode fazer isso por motivos de segurança (ocultar dados confidenciais) ou simplesmente para reduzir a quantidade de dados que você envia.</span><span class="sxs-lookup"><span data-stu-id="859d4-171">You might do this for security reasons (to hide sensitive data) or simply to reduce the amount of data that you send.</span></span>
- <span data-ttu-id="859d4-172">Para alterar a forma dos dados; por exemplo, para mesclar uma estrutura de dados mais complexa.</span><span class="sxs-lookup"><span data-stu-id="859d4-172">To change the shape of the data – e.g. to flatten a more complex data structure.</span></span>
- <span data-ttu-id="859d4-173">Para manter qualquer lógica de negócios fora do DTO (separação de preocupações).</span><span class="sxs-lookup"><span data-stu-id="859d4-173">To keep any business logic out of the DTO (separation of concerns).</span></span>
- <span data-ttu-id="859d4-174">Se seus modelos de domínio não podem ser serializados por algum motivo.</span><span class="sxs-lookup"><span data-stu-id="859d4-174">If your domain models cannot be serialized for some reason.</span></span> <span data-ttu-id="859d4-175">Por exemplo, referências circulares podem causar problemas quando você serializa um objeto existem maneiras de lidar com esse problema na API Web (consulte [tratamento referências circulares do objeto](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); mas simplesmente usar um DTO evita o problema completamente.</span><span class="sxs-lookup"><span data-stu-id="859d4-175">For example, circular references can cause problems when you serialize an object There are ways to handle this problem in Web API (see [Handling Circular Object References](../../../web-api/overview/formats-and-model-binding/json-and-xml-serialization.md#handling_circular_object_references)); but using a DTO simply avoids the problem altogether.</span></span>

<span data-ttu-id="859d4-176">No modelo do SPA, os DTOs contém os mesmos dados que os modelos de domínio.</span><span class="sxs-lookup"><span data-stu-id="859d4-176">In the SPA template, the DTOs contains the same data as the domain models.</span></span> <span data-ttu-id="859d4-177">No entanto, eles ainda são úteis porque eles evitam referências circulares das propriedades de navegação, e eles demonstram o padrão geral de DTO.</span><span class="sxs-lookup"><span data-stu-id="859d4-177">However, they are still useful because they avoid circular references from the navigation properties, and they demonstrate the general DTO pattern.</span></span>

<span data-ttu-id="859d4-178">**AccountModels.cs**</span><span class="sxs-lookup"><span data-stu-id="859d4-178">**AccountModels.cs**</span></span>

<span data-ttu-id="859d4-179">Esse arquivo contém modelos para a associação do site.</span><span class="sxs-lookup"><span data-stu-id="859d4-179">This file contains models for site membership.</span></span> <span data-ttu-id="859d4-180">O `UserProfile` classe define o esquema para perfis de usuário na associação de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="859d4-180">The `UserProfile` class defines the schema for user profiles in the membership DB.</span></span> <span data-ttu-id="859d4-181">(Nesse caso, a única informação que é o nome de usuário e a ID de usuário.) As outras classes de modelo nesse arquivo são usadas para criar formulários de registro e login de usuário.</span><span class="sxs-lookup"><span data-stu-id="859d4-181">(In this case, the only information is the user ID and the user name.) The other model classes in this file are used to create the user registration and login forms.</span></span>

## <a name="entity-framework"></a><span data-ttu-id="859d4-182">Entity Framework</span><span class="sxs-lookup"><span data-stu-id="859d4-182">Entity Framework</span></span>

<span data-ttu-id="859d4-183">O modelo do SPA usa o EF Code First.</span><span class="sxs-lookup"><span data-stu-id="859d4-183">The SPA template uses EF Code First.</span></span> <span data-ttu-id="859d4-184">No desenvolvimento Code First, você define os modelos pela primeira vez no código e, em seguida, o EF usa o modelo para criar o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="859d4-184">In Code First development, you define the models first in code, and then EF uses the model to create the database.</span></span> <span data-ttu-id="859d4-185">Você também pode usar o EF com um banco de dados ([Database First](https://msdn.microsoft.com/data/jj206878.aspx)).</span><span class="sxs-lookup"><span data-stu-id="859d4-185">You can also use EF with an existing database ([Database First](https://msdn.microsoft.com/data/jj206878.aspx)).</span></span>

<span data-ttu-id="859d4-186">O `TodoItemContext` deriva de classe na pasta Models **DbContext**.</span><span class="sxs-lookup"><span data-stu-id="859d4-186">The `TodoItemContext` class in the Models folder derives from **DbContext**.</span></span> <span data-ttu-id="859d4-187">Essa classe fornece a "cola" entre os modelos e o EF.</span><span class="sxs-lookup"><span data-stu-id="859d4-187">This class provides the "glue" between the models and EF.</span></span> <span data-ttu-id="859d4-188">O `TodoItemContext` mantém uma `ToDoItem` coleção e um `TodoList` coleção.</span><span class="sxs-lookup"><span data-stu-id="859d4-188">The `TodoItemContext` holds a `ToDoItem` collection and a `TodoList` collection.</span></span> <span data-ttu-id="859d4-189">Para consultar o banco de dados, você simplesmente escrever uma consulta LINQ em relação a essas coleções.</span><span class="sxs-lookup"><span data-stu-id="859d4-189">To query the database, you simply write a LINQ query against these collections.</span></span> <span data-ttu-id="859d4-190">Por exemplo, aqui está como você pode selecionar todas as listas de tarefas pendentes para o usuário "Alice":</span><span class="sxs-lookup"><span data-stu-id="859d4-190">For example, here is how you can select all of the to-do lists for user "Alice":</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample2.cs)]

<span data-ttu-id="859d4-191">Você também pode adicionar novos itens à coleção, atualizar itens, ou excluir itens da coleção e manter as alterações no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="859d4-191">You can also add new items to the collection, update items, or delete items from the collection, and persist the changes to the database.</span></span>

## <a name="aspnet-web-api-controllers"></a><span data-ttu-id="859d4-192">Controladores de API Web ASP.NET</span><span class="sxs-lookup"><span data-stu-id="859d4-192">ASP.NET Web API Controllers</span></span>

<span data-ttu-id="859d4-193">Na API Web ASP.NET, os controladores são objetos que manipulam solicitações HTTP.</span><span class="sxs-lookup"><span data-stu-id="859d4-193">In ASP.NET Web API, controllers are objects that handle HTTP requests.</span></span> <span data-ttu-id="859d4-194">Conforme mencionado, o modelo do SPA usa a API da Web para habilitar operações CRUD em `ToDoList` e `ToDoItem` instâncias.</span><span class="sxs-lookup"><span data-stu-id="859d4-194">As mentioned, the SPA template uses Web API to enable CRUD operations on `ToDoList` and `ToDoItem` instances.</span></span> <span data-ttu-id="859d4-195">Os controladores estão localizados na pasta controladores da solução.</span><span class="sxs-lookup"><span data-stu-id="859d4-195">The controllers are located in the Controllers folder of the solution.</span></span>

![](knockoutjs-template/_static/image10.png)

- <span data-ttu-id="859d4-196">`TodoController`: Manipula as solicitações HTTP para itens de tarefas pendentes</span><span class="sxs-lookup"><span data-stu-id="859d4-196">`TodoController`: Handles HTTP requests for to-do items</span></span>
- <span data-ttu-id="859d4-197">`TodoListController`: Manipula as solicitações HTTP para listas de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="859d4-197">`TodoListController`: Handles HTTP requests for to-do lists.</span></span>

<span data-ttu-id="859d4-198">Esses nomes são significativos, como API Web corresponde o caminho URI para o nome do controlador.</span><span class="sxs-lookup"><span data-stu-id="859d4-198">These names are significant, because Web API matches the URI path to the controller name.</span></span> <span data-ttu-id="859d4-199">(Para saber como o API Web encaminha solicitações HTTP para controladores, consulte [roteamento na API Web ASP.NET](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span><span class="sxs-lookup"><span data-stu-id="859d4-199">(To learn how Web API routes HTTP requests to controllers, see [Routing in ASP.NET Web API](../../../web-api/overview/web-api-routing-and-actions/routing-in-aspnet-web-api.md).)</span></span>

<span data-ttu-id="859d4-200">Vamos examinar o `ToDoListController` classe.</span><span class="sxs-lookup"><span data-stu-id="859d4-200">Let's look at the `ToDoListController` class.</span></span> <span data-ttu-id="859d4-201">Ele contém um membro de dados único:</span><span class="sxs-lookup"><span data-stu-id="859d4-201">It contains a single data member:</span></span>

[!code-csharp[Main](knockoutjs-template/samples/sample3.cs)]

<span data-ttu-id="859d4-202">O `TodoItemContext` é usado para se comunicar com o EF, conforme descrito anteriormente.</span><span class="sxs-lookup"><span data-stu-id="859d4-202">The `TodoItemContext` is used to communicate with EF, as described earlier.</span></span> <span data-ttu-id="859d4-203">Os métodos no controlador de implementam as operações CRUD.</span><span class="sxs-lookup"><span data-stu-id="859d4-203">The methods on the controller implement the CRUD operations.</span></span> <span data-ttu-id="859d4-204">API Web mapeia solicitações HTTP do cliente para os métodos do controlador, da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="859d4-204">Web API maps HTTP requests from the client to controller methods, as follows:</span></span>

| <span data-ttu-id="859d4-205">Solicitação HTTP</span><span class="sxs-lookup"><span data-stu-id="859d4-205">HTTP Request</span></span> | <span data-ttu-id="859d4-206">Método do controlador</span><span class="sxs-lookup"><span data-stu-id="859d4-206">Controller Method</span></span> | <span data-ttu-id="859d4-207">Descrição</span><span class="sxs-lookup"><span data-stu-id="859d4-207">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="859d4-208">GET /api/todo</span><span class="sxs-lookup"><span data-stu-id="859d4-208">GET /api/todo</span></span> | `GetTodoLists` | <span data-ttu-id="859d4-209">Obtém uma coleção de listas de tarefas.</span><span class="sxs-lookup"><span data-stu-id="859d4-209">Gets a collection of to-do lists.</span></span> |
| <span data-ttu-id="859d4-210">GET/API/todo/*id*</span><span class="sxs-lookup"><span data-stu-id="859d4-210">GET /api/todo/*id*</span></span> | `GetTodoList` | <span data-ttu-id="859d4-211">Obtém uma lista de tarefas por ID</span><span class="sxs-lookup"><span data-stu-id="859d4-211">Gets a to-do list by ID</span></span> |
| <span data-ttu-id="859d4-212">PUT/API/todo/*id*</span><span class="sxs-lookup"><span data-stu-id="859d4-212">PUT /api/todo/*id*</span></span> | `PutTodoList` | <span data-ttu-id="859d4-213">Atualiza uma lista de tarefas.</span><span class="sxs-lookup"><span data-stu-id="859d4-213">Updates a to-do list.</span></span> |
| <span data-ttu-id="859d4-214">POST /api/todo</span><span class="sxs-lookup"><span data-stu-id="859d4-214">POST /api/todo</span></span> | `PostTodoList` | <span data-ttu-id="859d4-215">Cria uma nova lista de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="859d4-215">Creates a new to-do list.</span></span> |
| <span data-ttu-id="859d4-216">DELETE /api/todo/*id*</span><span class="sxs-lookup"><span data-stu-id="859d4-216">DELETE /api/todo/*id*</span></span> | `DeleteTodoList` | <span data-ttu-id="859d4-217">Exclui uma lista de tarefas Pendentes.</span><span class="sxs-lookup"><span data-stu-id="859d4-217">Deletes a TODO list.</span></span> |

<span data-ttu-id="859d4-218">Observe que os URIs para algumas operações contêm espaços reservados para o valor da ID.</span><span class="sxs-lookup"><span data-stu-id="859d4-218">Notice that the URIs for some operations contain placeholders for the ID value.</span></span> <span data-ttu-id="859d4-219">Por exemplo, para excluir uma a lista com uma ID de 42, o URI é `/api/todo/42`.</span><span class="sxs-lookup"><span data-stu-id="859d4-219">For example, to delete a to-list with an ID of 42, the URI is `/api/todo/42`.</span></span>

<span data-ttu-id="859d4-220">Para saber mais sobre como usar a API da Web para operações CRUD, consulte [criando uma API da Web que dá suporte a operações de CRUD](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span><span class="sxs-lookup"><span data-stu-id="859d4-220">To learn more about using Web API for CRUD operations, see [Creating a Web API that Supports CRUD Operations](../../../web-api/overview/older-versions/creating-a-web-api-that-supports-crud-operations.md).</span></span> <span data-ttu-id="859d4-221">O código para esse controlador é bem simples.</span><span class="sxs-lookup"><span data-stu-id="859d4-221">The code for this controller is fairly straightforward.</span></span> <span data-ttu-id="859d4-222">Aqui estão alguns pontos interessantes:</span><span class="sxs-lookup"><span data-stu-id="859d4-222">Here are some interesting points:</span></span>

- <span data-ttu-id="859d4-223">O `GetTodoLists` método usa uma consulta LINQ para filtrar os resultados pela ID do usuário conectado.</span><span class="sxs-lookup"><span data-stu-id="859d4-223">The `GetTodoLists` method uses a LINQ query to filter the results by the ID of the logged-in user.</span></span> <span data-ttu-id="859d4-224">Dessa forma, um usuário só vê os dados que pertencem a ele.</span><span class="sxs-lookup"><span data-stu-id="859d4-224">That way, a user only sees the data that belongs to him or her.</span></span> <span data-ttu-id="859d4-225">Além disso, observe que uma instrução Select é usada para converter o `ToDoList` instâncias em `TodoListDto` instâncias.</span><span class="sxs-lookup"><span data-stu-id="859d4-225">Also, notice that a Select statement is used to convert the `ToDoList` instances into `TodoListDto` instances.</span></span>
- <span data-ttu-id="859d4-226">Os métodos PUT e POST verificam o estado de modelo antes de modificar o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="859d4-226">The PUT and POST methods check the model state before modifying the database.</span></span> <span data-ttu-id="859d4-227">Se **ModelState** for false, esses métodos retornam HTTP 400, solicitação incorreta.</span><span class="sxs-lookup"><span data-stu-id="859d4-227">If **ModelState.IsValid** is false, these methods return HTTP 400, Bad Request.</span></span> <span data-ttu-id="859d4-228">Leia mais sobre a validação do modelo na API Web no [validação de modelo](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="859d4-228">Read more about model validation in Web API at [Model Validation](../../../web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api.md).</span></span>
- <span data-ttu-id="859d4-229">A classe do controlador também é decorada com o **[autorizar]** atributo.</span><span class="sxs-lookup"><span data-stu-id="859d4-229">The controller class is also decorated with the **[Authorize]** attribute.</span></span> <span data-ttu-id="859d4-230">Esse atributo verifica se a solicitação HTTP é autenticada.</span><span class="sxs-lookup"><span data-stu-id="859d4-230">This attribute checks whether the HTTP request is authenticated.</span></span> <span data-ttu-id="859d4-231">Se a solicitação não for autenticada, o cliente recebe HTTP 401 não autorizado.</span><span class="sxs-lookup"><span data-stu-id="859d4-231">If the request is not authenticated, the client receives HTTP 401, Unauthorized.</span></span> <span data-ttu-id="859d4-232">Leia mais sobre a autenticação no [autenticação e autorização na API Web ASP.NET](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span><span class="sxs-lookup"><span data-stu-id="859d4-232">Read more about authentication at [Authentication and Authorization in ASP.NET Web API](../../../web-api/overview/security/authentication-and-authorization-in-aspnet-web-api.md).</span></span>

<span data-ttu-id="859d4-233">O `TodoController` classe é muito semelhante ao `TodoListController`.</span><span class="sxs-lookup"><span data-stu-id="859d4-233">The `TodoController` class is very similar to `TodoListController`.</span></span> <span data-ttu-id="859d4-234">A maior diferença é que ele não define quaisquer métodos GET, porque o cliente obtenha os itens de tarefas pendentes, juntamente com cada lista de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="859d4-234">The biggest difference is that it does not define any GET methods, because the client will get the to-do items along with each to-do list.</span></span>

## <a name="mvc-controllers-and-views"></a><span data-ttu-id="859d4-235">Exibições e controladores MVC</span><span class="sxs-lookup"><span data-stu-id="859d4-235">MVC Controllers and Views</span></span>

<span data-ttu-id="859d4-236">Os controladores do MVC também estão localizados na pasta controladores da solução.</span><span class="sxs-lookup"><span data-stu-id="859d4-236">The MVC controllers are also located in the Controllers folder of the solution.</span></span> <span data-ttu-id="859d4-237">`HomeController` renderiza o HTML principal para o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="859d4-237">`HomeController` renders the main HTML for the application.</span></span> <span data-ttu-id="859d4-238">O modo de exibição para o controlador inicial é definido em Views/Home/Index.cshtml.</span><span class="sxs-lookup"><span data-stu-id="859d4-238">The view for the Home controller is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="859d4-239">O modo de exibição de Home renderiza conteúdo diferente dependendo se o usuário estiver conectado:</span><span class="sxs-lookup"><span data-stu-id="859d4-239">The Home view renders different content depending on whether the user is logged in:</span></span>

[!code-cshtml[Main](knockoutjs-template/samples/sample4.cshtml)]

<span data-ttu-id="859d4-240">Quando os usuários estiverem conectados, eles veem a principal interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="859d4-240">When users are logged in, they see the main UI.</span></span> <span data-ttu-id="859d4-241">Caso contrário, eles veem o painel de logon.</span><span class="sxs-lookup"><span data-stu-id="859d4-241">Otherwise, they see the login panel.</span></span> <span data-ttu-id="859d4-242">Observe que essa renderização condicional ocorre no lado do servidor.</span><span class="sxs-lookup"><span data-stu-id="859d4-242">Note that this conditional rendering happens on the server side.</span></span> <span data-ttu-id="859d4-243">Nunca tentar ocultar conteúdo confidencial no lado do cliente&#8212;tudo o que você enviar em uma resposta HTTP é visível para alguém que está observando as mensagens HTTP brutas.</span><span class="sxs-lookup"><span data-stu-id="859d4-243">Never try to hide sensitive content on the client side&#8212;anything that you send in an HTTP response is visible to someone who is watching the raw HTTP messages.</span></span>

## <a name="client-side-javascript-and-knockoutjs"></a><span data-ttu-id="859d4-244">Knockout. js e JavaScript do lado do cliente</span><span class="sxs-lookup"><span data-stu-id="859d4-244">Client-Side JavaScript and Knockout.js</span></span>

<span data-ttu-id="859d4-245">Agora vamos voltar do lado do servidor do aplicativo para o cliente.</span><span class="sxs-lookup"><span data-stu-id="859d4-245">Now let's turn from the server side of the application to the client.</span></span> <span data-ttu-id="859d4-246">O modelo do SPA usa uma combinação de jQuery e o Knockout. js para criar uma interface de usuário interativa suave.</span><span class="sxs-lookup"><span data-stu-id="859d4-246">The SPA template uses a combination of jQuery and Knockout.js to create a smooth, interactive UI.</span></span> <span data-ttu-id="859d4-247">Knockout. js é uma biblioteca de JavaScript que torna mais fácil associar dados HTML.</span><span class="sxs-lookup"><span data-stu-id="859d4-247">Knockout.js is a JavaScript library that makes it easy to bind HTML to data.</span></span> <span data-ttu-id="859d4-248">Knockout. js usa um padrão chamado "Model-View-ViewModel."</span><span class="sxs-lookup"><span data-stu-id="859d4-248">Knockout.js uses a pattern called "Model-View-ViewModel."</span></span>

- <span data-ttu-id="859d4-249">O modelo é que os dados do domínio (listas de tarefas pendentes e itens de tarefas).</span><span class="sxs-lookup"><span data-stu-id="859d4-249">The model is the domain data (ToDo lists and ToDo items).</span></span>
- <span data-ttu-id="859d4-250">O modo de exibição é o documento HTML.</span><span class="sxs-lookup"><span data-stu-id="859d4-250">The view is the HTML document.</span></span>
- <span data-ttu-id="859d4-251">O modelo de exibição é um objeto JavaScript que contém os dados de modelo.</span><span class="sxs-lookup"><span data-stu-id="859d4-251">The view-model is a JavaScript object that holds the model data.</span></span> <span data-ttu-id="859d4-252">O modelo de exibição é uma abstração de código da interface do usuário.</span><span class="sxs-lookup"><span data-stu-id="859d4-252">The view-model is a code abstraction of the UI.</span></span> <span data-ttu-id="859d4-253">Ele não tem conhecimento da representação HTML.</span><span class="sxs-lookup"><span data-stu-id="859d4-253">It has no knowledge of the HTML representation.</span></span> <span data-ttu-id="859d4-254">Em vez disso, ele representa recursos abstratos da exibição, como "uma lista de itens de tarefas pendentes".</span><span class="sxs-lookup"><span data-stu-id="859d4-254">Instead, it represents abstract features of the view, such as "a list of ToDo items".</span></span>

<span data-ttu-id="859d4-255">O modo de exibição associado a dados para o modelo de exibição.</span><span class="sxs-lookup"><span data-stu-id="859d4-255">The view is data-bound to the view-model.</span></span> <span data-ttu-id="859d4-256">Atualizações para o modelo de exibição são refletidas automaticamente no modo de exibição.</span><span class="sxs-lookup"><span data-stu-id="859d4-256">Updates to the view-model are automatically reflected in the view.</span></span> <span data-ttu-id="859d4-257">Ligações funcionam outra direção.</span><span class="sxs-lookup"><span data-stu-id="859d4-257">Bindings work the other direction as well.</span></span> <span data-ttu-id="859d4-258">Eventos no DOM (por exemplo, como cliques) estiverem associada a dados para as funções no modelo de exibição, que disparam chamadas AJAX.</span><span class="sxs-lookup"><span data-stu-id="859d4-258">Events in the DOM (such as clicks) are data-bound to functions on the view model, which trigger AJAX calls.</span></span>

<span data-ttu-id="859d4-259">O modelo do SPA organiza o JavaScript do lado do cliente em três camadas:</span><span class="sxs-lookup"><span data-stu-id="859d4-259">The SPA template organizes the client-side JavaScript into three layers:</span></span>

- <span data-ttu-id="859d4-260">todo.datacontext.js: Envia solicitações AJAX.</span><span class="sxs-lookup"><span data-stu-id="859d4-260">todo.datacontext.js: Sends AJAX requests.</span></span>
- <span data-ttu-id="859d4-261">todo.model.js: Define os modelos.</span><span class="sxs-lookup"><span data-stu-id="859d4-261">todo.model.js: Defines the models.</span></span>
- <span data-ttu-id="859d4-262">todo.viewmodel.js: Define o modelo de exibição.</span><span class="sxs-lookup"><span data-stu-id="859d4-262">todo.viewmodel.js: Defines the view model.</span></span>

![](knockoutjs-template/_static/image11.png)

<span data-ttu-id="859d4-263">Esses arquivos de script estão localizados na pasta Scripts/app da solução.</span><span class="sxs-lookup"><span data-stu-id="859d4-263">These script files are located in the Scripts/app folder of the solution.</span></span>

![](knockoutjs-template/_static/image12.png)

<span data-ttu-id="859d4-264">**todo.DataContext** manipula todas as chamadas AJAX para os controladores de API da Web.</span><span class="sxs-lookup"><span data-stu-id="859d4-264">**todo.datacontext** handles all AJAX calls to the Web API controllers.</span></span> <span data-ttu-id="859d4-265">(As chamadas AJAX para fazer logon são definidas em outro lugar, em ajaxlogin.js.)</span><span class="sxs-lookup"><span data-stu-id="859d4-265">(The AJAX calls for logging in are defined elsewhere, in ajaxlogin.js.)</span></span>

<span data-ttu-id="859d4-266">**todo.Model.js** define os modelos do lado do cliente (navegador) para as listas de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="859d4-266">**todo.model.js** defines the client-side (browser) models for the to-do lists.</span></span> <span data-ttu-id="859d4-267">Há duas classes de modelo: todoItem e lista de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="859d4-267">There are two model classes: todoItem and todoList.</span></span>

<span data-ttu-id="859d4-268">Muitas das propriedades nas classes de modelo são do tipo "ko. observable".</span><span class="sxs-lookup"><span data-stu-id="859d4-268">Many of the properties in the model classes are of type "ko.observable".</span></span> <span data-ttu-id="859d4-269">Os observáveis são como Knockout faz sua mágica.</span><span class="sxs-lookup"><span data-stu-id="859d4-269">Observables are how Knockout does its magic.</span></span> <span data-ttu-id="859d4-270">Dos [documentação do Knockout](http://knockoutjs.com/documentation/introduction.html): Um observável é um "objeto JavaScript que pode notificar assinantes sobre as alterações."</span><span class="sxs-lookup"><span data-stu-id="859d4-270">From the [Knockout documentation](http://knockoutjs.com/documentation/introduction.html): An observable is a "JavaScript object that can notify subscribers about changes."</span></span> <span data-ttu-id="859d4-271">Quando o valor de um observável é alterada, o Knockout atualiza todos os elementos HTML associados a esses observables.</span><span class="sxs-lookup"><span data-stu-id="859d4-271">When the value of an observable changes, Knockout updates any HTML elements that are bound to those observables.</span></span> <span data-ttu-id="859d4-272">Por exemplo, o todoItem tem observáveis para as propriedades title e for feito:</span><span class="sxs-lookup"><span data-stu-id="859d4-272">For example, todoItem has observables for the title and isDone properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample5.js)]

<span data-ttu-id="859d4-273">Você também pode assinar um observável no código.</span><span class="sxs-lookup"><span data-stu-id="859d4-273">You can also subscribe to an observable in code.</span></span> <span data-ttu-id="859d4-274">Por exemplo, a classe todoItem assina alterações nas propriedades de "for feito" e "title":</span><span class="sxs-lookup"><span data-stu-id="859d4-274">For example, the todoItem class subscribes to changes in the "isDone" and "title" properties:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample6.js)]

<span data-ttu-id="859d4-275">**Modelo de exibição**</span><span class="sxs-lookup"><span data-stu-id="859d4-275">**View Model**</span></span>

<span data-ttu-id="859d4-276">O modelo de exibição é definido em todo.viewmodel.js.</span><span class="sxs-lookup"><span data-stu-id="859d4-276">The view model is defined in todo.viewmodel.js.</span></span> <span data-ttu-id="859d4-277">O modelo de exibição é o ponto central no qual o aplicativo associa os elementos da página HTML para os dados do domínio.</span><span class="sxs-lookup"><span data-stu-id="859d4-277">The view model is the central point where the application binds the HTML page elements to the domain data.</span></span> <span data-ttu-id="859d4-278">No modelo do SPA, o modelo de exibição contém uma matriz observável do todoLists.</span><span class="sxs-lookup"><span data-stu-id="859d4-278">In the SPA template, the view model contains an observable array of todoLists.</span></span> <span data-ttu-id="859d4-279">O código a seguir no modelo de exibição informa ao Knockout para aplicar as associações:</span><span class="sxs-lookup"><span data-stu-id="859d4-279">The following code in the view model tells Knockout to apply the bindings:</span></span>

[!code-javascript[Main](knockoutjs-template/samples/sample7.js)]

## <a name="html-and-data-binding"></a><span data-ttu-id="859d4-280">HTML e vinculação de dados</span><span class="sxs-lookup"><span data-stu-id="859d4-280">HTML and Data Binding</span></span>

<span data-ttu-id="859d4-281">O HTML da página principal é definido em Views/Home/Index.cshtml.</span><span class="sxs-lookup"><span data-stu-id="859d4-281">The main HTML for the page is defined in Views/Home/Index.cshtml.</span></span> <span data-ttu-id="859d4-282">Porque estamos usando a ligação de dados, o HTML é apenas um modelo para o que realmente é renderizado.</span><span class="sxs-lookup"><span data-stu-id="859d4-282">Because we are using data-binding, the HTML is only a template for what actually gets rendered.</span></span> <span data-ttu-id="859d4-283">Usa o Knockout *declarativa* associações.</span><span class="sxs-lookup"><span data-stu-id="859d4-283">Knockout uses *declarative* bindings.</span></span> <span data-ttu-id="859d4-284">Vincular elementos de página a dados, adicionando um atributo de "data-bind" para o elemento.</span><span class="sxs-lookup"><span data-stu-id="859d4-284">You bind page elements to data by adding a "data-bind" attribute to the element.</span></span> <span data-ttu-id="859d4-285">Aqui está um exemplo muito simples, obtido da documentação do Knockout:</span><span class="sxs-lookup"><span data-stu-id="859d4-285">Here is a very simple example, taken from the Knockout documentation:</span></span>

[!code-html[Main](knockoutjs-template/samples/sample8.html)]

<span data-ttu-id="859d4-286">Neste exemplo, o Knockout atualiza o conteúdo do **&lt;span&gt;** elemento com o valor de `myItems.count()`.</span><span class="sxs-lookup"><span data-stu-id="859d4-286">In this example, Knockout updates the contents of the **&lt;span&gt;** element with the value of `myItems.count()`.</span></span> <span data-ttu-id="859d4-287">Sempre que esse valor é alterado, o Knockout atualiza o documento.</span><span class="sxs-lookup"><span data-stu-id="859d4-287">Whenever this value changes, Knockout updates the document.</span></span>

<span data-ttu-id="859d4-288">Knockout fornece uma série de diferentes tipos de associação.</span><span class="sxs-lookup"><span data-stu-id="859d4-288">Knockout provides a number of different binding types.</span></span> <span data-ttu-id="859d4-289">Aqui estão algumas das associações usadas no modelo do SPA:</span><span class="sxs-lookup"><span data-stu-id="859d4-289">Here are some of the bindings used in the SPA template:</span></span>

- <span data-ttu-id="859d4-290">**foreach**: Permite que você iterar por meio de um loop e aplicar a mesma marcação para cada item na lista.</span><span class="sxs-lookup"><span data-stu-id="859d4-290">**foreach**: Lets you iterate through a loop and apply the same markup to each item in the list.</span></span> <span data-ttu-id="859d4-291">Isso é usado para renderizar a listas de tarefas pendentes e itens de tarefas pendentes.</span><span class="sxs-lookup"><span data-stu-id="859d4-291">This is used to render the to-do lists and to-do items.</span></span> <span data-ttu-id="859d4-292">Dentro de **foreach**, as associações são aplicadas aos elementos da lista.</span><span class="sxs-lookup"><span data-stu-id="859d4-292">Within the **foreach**, the bindings are applied to the elements of the list.</span></span>
- <span data-ttu-id="859d4-293">**visible**: Usado para alternar a visibilidade.</span><span class="sxs-lookup"><span data-stu-id="859d4-293">**visible**: Used to toggle visibility.</span></span> <span data-ttu-id="859d4-294">Ocultar marcação quando uma coleção está vazia ou verifique a mensagem de erro visível.</span><span class="sxs-lookup"><span data-stu-id="859d4-294">Hide markup when a collection is empty, or make the error message visible.</span></span>
- <span data-ttu-id="859d4-295">**Valor**: Usado para preencher os valores de formulário.</span><span class="sxs-lookup"><span data-stu-id="859d4-295">**value**: Used to populate form values.</span></span>
- <span data-ttu-id="859d4-296">**Clique em**: Associa um evento de clique a uma função no modelo de exibição.</span><span class="sxs-lookup"><span data-stu-id="859d4-296">**click**: Binds a click event to a function on the view model.</span></span>

## <a name="anti-csrf-protection"></a><span data-ttu-id="859d4-297">Proteção de anti-CSRF</span><span class="sxs-lookup"><span data-stu-id="859d4-297">Anti-CSRF Protection</span></span>

<span data-ttu-id="859d4-298">Falsificação de solicitação entre sites (CSRF) é um ataque em que um site mal-intencionado envia uma solicitação para um site vulnerável no qual o usuário fez logon.</span><span class="sxs-lookup"><span data-stu-id="859d4-298">Cross-Site Request Forgery (CSRF) is an attack where a malicious site sends a request to a vulnerable site where the user is currently logged in.</span></span> <span data-ttu-id="859d4-299">Para ajudar a impedir ataques CSRF, o ASP.NET MVC usa *tokens antifalsificação*, também chamada de solicitação de tokens de verificação.</span><span class="sxs-lookup"><span data-stu-id="859d4-299">To help prevent CSRF attacks, ASP.NET MVC uses *anti-forgery tokens*, also called request verification tokens.</span></span> <span data-ttu-id="859d4-300">A ideia é que o servidor coloca um token gerado aleatoriamente em uma página da web.</span><span class="sxs-lookup"><span data-stu-id="859d4-300">The idea is that the server puts a randomly generated token into a web page.</span></span> <span data-ttu-id="859d4-301">Quando o cliente envia dados para o servidor, ele deve incluir esse valor na mensagem de solicitação.</span><span class="sxs-lookup"><span data-stu-id="859d4-301">When the client submits data to the server, it must include this value in the request message.</span></span>

<span data-ttu-id="859d4-302">Tokens antifalsificação funciona porque a página mal-intencionados não é possível ler os tokens do usuário, devido às diretivas de mesma origem.</span><span class="sxs-lookup"><span data-stu-id="859d4-302">Anti-forgery tokens work because the malicious page cannot read the user's tokens, due to same-origin policies.</span></span> <span data-ttu-id="859d4-303">(A mesma origem políticas impedem a documentos hospedados em dois locais diferentes de acessar o conteúdo uns dos outros.)</span><span class="sxs-lookup"><span data-stu-id="859d4-303">(Same-origin policies prevent documents hosted on two different sites from accessing each other's content.)</span></span>

<span data-ttu-id="859d4-304">ASP.NET MVC fornece suporte interno para tokens antifalsificação, por meio de [Antifalsificação](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) classe e o [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) atributo.</span><span class="sxs-lookup"><span data-stu-id="859d4-304">ASP.NET MVC provides built-in support for anti-forgery tokens, through the [AntiForgery](https://msdn.microsoft.com/library/system.web.helpers.antiforgery.aspx) class and the [[ValidateAntiForgeryToken]](https://msdn.microsoft.com/library/system.web.mvc.validateantiforgerytokenattribute.aspx) attribute.</span></span> <span data-ttu-id="859d4-305">Atualmente, essa funcionalidade não está integrada ao API da Web.</span><span class="sxs-lookup"><span data-stu-id="859d4-305">Currently, this functionality is not built into Web API.</span></span> <span data-ttu-id="859d4-306">No entanto, o modelo SPA inclui uma implementação personalizada para a API da Web.</span><span class="sxs-lookup"><span data-stu-id="859d4-306">However, the SPA template includes a custom implementation for Web API.</span></span> <span data-ttu-id="859d4-307">Esse código é definido no `ValidateHttpAntiForgeryTokenAttribute` classe, que está localizado na pasta Filters da solução.</span><span class="sxs-lookup"><span data-stu-id="859d4-307">This code is defined in the `ValidateHttpAntiForgeryTokenAttribute` class, which is located in the Filters folder of the solution.</span></span> <span data-ttu-id="859d4-308">Para saber mais sobre anti-CSRF na API da Web, consulte [ataques impedindo Cross-Site CSRF (solicitação)](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span><span class="sxs-lookup"><span data-stu-id="859d4-308">To learn more about anti-CSRF in Web API, see [Preventing Cross-Site Request Forgery (CSRF) Attacks](../../../web-api/overview/security/preventing-cross-site-request-forgery-csrf-attacks.md).</span></span>

## <a name="conclusion"></a><span data-ttu-id="859d4-309">Conclusão</span><span class="sxs-lookup"><span data-stu-id="859d4-309">Conclusion</span></span>

<span data-ttu-id="859d4-310">O modelo do SPA é projetado para ajudá-lo a começar a escrever rapidamente aplicativos web modernos e interativos.</span><span class="sxs-lookup"><span data-stu-id="859d4-310">The SPA template is designed to get you started quickly writing modern, interactive web applications.</span></span> <span data-ttu-id="859d4-311">Ele usa a biblioteca Knockout. js para separar a apresentação (marcação HTML) da lógica de dados e aplicativos.</span><span class="sxs-lookup"><span data-stu-id="859d4-311">It uses the Knockout.js library to separate presentation (HTML markup) from the data and application logic.</span></span> <span data-ttu-id="859d4-312">Mas o Knockout não é a única biblioteca de JavaScript que você pode usar para criar um SPA.</span><span class="sxs-lookup"><span data-stu-id="859d4-312">But Knockout is not the only JavaScript library you can use to create a SPA.</span></span> <span data-ttu-id="859d4-313">Se você quiser explorar algumas outras opções, examine os [modelos criados pela comunidade do SPA](../templates/index.md).</span><span class="sxs-lookup"><span data-stu-id="859d4-313">If you want to explore some other options, take a look at the [community-created SPA templates](../templates/index.md).</span></span>
