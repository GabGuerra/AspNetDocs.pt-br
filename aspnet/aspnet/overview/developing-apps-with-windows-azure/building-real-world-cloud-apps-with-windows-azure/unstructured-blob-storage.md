---
uid: aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/unstructured-blob-storage
title: Armazenamento de Blob não estruturados (Criando aplicativos de nuvem do mundo Real com o Azure) | Microsoft Docs
author: MikeWasson
description: Os aplicativos de nuvem construção Real World com o livro eletrônico do Azure baseia-se em uma apresentação desenvolvida por Scott Guthrie. Ele explica 13 padrões e práticas recomendadas que podem a ele...
ms.author: riande
ms.date: 03/30/2015
ms.assetid: 9f05ccb1-2004-4661-ad8b-c370e6c09c8e
msc.legacyurl: /aspnet/overview/developing-apps-with-windows-azure/building-real-world-cloud-apps-with-windows-azure/unstructured-blob-storage
msc.type: authoredcontent
ms.openlocfilehash: 1a56a76c9bf27fdd7afb090ca473ebeee4065fe2
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57063473"
---
<a name="unstructured-blob-storage-building-real-world-cloud-apps-with-azure"></a><span data-ttu-id="53b7a-104">Armazenamento de Blob não estruturados (Criando aplicativos de nuvem do mundo Real com o Azure)</span><span class="sxs-lookup"><span data-stu-id="53b7a-104">Unstructured Blob Storage (Building Real-World Cloud Apps with Azure)</span></span>
====================
<span data-ttu-id="53b7a-105">por [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="53b7a-105">by [Mike Wasson](https://github.com/MikeWasson), [Rick Anderson]((https://twitter.com/RickAndMSFT)), [Tom Dykstra](https://github.com/tdykstra)</span></span>

<span data-ttu-id="53b7a-106">[Download corrigi-lo Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) ou [Baixe o livro eletrônico](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span><span class="sxs-lookup"><span data-stu-id="53b7a-106">[Download Fix It Project](http://code.msdn.microsoft.com/Fix-It-app-for-Building-cdd80df4) or [Download E-book](http://blogs.msdn.com/b/microsoft_press/archive/2014/07/23/free-ebook-building-cloud-apps-with-microsoft-azure.aspx)</span></span>

> <span data-ttu-id="53b7a-107">O **aos aplicativos de nuvem Real mundo de construção com o Azure** livro eletrônico se baseia em uma apresentação desenvolvida por Scott Guthrie.</span><span class="sxs-lookup"><span data-stu-id="53b7a-107">The **Building Real World Cloud Apps with Azure** e-book is based on a presentation developed by Scott Guthrie.</span></span> <span data-ttu-id="53b7a-108">Ele explica 13 padrões e práticas recomendadas que podem ajudá-lo a ser bem-sucedido no desenvolvimento de aplicativos web para a nuvem.</span><span class="sxs-lookup"><span data-stu-id="53b7a-108">It explains 13 patterns and practices that can help you be successful developing web apps for the cloud.</span></span> <span data-ttu-id="53b7a-109">Para obter informações sobre o livro eletrônico, consulte [o primeiro capítulo](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="53b7a-109">For information about the e-book, see [the first chapter](introduction.md).</span></span>


<span data-ttu-id="53b7a-110">No capítulo anterior, examinamos os esquemas de particionamento e explicou como o aplicativo Fix It armazena imagens no serviço de armazenamento de BLOBs do Azure e outros dados de tarefa no banco de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="53b7a-110">In the previous chapter we looked at partitioning schemes and explained how the Fix It app stores images in the Azure Storage Blob service, and other task data in Azure SQL Database.</span></span> <span data-ttu-id="53b7a-111">Neste capítulo vamos detalhar o serviço Blob e mostrar como ele é implementado no código do projeto Fix It.</span><span class="sxs-lookup"><span data-stu-id="53b7a-111">In this chapter we go deeper into the Blob service and show how it's implemented in Fix It project code.</span></span>

## <a name="what-is-blob-storage"></a><span data-ttu-id="53b7a-112">O que é o armazenamento de BLOBs?</span><span class="sxs-lookup"><span data-stu-id="53b7a-112">What is Blob storage?</span></span>

<span data-ttu-id="53b7a-113">O serviço de armazenamento de BLOBs do Azure fornece uma maneira de armazenar arquivos na nuvem.</span><span class="sxs-lookup"><span data-stu-id="53b7a-113">The Azure Storage Blob service provides a way to store files in the cloud.</span></span> <span data-ttu-id="53b7a-114">O serviço Blob tem uma série de vantagens em relação ao armazenamento de arquivos em um sistema de arquivos de rede local:</span><span class="sxs-lookup"><span data-stu-id="53b7a-114">The Blob service has a number of advantages over storing files in a local network file system:</span></span>

- <span data-ttu-id="53b7a-115">É altamente escalonável.</span><span class="sxs-lookup"><span data-stu-id="53b7a-115">It's highly scalable.</span></span> <span data-ttu-id="53b7a-116">Uma única conta de armazenamento pode armazenar [centenas de terabytes](https://msdn.microsoft.com/library/windowsazure/dn249410.aspx), e você pode ter várias contas de armazenamento.</span><span class="sxs-lookup"><span data-stu-id="53b7a-116">A single Storage account can store [hundreds of terabytes](https://msdn.microsoft.com/library/windowsazure/dn249410.aspx), and you can have multiple Storage accounts.</span></span> <span data-ttu-id="53b7a-117">Alguns dos maiores clientes do Azure armazenam de centenas de petabytes.</span><span class="sxs-lookup"><span data-stu-id="53b7a-117">Some of the biggest Azure customers store hundreds of petabytes.</span></span> <span data-ttu-id="53b7a-118">Microsoft SkyDrive usa o armazenamento de blob.</span><span class="sxs-lookup"><span data-stu-id="53b7a-118">Microsoft SkyDrive uses blob storage.</span></span>
- <span data-ttu-id="53b7a-119">Ele é durável.</span><span class="sxs-lookup"><span data-stu-id="53b7a-119">It's durable.</span></span> <span data-ttu-id="53b7a-120">Cada arquivo que você armazena no serviço Blob é feito automaticamente.</span><span class="sxs-lookup"><span data-stu-id="53b7a-120">Every file you store in the Blob service is automatically backed up.</span></span>
- <span data-ttu-id="53b7a-121">Ele fornece alta disponibilidade.</span><span class="sxs-lookup"><span data-stu-id="53b7a-121">It provides high availability.</span></span> <span data-ttu-id="53b7a-122">O [SLA para armazenamento](https://go.microsoft.com/fwlink/p/?linkid=159705&amp;clcid=0x409) promessas de 99,9% ou 99,99% tempo de atividade, dependendo de qual opção de redundância geográfica em que você escolher.</span><span class="sxs-lookup"><span data-stu-id="53b7a-122">The [SLA for Storage](https://go.microsoft.com/fwlink/p/?linkid=159705&amp;clcid=0x409) promises 99.9% or 99.99% uptime, depending on which geo-redundancy option you choose.</span></span>
- <span data-ttu-id="53b7a-123">É um recurso (PaaS) de plataforma como serviço do Azure, o que significa que você acabou de armazena e recupera arquivos, pagando somente a quantidade real de armazenamento que você usar, e o Azure cuida automaticamente da configuração e gerenciamento de todas as VMs e as unidades de disco necessárias para o serviço.</span><span class="sxs-lookup"><span data-stu-id="53b7a-123">It's a platform-as-a-service (PaaS) feature of Azure, which means you just store and retrieve files, paying only for the actual amount of storage you use, and Azure automatically takes care of setting up and managing all of the VMs and disk drives required for the service.</span></span>
- <span data-ttu-id="53b7a-124">Você pode acessar o serviço Blob, usando uma API REST ou usando uma linguagem de programação API.</span><span class="sxs-lookup"><span data-stu-id="53b7a-124">You can access the Blob service by using a REST API or by using a programming language API.</span></span> <span data-ttu-id="53b7a-125">SDKs estão disponíveis para .NET, Java, Ruby e outras pessoas.</span><span class="sxs-lookup"><span data-stu-id="53b7a-125">SDKs are available for .NET, Java, Ruby, and others.</span></span>
- <span data-ttu-id="53b7a-126">Quando você armazena um arquivo no serviço Blob, você pode facilmente disponibilizá-lo publicamente na Internet.</span><span class="sxs-lookup"><span data-stu-id="53b7a-126">When you store a file in the Blob service, you can easily make it publicly available over the Internet.</span></span>
- <span data-ttu-id="53b7a-127">Você pode proteger arquivos no Blob do serviço para que eles possam acessado apenas por usuários autorizados, ou você pode fornecer tokens de acesso temporário que disponibiliza a alguém somente para um período de tempo limitado.</span><span class="sxs-lookup"><span data-stu-id="53b7a-127">You can secure files in the Blob service so they can accessed only by authorized users, or you can provide temporary access tokens that makes them available to someone only for a limited period of time.</span></span>

<span data-ttu-id="53b7a-128">Sempre que você está compilando um aplicativo do Azure e desejar armazenar uma grande quantidade de dados que, em um ambiente local, iriam em arquivos--como imagens, vídeos, PDFs, planilhas, etc. – Considere o serviço Blob.</span><span class="sxs-lookup"><span data-stu-id="53b7a-128">Anytime you're building an app for Azure and you want to store a lot of data that in an on-premises environment would go in files -- such as images, videos, PDFs, spreadsheets, etc. -- consider the Blob service.</span></span>

## <a name="creating-a-storage-account"></a><span data-ttu-id="53b7a-129">Criar uma conta de armazenamento</span><span class="sxs-lookup"><span data-stu-id="53b7a-129">Creating a Storage account</span></span>

<span data-ttu-id="53b7a-130">Para começar a usar com o serviço Blob, você cria uma conta de armazenamento no Azure.</span><span class="sxs-lookup"><span data-stu-id="53b7a-130">To get started with the Blob service you create a Storage account in Azure.</span></span> <span data-ttu-id="53b7a-131">No portal, clique em **New** -- **serviços de dados** -- **armazenamento** -- **criação rápida**, e, em seguida, digite uma URL e um local de data center.</span><span class="sxs-lookup"><span data-stu-id="53b7a-131">In the portal, click **New** -- **Data Services** -- **Storage** -- **Quick Create**, and then enter a URL and a data center location.</span></span> <span data-ttu-id="53b7a-132">O local de centro de dados deve ser o mesmo que seu aplicativo web.</span><span class="sxs-lookup"><span data-stu-id="53b7a-132">The data center location should be the same as your web app.</span></span>

![Criar uma conta de armazenamento](unstructured-blob-storage/_static/image1.png)

<span data-ttu-id="53b7a-134">Você escolher a região primária, onde você deseja armazenar o conteúdo e, se você escolher o [replicação geográfica](https://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx#_Geo_Redundant_Storage) opção, o Azure cria réplicas de todos os dados em um data center diferente em outra região do país.</span><span class="sxs-lookup"><span data-stu-id="53b7a-134">You pick the primary region where you want to store the content, and if you choose the [geo-replication](https://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx#_Geo_Redundant_Storage) option, Azure creates replicas of all your data in a different data center in another region of the country.</span></span> <span data-ttu-id="53b7a-135">Por exemplo, se você escolher o oeste dos EUA data center, quando você armazena um arquivo que ele vai para o data center do Oeste dos EUA, mas em segundo plano do Azure também copia para um de outros data centers dos EUA.</span><span class="sxs-lookup"><span data-stu-id="53b7a-135">For example, if you choose the Western US data center, when you store a file it goes to the Western US data center, but in the background Azure also copies it to one of the other US data centers.</span></span> <span data-ttu-id="53b7a-136">Se ocorrer um desastre em uma região do país, seus dados estão seguros ainda.</span><span class="sxs-lookup"><span data-stu-id="53b7a-136">If a disaster happens in one region of the country, your data is still safe.</span></span>

<span data-ttu-id="53b7a-137">Azure não replica dados entre limites de geopolítica: se seu local primário estiver nos EUA, os arquivos só serão replicados para outra região dentro dos EUA; Se o local principal estiver na Austrália, os arquivos só serão replicados para outro data center na Austrália.</span><span class="sxs-lookup"><span data-stu-id="53b7a-137">Azure won't replicate data across geo-political boundaries: if your primary location is in the U.S., your files are only replicated to another region within the U.S.; if your primary location is Australia, your files are only replicated to another data center in Australia.</span></span>

<span data-ttu-id="53b7a-138">É claro, você também pode criar uma conta de armazenamento, executando os comandos de um script, como vimos anteriormente.</span><span class="sxs-lookup"><span data-stu-id="53b7a-138">Of course, you can also create a Storage account by executing commands from a script, as we saw earlier.</span></span> <span data-ttu-id="53b7a-139">Aqui está um comando do Windows PowerShell para criar uma conta de armazenamento:</span><span class="sxs-lookup"><span data-stu-id="53b7a-139">Here's a Windows PowerShell command to create a Storage account:</span></span>

[!code-powershell[Main](unstructured-blob-storage/samples/sample1.ps1)]

<span data-ttu-id="53b7a-140">Quando você tiver uma conta de armazenamento, você pode começar imediatamente armazenar arquivos no serviço Blob.</span><span class="sxs-lookup"><span data-stu-id="53b7a-140">Once you have a Storage account, you can immediately start storing files in the Blob service.</span></span>

## <a name="using-blob-storage-in-the-fix-it-app"></a><span data-ttu-id="53b7a-141">Usando o armazenamento de BLOBs no aplicativo Fix It</span><span class="sxs-lookup"><span data-stu-id="53b7a-141">Using Blob storage in the Fix It app</span></span>

<span data-ttu-id="53b7a-142">O aplicativo Fix It permite que você carregue fotos.</span><span class="sxs-lookup"><span data-stu-id="53b7a-142">The Fix It app enables you to upload photos.</span></span>

![Criar uma tarefa Fix It](unstructured-blob-storage/_static/image2.png)

<span data-ttu-id="53b7a-144">Quando você clica em **criar o FixIt**, o aplicativo carrega o arquivo de imagem especificado e armazena-o no serviço Blob.</span><span class="sxs-lookup"><span data-stu-id="53b7a-144">When you click **Create the FixIt**, the application uploads the specified image file and stores it in the Blob service.</span></span>

### <a name="set-up-the-blob-container"></a><span data-ttu-id="53b7a-145">Configurar o contêiner de Blob</span><span class="sxs-lookup"><span data-stu-id="53b7a-145">Set up the Blob container</span></span>

<span data-ttu-id="53b7a-146">Para armazenar um arquivo no serviço Blob, você precisa de uma *contêiner* armazená-los em.</span><span class="sxs-lookup"><span data-stu-id="53b7a-146">In order to store a file in the Blob service you need a *container* to store it in.</span></span> <span data-ttu-id="53b7a-147">Um contêiner de serviço Blob corresponde a uma pasta de sistema de arquivos.</span><span class="sxs-lookup"><span data-stu-id="53b7a-147">A Blob service container corresponds to a file system folder.</span></span> <span data-ttu-id="53b7a-148">Os scripts de criação de ambiente que analisamos na [capítulo automatizar tudo](automate-everything.md) criar a conta de armazenamento, mas eles não criam um contêiner.</span><span class="sxs-lookup"><span data-stu-id="53b7a-148">The environment creation scripts that we reviewed in the [Automate Everything chapter](automate-everything.md) create the Storage account, but they don't create a container.</span></span> <span data-ttu-id="53b7a-149">Portanto, a finalidade do `CreateAndConfigure` método da `PhotoService` classe é criar um contêiner se ele ainda não existir.</span><span class="sxs-lookup"><span data-stu-id="53b7a-149">So the purpose of the `CreateAndConfigure` method of the `PhotoService` class is to create a container if it doesn't already exist.</span></span> <span data-ttu-id="53b7a-150">Esse método é chamado do `Application_Start` método no *global. asax*.</span><span class="sxs-lookup"><span data-stu-id="53b7a-150">This method is called from the `Application_Start` method in *Global.asax*.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample2.cs)]

<span data-ttu-id="53b7a-151">A chave de acesso e o nome de conta do armazenamento são armazenadas na `appSettings` coleção do *Web. config* do arquivo e o código no `StorageUtils.StorageAccount` método usa esses valores para construir uma cadeia de caracteres de conexão e estabelecer uma conexão:</span><span class="sxs-lookup"><span data-stu-id="53b7a-151">The storage account name and access key are stored in the `appSettings` collection of the *Web.config* file, and code in the `StorageUtils.StorageAccount` method uses those values to build a connection string and establish a connection:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample3.cs)]

<span data-ttu-id="53b7a-152">O `CreateAndConfigureAsync` método, em seguida, cria um objeto que representa o serviço Blob e um objeto que representa um contêiner (pasta) denominado "imagens" no serviço Blob:</span><span class="sxs-lookup"><span data-stu-id="53b7a-152">The `CreateAndConfigureAsync` method then creates an object that represents the Blob service, and an object that represents a container (folder) named "images" in the Blob service:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample4.cs)]

<span data-ttu-id="53b7a-153">Se um contêiner chamado "imagens" ainda não exista, que será true na primeira vez em que você executar o aplicativo em uma nova conta de armazenamento – o código cria o contêiner e define permissões para torná-lo público.</span><span class="sxs-lookup"><span data-stu-id="53b7a-153">If a container named "images" doesn't exist yet -- which will be true the first time you run the app against a new storage account -- the code creates the container and sets permissions to make it public.</span></span> <span data-ttu-id="53b7a-154">(Por padrão, novos contêineres de blob são particulares e são acessíveis somente aos usuários que têm permissão para acessar sua conta de armazenamento.)</span><span class="sxs-lookup"><span data-stu-id="53b7a-154">(By default, new blob containers are private and are accessible only to users who have permission to access your storage account.)</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample5.cs)]

### <a name="store-the-uploaded-photo-in-blob-storage"></a><span data-ttu-id="53b7a-155">Store a foto carregada no armazenamento de Blob</span><span class="sxs-lookup"><span data-stu-id="53b7a-155">Store the uploaded photo in Blob storage</span></span>

<span data-ttu-id="53b7a-156">Para carregar e salvar o arquivo de imagem, o aplicativo usa um `IPhotoService` interface e uma implementação da interface no `PhotoService` classe.</span><span class="sxs-lookup"><span data-stu-id="53b7a-156">To upload and save the image file, the app uses an `IPhotoService` interface and an implementation of the interface in the `PhotoService` class.</span></span> <span data-ttu-id="53b7a-157">O *PhotoService.cs* arquivo contém todo o código no Fix It aplicativo que se comunica com o serviço Blob.</span><span class="sxs-lookup"><span data-stu-id="53b7a-157">The *PhotoService.cs* file contains all of the code in the Fix It app that communicates with the Blob service.</span></span>

<span data-ttu-id="53b7a-158">O seguinte método de controlador MVC é chamado quando o usuário clica **criar o FixIt**.</span><span class="sxs-lookup"><span data-stu-id="53b7a-158">The following MVC controller method is called when the user clicks **Create the FixIt**.</span></span> <span data-ttu-id="53b7a-159">Nesse código, `photoService` refere-se a uma instância das `PhotoService` classe, e `fixittask` refere-se a uma instância da `FixItTask` classe de entidade que armazena dados para uma nova tarefa.</span><span class="sxs-lookup"><span data-stu-id="53b7a-159">In this code, `photoService` refers to an instance of the `PhotoService` class, and `fixittask` refers to an instance of the `FixItTask` entity class that stores data for a new task.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample6.cs?highlight=8)]

<span data-ttu-id="53b7a-160">O `UploadPhotoAsync` método no `PhotoService` classe armazena o arquivo carregado no serviço Blob e retorna uma URL que aponta para o novo blob.</span><span class="sxs-lookup"><span data-stu-id="53b7a-160">The `UploadPhotoAsync` method in the `PhotoService` class stores the uploaded file in the Blob service and returns a URL that points to the new blob.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample7.cs)]

<span data-ttu-id="53b7a-161">Como mostra a `CreateAndConfigure` método, o código conecta-se à conta de armazenamento e cria um objeto que representa o contêiner de blob "imagens", exceto aqui ele pressupõe que o contêiner já existir.</span><span class="sxs-lookup"><span data-stu-id="53b7a-161">As in the `CreateAndConfigure` method, the code connects to the storage account and creates an object that represents the "images" blob container, except here it assumes the container already exists.</span></span>

<span data-ttu-id="53b7a-162">Em seguida, ele cria um identificador exclusivo para a imagem prestes a ser carregado, concatenando um novo valor GUID com a extensão de arquivo:</span><span class="sxs-lookup"><span data-stu-id="53b7a-162">Then it creates a unique identifier for the image about to be uploaded, by concatenating a new GUID value with the file extension:</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample8.cs)]

<span data-ttu-id="53b7a-163">O código, em seguida, usa o objeto de contêiner de blob e o novo identificador exclusivo para criar um objeto de blob, define um atributo no objeto indicando o tipo de arquivo ela está e, em seguida, usa o objeto de blob para armazenar o arquivo no armazenamento de BLOBs.</span><span class="sxs-lookup"><span data-stu-id="53b7a-163">The code then uses the blob container object and the new unique identifier to create a blob object, sets an attribute on that object indicating what kind of file it is, and then uses the blob object to store the file in blob storage.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample9.cs)]

<span data-ttu-id="53b7a-164">Por fim, ele obtém uma URL que faz referência ao blob.</span><span class="sxs-lookup"><span data-stu-id="53b7a-164">Finally, it gets a URL that references the blob.</span></span> <span data-ttu-id="53b7a-165">Essa URL será armazenado no banco de dados e pode ser usado em corrigir páginas da web para exibir a imagem carregada.</span><span class="sxs-lookup"><span data-stu-id="53b7a-165">This URL will be stored in the database and can be used in Fix It web pages to display the uploaded image.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample10.cs)]

<span data-ttu-id="53b7a-166">Essa URL é armazenada no banco de dados como uma das colunas da tabela FixItTask.</span><span class="sxs-lookup"><span data-stu-id="53b7a-166">This URL is stored in the database as one of the columns of the FixItTask table.</span></span>

[!code-csharp[Main](unstructured-blob-storage/samples/sample11.cs?highlight=10)]

<span data-ttu-id="53b7a-167">Com apenas a URL no banco de dados e imagens no armazenamento de Blob, o aplicativo Fix It mantém o banco de dados pequeno, escalonável e de baixo custo, enquanto as imagens são armazenadas em que o armazenamento é barato e capaz de lidar com terabytes ou petabytes.</span><span class="sxs-lookup"><span data-stu-id="53b7a-167">With only the URL in the database, and images in Blob storage, the Fix It app keeps the database small, scalable, and inexpensive, while the images are stored where storage is cheap and capable of handling terabytes or petabytes.</span></span> <span data-ttu-id="53b7a-168">Uma conta de armazenamento pode armazenar centenas de terabytes de fotos de corrigi-lo, e você paga apenas pelo que usar.</span><span class="sxs-lookup"><span data-stu-id="53b7a-168">One storage account can store hundreds of terabytes of Fix It photos, and you only pay for what you use.</span></span> <span data-ttu-id="53b7a-169">Para que você possa começar pequeno centavos 9 pagantes para o primeiro gigabyte e adicionar mais imagens para centavos por gigabyte adicional.</span><span class="sxs-lookup"><span data-stu-id="53b7a-169">So you can start off small paying 9 cents for the first gigabyte, and add more images for pennies per additional gigabyte.</span></span>

### <a name="display-the-uploaded-file"></a><span data-ttu-id="53b7a-170">Exibir o arquivo carregado</span><span class="sxs-lookup"><span data-stu-id="53b7a-170">Display the uploaded file</span></span>

<span data-ttu-id="53b7a-171">O aplicativo Fix It exibe o arquivo de imagem carregada quando ela exibe detalhes de uma tarefa.</span><span class="sxs-lookup"><span data-stu-id="53b7a-171">The Fix It application displays the uploaded image file when it displays details for a task.</span></span>

![Corrigir detalhes da tarefa com fotos](unstructured-blob-storage/_static/image3.png)

<span data-ttu-id="53b7a-173">Para exibir a imagem, basta que o modo de exibição do MVC é incluir o `PhotoUrl` valor no HTML e enviada ao navegador.</span><span class="sxs-lookup"><span data-stu-id="53b7a-173">To display the image, all the MVC view has to do is include the `PhotoUrl` value in the HTML sent to the browser.</span></span> <span data-ttu-id="53b7a-174">O servidor web e o banco de dados não estiver usando ciclos para exibir a imagem, eles são apenas serviços de alguns bytes para a URL da imagem.</span><span class="sxs-lookup"><span data-stu-id="53b7a-174">The web server and the database are not using cycles to display the image, they are only serving up a few bytes to the image URL.</span></span> <span data-ttu-id="53b7a-175">No código a seguir Razor, `Model` refere-se a uma instância da `FixItTask` classe de entidade.</span><span class="sxs-lookup"><span data-stu-id="53b7a-175">In the following Razor code, `Model` refers to an instance of the `FixItTask` entity class.</span></span>

[!code-cshtml[Main](unstructured-blob-storage/samples/sample12.cshtml?highlight=11)]

<span data-ttu-id="53b7a-176">Se você examinar o HTML da página que exibe, você verá a URL que aponta diretamente para a imagem no armazenamento de BLOBs, algo assim:</span><span class="sxs-lookup"><span data-stu-id="53b7a-176">If you look at the HTML of the page that displays, you see the URL pointing directly to the image in blob storage, something like this:</span></span>

[!code-cshtml[Main](unstructured-blob-storage/samples/sample13.cshtml?highlight=11)]

## <a name="summary"></a><span data-ttu-id="53b7a-177">Resumo</span><span class="sxs-lookup"><span data-stu-id="53b7a-177">Summary</span></span>

<span data-ttu-id="53b7a-178">Você viu como o aplicativo Fix It armazena imagens no serviço Blob e apenas as URLs de imagem no banco de dados SQL.</span><span class="sxs-lookup"><span data-stu-id="53b7a-178">You've seen how the Fix It app stores images in the Blob service and only image URLs in the SQL database.</span></span> <span data-ttu-id="53b7a-179">Usando o serviço Blob mantém o banco de dados do SQL muito menor do que, caso contrário, seria, torna possível escalar verticalmente para um número quase ilimitado de tarefas e pode ser feito sem escrever uma grande quantidade de código.</span><span class="sxs-lookup"><span data-stu-id="53b7a-179">Using the Blob service keeps the SQL database much smaller than it otherwise would be, makes it possible to scale up to an almost unlimited number of tasks, and can be done without writing a lot of code.</span></span>

<span data-ttu-id="53b7a-180">Você pode ter centenas de terabytes em uma conta de armazenamento e o custo de armazenamento é muito menos dispendioso do que o armazenamento de banco de dados SQL, começando em cerca de 3 centavos por gigabyte por mês mais um encargo de pequenas transações.</span><span class="sxs-lookup"><span data-stu-id="53b7a-180">You can have hundreds of terabytes in a storage account, and the storage cost is much less expensive than SQL Database storage, starting at about 3 cents per gigabyte per month plus a small transaction charge.</span></span> <span data-ttu-id="53b7a-181">E lembre-se de que você não está pagando para a capacidade máxima, mas apenas para a quantidade que você realmente armazena, portanto, seu aplicativo está pronto para ser dimensionado, mas você não está pagando capacidade extra por tudo o que.</span><span class="sxs-lookup"><span data-stu-id="53b7a-181">And keep in mind that you're not paying for the maximum capacity but only for the amount you actually store, so your app is ready to scale but you're not paying for all that extra capacity.</span></span>

<span data-ttu-id="53b7a-182">No [próximo capítulo](design-to-survive-failures.md) falaremos sobre a importância de tomar um aplicativo de nuvem capaz de lidar normalmente com falhas.</span><span class="sxs-lookup"><span data-stu-id="53b7a-182">In the [next chapter](design-to-survive-failures.md) we'll talk about the importance of making a cloud app capable of gracefully handling failures.</span></span>

## <a name="resources"></a><span data-ttu-id="53b7a-183">Recursos</span><span class="sxs-lookup"><span data-stu-id="53b7a-183">Resources</span></span>

<span data-ttu-id="53b7a-184">Para obter mais informações, consulte os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="53b7a-184">For more information see the following resources:</span></span>

- <span data-ttu-id="53b7a-185">[Uma introdução ao armazenamento de BLOBs do Azure](https://www.simple-talk.com/cloud/cloud-data/an-introduction-to-windows-azure-blob-storage-/).</span><span class="sxs-lookup"><span data-stu-id="53b7a-185">[An Introduction to Azure BLOB Storage](https://www.simple-talk.com/cloud/cloud-data/an-introduction-to-windows-azure-blob-storage-/).</span></span> <span data-ttu-id="53b7a-186">Blog de Mike Wood.</span><span class="sxs-lookup"><span data-stu-id="53b7a-186">Blog by Mike Wood.</span></span>
- <span data-ttu-id="53b7a-187">[Como usar o serviço de armazenamento de BLOBs do Azure no .NET](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-how-to-use-blobs).</span><span class="sxs-lookup"><span data-stu-id="53b7a-187">[How to use the Azure Blob Storage Service in .NET](https://docs.microsoft.com/azure/storage/blobs/storage-dotnet-how-to-use-blobs).</span></span> <span data-ttu-id="53b7a-188">Documentação oficial no site MicrosoftAzure.com.</span><span class="sxs-lookup"><span data-stu-id="53b7a-188">Official documentation on the MicrosoftAzure.com site.</span></span> <span data-ttu-id="53b7a-189">Uma breve introdução ao seguido de exemplos de código mostrando como se conectar ao armazenamento de BLOBs do armazenamento de BLOBs criar contêineres, carregar e baixar blobs, etc.</span><span class="sxs-lookup"><span data-stu-id="53b7a-189">A brief introduction to blob storage followed by code examples showing how to connect to blob storage, create containers, upload and download blobs, etc.</span></span>
- <span data-ttu-id="53b7a-190">[À prova de falhas: Criação de serviços de nuvem escalonáveis, resilientes](https://channel9.msdn.com/Series/FailSafe).</span><span class="sxs-lookup"><span data-stu-id="53b7a-190">[FailSafe: Building Scalable, Resilient Cloud Services](https://channel9.msdn.com/Series/FailSafe).</span></span> <span data-ttu-id="53b7a-191">Série de vídeos de nove partes por Marc Mercuri, Ulrich Homann e Mark Simms.</span><span class="sxs-lookup"><span data-stu-id="53b7a-191">Nine-part video series by Ulrich Homann, Marc Mercuri, and Mark Simms.</span></span> <span data-ttu-id="53b7a-192">Apresenta conceitos de alto nível e princípios de arquitetura de uma maneira muito acessível e interessante, histórias desenhadas da experiência do Microsoft Customer Advisory Team (CAT) com clientes reais.</span><span class="sxs-lookup"><span data-stu-id="53b7a-192">Presents high-level concepts and architectural principles in a very accessible and interesting way, with stories drawn from Microsoft Customer Advisory Team (CAT) experience with actual customers.</span></span> <span data-ttu-id="53b7a-193">Para uma discussão do serviço de armazenamento do Azure e blobs, consulte episódio 5 começando em 35:13.</span><span class="sxs-lookup"><span data-stu-id="53b7a-193">For a discussion of Azure Storage service and blobs, see episode 5 starting at 35:13.</span></span>
- <span data-ttu-id="53b7a-194">[Microsoft Patterns and Practices - diretrizes do Azure](https://msdn.microsoft.com/library/dn568099.aspx).</span><span class="sxs-lookup"><span data-stu-id="53b7a-194">[Microsoft Patterns and Practices - Azure Guidance](https://msdn.microsoft.com/library/dn568099.aspx).</span></span> <span data-ttu-id="53b7a-195">Padrão de Valet Key consulte.</span><span class="sxs-lookup"><span data-stu-id="53b7a-195">See Valet Key pattern.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="53b7a-196">[Anterior](data-partitioning-strategies.md)
> [Próximo](design-to-survive-failures.md)</span><span class="sxs-lookup"><span data-stu-id="53b7a-196">[Previous](data-partitioning-strategies.md)
[Next](design-to-survive-failures.md)</span></span>
