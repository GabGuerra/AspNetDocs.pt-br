---
uid: web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12
title: 'Implantando um aplicativo da Web ASP.NET com o SQL Server Compact usando o Visual Studio ou Visual Web Developer: Migrando para o SQL Server - 10 a 12 | Microsoft Docs'
author: tdykstra
description: Esta série de tutoriais mostra como implantar (publicar) um ASP.NET projeto de aplicativo web que inclui um banco de dados do SQL Server Compact usando o Visual Stu...
ms.author: riande
ms.date: 11/17/2011
ms.assetid: a89d6f32-b71b-4036-8ff7-5f8ac2a6eca8
msc.legacyurl: /web-forms/overview/older-versions-getting-started/deployment-to-a-hosting-provider/deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12
msc.type: authoredcontent
ms.openlocfilehash: cc4db5b1fcedca675a18f1b78e28f65e51b6cf09
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/06/2019
ms.locfileid: "65132761"
---
# <a name="deploying-an-aspnet-web-application-with-sql-server-compact-using-visual-studio-or-visual-web-developer-migrating-to-sql-server---10-of-12"></a><span data-ttu-id="3c78a-103">Implantando um aplicativo da Web ASP.NET com o SQL Server Compact usando o Visual Studio ou Visual Web Developer: Migrando para o SQL Server - 10 a 12</span><span class="sxs-lookup"><span data-stu-id="3c78a-103">Deploying an ASP.NET Web Application with SQL Server Compact using Visual Studio or Visual Web Developer: Migrating to SQL Server - 10 of 12</span></span>

<span data-ttu-id="3c78a-104">por [Tom Dykstra](https://github.com/tdykstra)</span><span class="sxs-lookup"><span data-stu-id="3c78a-104">by [Tom Dykstra](https://github.com/tdykstra)</span></span>

[<span data-ttu-id="3c78a-105">Baixe o projeto inicial</span><span class="sxs-lookup"><span data-stu-id="3c78a-105">Download Starter Project</span></span>](http://code.msdn.microsoft.com/Deploying-an-ASPNET-Web-4e31366b)

> <span data-ttu-id="3c78a-106">Esta série de tutoriais mostra como implantar (publicar) um ASP.NET projeto de aplicativo web que inclui um banco de dados do SQL Server Compact usando o Visual Studio 2012 RC ou Visual Studio Express 2012 RC para Web.</span><span class="sxs-lookup"><span data-stu-id="3c78a-106">This series of tutorials shows you how to deploy (publish) an ASP.NET web application project that includes a SQL Server Compact database by using Visual Studio 2012 RC or Visual Studio Express 2012 RC for Web.</span></span> <span data-ttu-id="3c78a-107">Você também pode usar o Visual Studio 2010 se você instalar a atualização de publicação na Web.</span><span class="sxs-lookup"><span data-stu-id="3c78a-107">You can also use Visual Studio 2010 if you install the Web Publish Update.</span></span> <span data-ttu-id="3c78a-108">Para obter uma introdução à série, consulte [o primeiro tutorial na série](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="3c78a-108">For an introduction to the series, see [the first tutorial in the series](deployment-to-a-hosting-provider-introduction-1-of-12.md).</span></span>
> 
> <span data-ttu-id="3c78a-109">Para obter um tutorial que mostra os recursos de implantação introduzidos após a versão RC do Visual Studio 2012, mostra como implantar as edições do SQL Server que não seja o SQL Server Compact e mostra como implantar aplicativos de Web do serviço de aplicativo do Azure, consulte [implantação da Web do ASP.NET usando o Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span><span class="sxs-lookup"><span data-stu-id="3c78a-109">For a tutorial that shows deployment features introduced after the RC release of Visual Studio 2012, shows how to deploy SQL Server editions other than SQL Server Compact, and shows how to deploy to Azure App Service Web Apps, see [ASP.NET Web Deployment using Visual Studio](../../deployment/visual-studio-web-deployment/introduction.md).</span></span>

## <a name="overview"></a><span data-ttu-id="3c78a-110">Visão geral</span><span class="sxs-lookup"><span data-stu-id="3c78a-110">Overview</span></span>

<span data-ttu-id="3c78a-111">Este tutorial mostra como migrar do SQL Server Compact para o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3c78a-111">This tutorial shows you how to migrate from SQL Server Compact to SQL Server.</span></span> <span data-ttu-id="3c78a-112">Um motivo que você talvez queira fazer isso é tirar proveito dos recursos do SQL Server que o SQL Server Compact não dá suporte, como procedimentos armazenados, disparadores, exibições ou replicação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-112">One reason you might want to do that is to take advantage of SQL Server features that SQL Server Compact does not support, such as stored procedures, triggers, views, or replication.</span></span> <span data-ttu-id="3c78a-113">Para obter mais informações sobre as diferenças entre o SQL Server Compact e SQL Server, consulte o [Implantando o SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) tutorial.</span><span class="sxs-lookup"><span data-stu-id="3c78a-113">For more information about the differences between SQL Server Compact and SQL Server, see the [Deploying SQL Server Compact](deployment-to-a-hosting-provider-deploying-sql-server-compact-databases-2-of-12.md) tutorial.</span></span>

### <a name="sql-server-express-versus-full-sql-server-for-development"></a><span data-ttu-id="3c78a-114">SQL Server Express versus SQL Server completo para o desenvolvimento</span><span class="sxs-lookup"><span data-stu-id="3c78a-114">SQL Server Express versus full SQL Server for Development</span></span>

<span data-ttu-id="3c78a-115">Depois de decidir atualizar para o SQL Server, você talvez queira usar o SQL Server ou SQL Server Express em seus ambientes de desenvolvimento e teste.</span><span class="sxs-lookup"><span data-stu-id="3c78a-115">Once you've decided to upgrade to SQL Server, you might want to use SQL Server or SQL Server Express in your development and test environments.</span></span> <span data-ttu-id="3c78a-116">Além das diferenças no suporte a ferramentas e nos recursos do mecanismo de banco de dados, há diferenças em implementações do provedor SQL Server Compact e outras versões do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3c78a-116">In addition to the differences in tool support and in database engine features, there are differences in provider implementations between SQL Server Compact and other versions of SQL Server.</span></span> <span data-ttu-id="3c78a-117">Essas diferenças podem causar o mesmo código gerar resultados diferentes.</span><span class="sxs-lookup"><span data-stu-id="3c78a-117">These differences can cause the same code to generate different results.</span></span> <span data-ttu-id="3c78a-118">Portanto, se você optar por manter o SQL Server Compact como seu banco de dados de desenvolvimento, você deve testar seu site no SQL Server ou SQL Server Express em um ambiente de teste antes de cada implantação na produção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-118">Therefore, if you decide to keep SQL Server Compact as your development database, you should thoroughly test your site in SQL Server or SQL Server Express in a test environment before each deployment to production.</span></span>

<span data-ttu-id="3c78a-119">Ao contrário do SQL Server Compact, SQL Server Express é essencialmente o mesmo mecanismo de banco de dados e usa o mesmo provedor de .NET como o SQL Server completo.</span><span class="sxs-lookup"><span data-stu-id="3c78a-119">Unlike SQL Server Compact, SQL Server Express is essentially the same database engine and uses the same .NET provider as full SQL Server.</span></span> <span data-ttu-id="3c78a-120">Quando você testar com o SQL Server Express, você pode ter certeza de obter os mesmos resultados, assim como você com o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3c78a-120">When you test with SQL Server Express, you can be confident of getting the same results as you will with SQL Server.</span></span> <span data-ttu-id="3c78a-121">Você pode usar a maioria das mesmas ferramentas de banco de dados com o SQL Server Express que você pode usar com o SQL Server (uma exceção notável sendo [SQL Server Profiler](https://msdn.microsoft.com/library/ms181091.aspx)), e dá suporte a outros recursos do SQL Server, como procedimentos armazenados, exibições, gatilhos, e a replicação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-121">You can use most of the same database tools with SQL Server Express that you can use with SQL Server (a notable exception being [SQL Server Profiler](https://msdn.microsoft.com/library/ms181091.aspx)), and it supports other features of SQL Server like stored procedures, views, triggers, and replication.</span></span> <span data-ttu-id="3c78a-122">(Você normalmente precisa usar o SQL Server completo em um site de produção, no entanto.</span><span class="sxs-lookup"><span data-stu-id="3c78a-122">(You typically have to use full SQL Server in a production website, however.</span></span> <span data-ttu-id="3c78a-123">SQL Server Express pode executar em um ambiente de hospedagem compartilhado, mas não foi projetado para fazer isso, e muitos provedores de hospedagem não dão suporte a ele.)</span><span class="sxs-lookup"><span data-stu-id="3c78a-123">SQL Server Express can run in a shared hosting environment, but it was not designed for that, and many hosting providers do not support it.)</span></span>

<span data-ttu-id="3c78a-124">Se você estiver usando o Visual Studio 2012, você normalmente escolher SQL Server Express LocalDB para o seu ambiente de desenvolvimento porque esse é o que é instalado por padrão com o Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="3c78a-124">If you are using Visual Studio 2012, you typically choose SQL Server Express LocalDB for your development environment because that is what is installed by default with Visual Studio.</span></span> <span data-ttu-id="3c78a-125">No entanto, o LocalDB não funciona no IIS, para seu ambiente de teste, você precisa usar o SQL Server ou SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="3c78a-125">However, LocalDB does not work in IIS, so for your test environment you have to use either SQL Server or SQL Server Express.</span></span>

### <a name="combining-databases-versus-keeping-them-separate"></a><span data-ttu-id="3c78a-126">A combinação de bancos de dados em vez de mantê-los separados</span><span class="sxs-lookup"><span data-stu-id="3c78a-126">Combining Databases versus Keeping Them Separate</span></span>

<span data-ttu-id="3c78a-127">O aplicativo Contoso University tem dois bancos de dados do SQL Server Compact: o banco de dados de associação (*aspnet.sdf*) e o banco de dados do aplicativo (*School.sdf*).</span><span class="sxs-lookup"><span data-stu-id="3c78a-127">The Contoso University application has two SQL Server Compact databases: the membership database (*aspnet.sdf*) and the application database (*School.sdf*).</span></span> <span data-ttu-id="3c78a-128">Quando você migra, você pode migrar esses bancos de dados para dois bancos de dados separados ou para um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-128">When you migrate, you can migrate these databases to two separate databases or to a single database.</span></span> <span data-ttu-id="3c78a-129">Talvez você queira combiná-los a fim de facilitar junções de banco de dados entre seu banco de dados do aplicativo e seu banco de dados de associação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-129">You might want to combine them in order to facilitate database joins between your application database and your membership database.</span></span> <span data-ttu-id="3c78a-130">Seu plano de hospedagem também pode fornecer um motivo para combiná-los.</span><span class="sxs-lookup"><span data-stu-id="3c78a-130">Your hosting plan might also provide a reason to combine them.</span></span> <span data-ttu-id="3c78a-131">Por exemplo, o provedor de hospedagem pode cobrar mais para vários bancos de dados ou até mesmo não pode permitir mais de um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-131">For example, the hosting provider might charge more for multiple databases or might not even allow more than one database.</span></span> <span data-ttu-id="3c78a-132">Que é o caso com a conta que é usada para este tutorial, o que permite que apenas um único banco de dados SQL de hospedagem Cytanium Lite.</span><span class="sxs-lookup"><span data-stu-id="3c78a-132">That's the case with the Cytanium Lite hosting account that's used for this tutorial, which allows only a single SQL Server database.</span></span>

<span data-ttu-id="3c78a-133">Neste tutorial, você vai migrar seus bancos de dados de duas dessa maneira:</span><span class="sxs-lookup"><span data-stu-id="3c78a-133">In this tutorial, you'll migrate your two databases this way:</span></span>

- <span data-ttu-id="3c78a-134">Migre para dois bancos de dados LocalDB no ambiente de desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="3c78a-134">Migrate to two LocalDB databases in the development environment.</span></span>
- <span data-ttu-id="3c78a-135">Migre para dois bancos de dados SQL Server Express no ambiente de teste.</span><span class="sxs-lookup"><span data-stu-id="3c78a-135">Migrate to two SQL Server Express databases in the test environment.</span></span>
- <span data-ttu-id="3c78a-136">Migre para um combinada do SQL Server banco de dados completo no ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-136">Migrate to one combined full SQL Server database in the production environment.</span></span>

<span data-ttu-id="3c78a-137">Lembrete: Se você receber uma mensagem de erro ou se algo não funciona ao percorrer o tutorial, certifique-se de verificar a [página de solução de problemas](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="3c78a-137">Reminder: If you get an error message or something doesn't work as you go through the tutorial, be sure to check the [troubleshooting page](deployment-to-a-hosting-provider-creating-and-installing-deployment-packages-12-of-12.md).</span></span>

## <a name="installing-sql-server-express"></a><span data-ttu-id="3c78a-138">Instalando o SQL Server Express</span><span class="sxs-lookup"><span data-stu-id="3c78a-138">Installing SQL Server Express</span></span>

<span data-ttu-id="3c78a-139">SQL Server Express é instalado automaticamente por padrão com o Visual Studio 2010, mas por padrão ele não é instalado com o Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="3c78a-139">SQL Server Express is automatically installed by default with Visual Studio 2010, but by default it is not installed with Visual Studio 2012.</span></span> <span data-ttu-id="3c78a-140">Para instalar o SQL Server 2012 Express, clique no link a seguir</span><span class="sxs-lookup"><span data-stu-id="3c78a-140">To install SQL Server 2012 Express, click the following link</span></span>

- [<span data-ttu-id="3c78a-141">SQL Server Express 2012</span><span class="sxs-lookup"><span data-stu-id="3c78a-141">SQL Server Express 2012</span></span>](https://www.microsoft.com/download/details.aspx?id=29062)

<span data-ttu-id="3c78a-142">Escolher *x64/ENU/SQLEXPR\_x64\_ENU.exe* ou *ENU/x86/SQLEXPR\_x86\_ENU.exe*e no Assistente de instalação, aceite o padrão Configurações.</span><span class="sxs-lookup"><span data-stu-id="3c78a-142">Choose *ENU/x64/SQLEXPR\_x64\_ENU.exe* or *ENU/x86/SQLEXPR\_x86\_ENU.exe*, and in the installation wizard accept the default settings.</span></span> <span data-ttu-id="3c78a-143">Para obter mais informações sobre opções de instalação, consulte [instalar o SQL Server 2012 do Assistente de instalação (instalação)](https://msdn.microsoft.com/library/ms143219.aspx).</span><span class="sxs-lookup"><span data-stu-id="3c78a-143">For more information about installation options, see [Install SQL Server 2012 from the Installation Wizard (Setup)](https://msdn.microsoft.com/library/ms143219.aspx).</span></span>

## <a name="creating-sql-server-express-databases-for-the-test-environment"></a><span data-ttu-id="3c78a-144">Criando bancos de dados do SQL Server Express para o ambiente de teste</span><span class="sxs-lookup"><span data-stu-id="3c78a-144">Creating SQL Server Express Databases for the Test Environment</span></span>

<span data-ttu-id="3c78a-145">A próxima etapa é criar a associação do ASP.NET e os bancos de dados de escola.</span><span class="sxs-lookup"><span data-stu-id="3c78a-145">The next step is to create the ASP.NET membership and School databases.</span></span>

<span data-ttu-id="3c78a-146">Dos **modo de exibição** menu, selecione **Gerenciador de servidores** (**Database Explorer** no Visual Web Developer) e, em seguida, clique com botão direito **conexões de dados**e selecione **Create New SQL Server Database**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-146">From the **View** menu select **Server Explorer** (**Database Explorer** in Visual Web Developer), and then right-click **Data Connections** and select **Create New SQL Server Database**.</span></span>

![Selecting_Create_New_SQL_Server_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image1.png)

<span data-ttu-id="3c78a-148">No **Create New SQL Server Database** caixa de diálogo, digite ". \SQLExpress" no **nome do servidor** caixa e "aspnet-Test" no **novo nome de banco de dados** caixa e, em seguida, clique em **Okey**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-148">In the **Create New SQL Server Database** dialog box, enter ".\SQLExpress" in the **Server name** box and "aspnet-Test" in the **New database name** box, then click **OK**.</span></span>

![Create_New_SQL_Server_Database_aspnet](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image2.png)

<span data-ttu-id="3c78a-150">Siga o mesmo procedimento para criar um novo banco de dados School do SQL Server Express chamado "Teste de escola".</span><span class="sxs-lookup"><span data-stu-id="3c78a-150">Follow the same procedure to create a new SQL Server Express School database named "School-Test".</span></span>

<span data-ttu-id="3c78a-151">(Você está acrescentando "Teste" para esses nomes de banco de dados porque mais tarde, você criará uma instância adicional de cada banco de dados para o ambiente de desenvolvimento, e você precisa ser capaz de diferenciar os dois conjuntos de bancos de dados.)</span><span class="sxs-lookup"><span data-stu-id="3c78a-151">(You're appending "Test" to these database names because later you'll create an additional instance of each database for the development environment, and you need to be able to differentiate the two sets of databases.)</span></span>

<span data-ttu-id="3c78a-152">**Gerenciador de servidores** agora mostra dois novos bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-152">**Server Explorer** now shows the two new databases.</span></span>

![New_databases_in_Server_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image3.png)

## <a name="creating-a-grant-script-for-the-new-databases"></a><span data-ttu-id="3c78a-154">Criando um Script de concessão para novos bancos de dados</span><span class="sxs-lookup"><span data-stu-id="3c78a-154">Creating a Grant Script for the New Databases</span></span>

<span data-ttu-id="3c78a-155">Quando o aplicativo é executado no IIS no computador de desenvolvimento, o aplicativo acessa o banco de dados usando credenciais do pool de aplicativos padrão.</span><span class="sxs-lookup"><span data-stu-id="3c78a-155">When the application runs in IIS on your development computer, the application accesses the database by using the default application pool's credentials.</span></span> <span data-ttu-id="3c78a-156">No entanto, por padrão, a identidade do pool de aplicativos não tem permissão para abrir os bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-156">However, by default, the application pool identity does not have permission to open the databases.</span></span> <span data-ttu-id="3c78a-157">Portanto, você precisa executar um script para conceder essa permissão.</span><span class="sxs-lookup"><span data-stu-id="3c78a-157">So you have to run a script to grant that permission.</span></span> <span data-ttu-id="3c78a-158">Nesta seção, você criará o script que será executado posteriormente para certificar-se de que o aplicativo pode abrir os bancos de dados quando ele é executado no IIS.</span><span class="sxs-lookup"><span data-stu-id="3c78a-158">In this section you create the script that you'll run later to make sure that the application can open the databases when it runs in IIS.</span></span>

<span data-ttu-id="3c78a-159">A solução *SolutionFiles* pasta que você criou na [implantando no ambiente de produção](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, crie um novo arquivo SQL chamado *Grant.sql*.</span><span class="sxs-lookup"><span data-stu-id="3c78a-159">In the solution's *SolutionFiles* folder that you created in the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial, create a new SQL file named *Grant.sql*.</span></span> <span data-ttu-id="3c78a-160">Copie os seguintes comandos SQL para o arquivo e, em seguida, salve e feche o arquivo:</span><span class="sxs-lookup"><span data-stu-id="3c78a-160">Copy the following SQL commands into the file, and then save and close the file:</span></span>

[!code-sql[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample1.sql)]

> [!NOTE]
> <span data-ttu-id="3c78a-161">Este script foi desenvolvido para funcionar com o SQL Server 2008 e com as configurações do IIS no Windows 7, conforme elas são especificadas neste tutorial.</span><span class="sxs-lookup"><span data-stu-id="3c78a-161">This script is designed to work with SQL Server 2008 and with the IIS settings in Windows 7 as they are specified in this tutorial.</span></span> <span data-ttu-id="3c78a-162">Se você estiver usando uma versão diferente do SQL Server ou do Windows, ou se você configurar o IIS no computador de forma diferente, as alterações a esse script podem ser necessárias.</span><span class="sxs-lookup"><span data-stu-id="3c78a-162">If you're using a different version of SQL Server or of Windows, or if you set up IIS on your computer differently, changes to this script might be required.</span></span> <span data-ttu-id="3c78a-163">Para obter mais informações sobre scripts do SQL Server, consulte [Manuais Online do SQL Server](https://go.microsoft.com/fwlink/?LinkId=132511).</span><span class="sxs-lookup"><span data-stu-id="3c78a-163">For more information about SQL Server scripts, see [SQL Server Books Online](https://go.microsoft.com/fwlink/?LinkId=132511).</span></span>

> [!NOTE] 
> 
> <span data-ttu-id="3c78a-164">**Observação de segurança** este script dá db\_permissões de proprietário para o usuário que acessa o banco de dados em tempo de execução, o que é o que você terá no ambiente de produção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-164">**Security Note** This script gives db\_owner permissions to the user that accesses the database at run time, which is what you'll have in the production environment.</span></span> <span data-ttu-id="3c78a-165">Em alguns cenários, você talvez queira especificar um usuário que tem o esquema de banco de dados completo permissões apenas para a implantação de atualização e especificar para o tempo de execução de um usuário diferente que tenha permissões apenas para ler e gravar dados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-165">In some scenarios you might want to specify a user that has full database schema update permissions only for deployment, and specify for run time a different user that has permissions only to read and write data.</span></span> <span data-ttu-id="3c78a-166">Para obter mais informações, consulte **revisar as alterações da Web. config automática para migrações do Code First** na [implantando no IIS como um ambiente de teste](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md).</span><span class="sxs-lookup"><span data-stu-id="3c78a-166">For more information, see **Reviewing the Automatic Web.config Changes for Code First Migrations** in [Deploying to IIS as a Test Environment](deployment-to-a-hosting-provider-deploying-to-iis-as-a-test-environment-5-of-12.md).</span></span>

## <a name="configuring-database-deployment-for-the-test-environment"></a><span data-ttu-id="3c78a-167">Configurando a implantação de banco de dados para o ambiente de teste</span><span class="sxs-lookup"><span data-stu-id="3c78a-167">Configuring Database Deployment for the Test Environment</span></span>

<span data-ttu-id="3c78a-168">Em seguida, você configurará o Visual Studio para que ele fará as seguintes tarefas para cada banco de dados:</span><span class="sxs-lookup"><span data-stu-id="3c78a-168">Next, you'll configure Visual Studio so that it will do the following tasks for each database:</span></span>

- <span data-ttu-id="3c78a-169">Gere um script SQL que cria a estrutura do banco de dados de origem (tabelas, colunas, restrições, etc.) no banco de dados de destino.</span><span class="sxs-lookup"><span data-stu-id="3c78a-169">Generate a SQL script that creates the source database's structure (tables, columns, constraints, etc.) in the destination database.</span></span>
- <span data-ttu-id="3c78a-170">Gere um script SQL que insere os dados do banco de dados de origem nas tabelas no banco de dados de destino.</span><span class="sxs-lookup"><span data-stu-id="3c78a-170">Generate a SQL script that inserts the source database's data into the tables in the destination database.</span></span>
- <span data-ttu-id="3c78a-171">Execute os scripts gerados e o script de concessão que você criou, no banco de dados de destino.</span><span class="sxs-lookup"><span data-stu-id="3c78a-171">Run the generated scripts, and the Grant script that you created, in the destination database.</span></span>

<span data-ttu-id="3c78a-172">Abra o **propriedades do projeto** janela e selecione o **empacotar/publicar SQL** guia.</span><span class="sxs-lookup"><span data-stu-id="3c78a-172">Open the **Project Properties** window and select the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="3c78a-173">Certifique-se de que **Active Directory (versão)** ou **Release** está selecionado no **configuração** lista suspensa.</span><span class="sxs-lookup"><span data-stu-id="3c78a-173">Make sure that **Active (Release)** or **Release** is selected in the **Configuration** drop-down list.</span></span>

<span data-ttu-id="3c78a-174">Clique em **habilitar esta página**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-174">Click **Enable this Page**.</span></span>

![Package_Publish_SQL_tab_Enable_This_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image4.png)

<span data-ttu-id="3c78a-176">O **empacotar/publicar SQL** guia normalmente está desabilitada porque especifica um método de implantação herdado.</span><span class="sxs-lookup"><span data-stu-id="3c78a-176">The **Package/Publish SQL** tab is normally disabled because it specifies a legacy deployment method.</span></span> <span data-ttu-id="3c78a-177">Na maioria dos cenários, você deve configurar a implantação de banco de dados na **publicar na Web** assistente.</span><span class="sxs-lookup"><span data-stu-id="3c78a-177">For most scenarios, you should configure database deployment in the **Publish Web** wizard.</span></span> <span data-ttu-id="3c78a-178">Migrando do SQL Server Compact para o SQL Server ou SQL Server Express é um caso especial para o qual esse método é uma boa opção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-178">Migrating from SQL Server Compact to SQL Server or SQL Server Express is a special case for which this method is a good choice.</span></span>

<span data-ttu-id="3c78a-179">Clique em **importação da Web. config**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-179">Click **Import from Web.config**.</span></span>

![Selecting_Import_from_Web.config](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image5.png)

<span data-ttu-id="3c78a-181">O Visual Studio procura cadeias de caracteres de conexão na *Web. config* arquivo, localiza um para o banco de dados de associação e outro para o banco de dados de escola e adiciona uma linha correspondente a cada cadeia de caracteres de conexão no **entradas de banco de dados**  tabela.</span><span class="sxs-lookup"><span data-stu-id="3c78a-181">Visual Studio looks for connection strings in the *Web.config* file, finds one for the membership database and one for the School database, and adds a row corresponding to each connection string in the **Database Entries** table.</span></span> <span data-ttu-id="3c78a-182">As cadeias de caracteres de conexão que ele encontra são para os bancos de dados existentes do SQL Server Compact e a próxima etapa será configurar como e onde implantar esses bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-182">The connection strings it finds are for the existing SQL Server Compact databases, and your next step will be to configure how and where to deploy these databases.</span></span>

<span data-ttu-id="3c78a-183">Você inserir configurações de implantação de banco de dados na **detalhes de entrada do banco de dados** seção a seguir os **entradas de banco de dados** tabela.</span><span class="sxs-lookup"><span data-stu-id="3c78a-183">You enter database deployment settings in the **Database Entry Details** section below the **Database Entries** table.</span></span> <span data-ttu-id="3c78a-184">As configurações mostradas na **detalhes de entrada do banco de dados** seção pertencem a que a linha na **entradas de banco de dados** tabela for selecionada, conforme mostrado na ilustração a seguir.</span><span class="sxs-lookup"><span data-stu-id="3c78a-184">The settings shown in the **Database Entry Details** section pertain to whichever row in the **Database Entries** table is selected, as shown in the following illustration.</span></span>

![Database_Entry_Details_section_of_Package_Publish_SQL_tab](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image6.png)

### <a name="configuring-deployment-settings-for-the-membership-database"></a><span data-ttu-id="3c78a-186">Definindo configurações de implantação para o banco de dados de associação</span><span class="sxs-lookup"><span data-stu-id="3c78a-186">Configuring Deployment Settings for the Membership Database</span></span>

<span data-ttu-id="3c78a-187">Selecione o **implantação DefaultConnection** linha na **entradas de banco de dados** tabela para definir as configurações que se aplicam ao banco de dados de associação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-187">Select the **DefaultConnection-Deployment** row in the **Database Entries** table in order to configure settings that apply to the membership database.</span></span>

<span data-ttu-id="3c78a-188">Na **cadeia de caracteres de Conexão para banco de dados de destino**, insira uma cadeia de caracteres de conexão que aponta para o novo SQL Server Express associação ao banco de dados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-188">In **Connection string for destination database**, enter a connection string that points to the new SQL Server Express membership database.</span></span> <span data-ttu-id="3c78a-189">Você pode obter a cadeia de caracteres de conexão que você precisa da **Gerenciador de servidores**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-189">You can get the connection string you need from **Server Explorer**.</span></span> <span data-ttu-id="3c78a-190">No **Gerenciador de servidores**, expanda **conexões de dados** e selecione o **aspnetTest** banco de dados, depois do **propriedades** cópia de janela a **Cadeia de caracteres de Conexão** valor.</span><span class="sxs-lookup"><span data-stu-id="3c78a-190">In **Server Explorer**, expand **Data Connections** and select the **aspnetTest** database, then from the **Properties** window copy the **Connection String** value.</span></span>

![aspnet_connection_string_in_Server_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image7.png)

<span data-ttu-id="3c78a-192">A mesma cadeia de conexão está reproduzida aqui:</span><span class="sxs-lookup"><span data-stu-id="3c78a-192">The same connection string is reproduced here:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample2.cmd)]

<span data-ttu-id="3c78a-193">Copie e cole essa cadeia de caracteres de conexão em **cadeia de caracteres de Conexão para banco de dados de destino** na **empacotar/publicar SQL** guia.</span><span class="sxs-lookup"><span data-stu-id="3c78a-193">Copy and paste this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="3c78a-194">Certifique-se de que **efetuar Pull de dados e/ou esquema de banco de dados existente** está selecionado.</span><span class="sxs-lookup"><span data-stu-id="3c78a-194">Make sure that **Pull data and/or schema from an existing database** is selected.</span></span> <span data-ttu-id="3c78a-195">Esse é o que faz com que os scripts SQL ser automaticamente gerado e executado no banco de dados de destino.</span><span class="sxs-lookup"><span data-stu-id="3c78a-195">This is what causes SQL scripts to be automatically generated and run in the destination database.</span></span>

<span data-ttu-id="3c78a-196">O **cadeia de caracteres de Conexão para o banco de dados de origem** valor é extraído do *Web. config* arquivo e aponta para o banco de dados do SQL Server Compact do desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="3c78a-196">The **Connection string for the source database** value is extracted from the *Web.config* file and points to the development SQL Server Compact database.</span></span> <span data-ttu-id="3c78a-197">Isso é o banco de dados de origem que será usado para gerar scripts que serão executados mais tarde no banco de dados de destino.</span><span class="sxs-lookup"><span data-stu-id="3c78a-197">This is the source database that will be used to generate the scripts that will run later in the destination database.</span></span> <span data-ttu-id="3c78a-198">Como você deseja implantar a versão de produção do banco de dados, altere "Dev.sdf aspnet" para "aspnet-Prod.sdf".</span><span class="sxs-lookup"><span data-stu-id="3c78a-198">Since you want to deploy the production version of the database, change "aspnet-Dev.sdf" to "aspnet-Prod.sdf".</span></span>

<span data-ttu-id="3c78a-199">Alteração **opções de script de banco de dados** partir **somente esquema** para **esquema e os dados**, uma vez que você deseja copiar os dados (contas de usuário e funções), bem como a estrutura de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-199">Change **Database scripting options** from **Schema Only** to **Schema and data**, since you want to copy your data (user accounts and roles) as well as the database structure.</span></span>

<span data-ttu-id="3c78a-200">Para configurar a implantação para executar os scripts de concessão que você criou anteriormente, você precisa adicioná-los para o **Scripts de banco de dados** seção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-200">To configure deployment to run the grant scripts that you created earlier, you have to add them to the **Database Scripts** section.</span></span> <span data-ttu-id="3c78a-201">Clique em **Adicionar Script**e, nas **adicionar Scripts de SQL** caixa de diálogo, navegue até a pasta onde você armazenou o script de concessão (essa é a pasta que contém seu arquivo de solução).</span><span class="sxs-lookup"><span data-stu-id="3c78a-201">Click **Add Script**, and in the **Add SQL Scripts** dialog box, navigate to the folder where you stored the grant script (this is the folder that contains your solution file).</span></span> <span data-ttu-id="3c78a-202">Selecione o arquivo chamado *Grant.sql*e clique em **abrir**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-202">Select the file named *Grant.sql*, and click **Open**.</span></span>

<span data-ttu-id="3c78a-203">[![Select_File_dialog_box_grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image9.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image8.png)</span><span class="sxs-lookup"><span data-stu-id="3c78a-203">[![Select_File_dialog_box_grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image9.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image8.png)</span></span>

<span data-ttu-id="3c78a-204">As configurações para o **implantação DefaultConnection** linha na **entradas de banco de dados** agora ser semelhante a ilustração a seguir:</span><span class="sxs-lookup"><span data-stu-id="3c78a-204">The settings for the **DefaultConnection-Deployment** row in **Database Entries** now look like the following illustration:</span></span>

![Database_Entry_Details_for_DefaultConnection_Test](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image10.png)

### <a name="configuring-deployment-settings-for-the-school-database"></a><span data-ttu-id="3c78a-206">Definindo configurações de implantação para o banco de dados de escola</span><span class="sxs-lookup"><span data-stu-id="3c78a-206">Configuring Deployment Settings for the School Database</span></span>

<span data-ttu-id="3c78a-207">Em seguida, selecione a **implantação SchoolContext** linha na **entradas de banco de dados** tabela para definir as configurações de implantação para o banco de dados de escola.</span><span class="sxs-lookup"><span data-stu-id="3c78a-207">Next, select the **SchoolContext-Deployment** row in the **Database Entries** table in order to configure deployment settings for the School database.</span></span>

<span data-ttu-id="3c78a-208">Você pode usar o mesmo método que você usou anteriormente para obter a cadeia de conexão para o novo banco de dados SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="3c78a-208">You can use the same method you used earlier to get the connection string for the new SQL Server Express database.</span></span> <span data-ttu-id="3c78a-209">Copie essa cadeia de conexão em **cadeia de caracteres de Conexão para banco de dados de destino** na **empacotar/publicar SQL** guia.</span><span class="sxs-lookup"><span data-stu-id="3c78a-209">Copy this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample3.cmd)]

<span data-ttu-id="3c78a-210">Certifique-se de que **efetuar Pull de dados e/ou esquema de banco de dados existente** está selecionado.</span><span class="sxs-lookup"><span data-stu-id="3c78a-210">Make sure that **Pull data and/or schema from an existing database** is selected.</span></span>

<span data-ttu-id="3c78a-211">O **cadeia de caracteres de Conexão para o banco de dados de origem** valor é extraído do *Web. config* arquivo e aponta para o banco de dados do SQL Server Compact do desenvolvimento.</span><span class="sxs-lookup"><span data-stu-id="3c78a-211">The **Connection string for the source database** value is extracted from the *Web.config* file and points to the development SQL Server Compact database.</span></span> <span data-ttu-id="3c78a-212">Altere "Dev.sdf escola" para "Prod.sdf de escola" para implantar a versão de produção do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-212">Change "School-Dev.sdf" to "School-Prod.sdf" to deploy the production version of the database.</span></span> <span data-ttu-id="3c78a-213">(Você nunca criou um arquivo de School Prod.sdf no aplicativo\_pasta de dados, portanto, você vai copiar esse arquivo do ambiente de teste para o aplicativo\_pasta de dados na pasta de projeto ContosoUniversity posteriormente.)</span><span class="sxs-lookup"><span data-stu-id="3c78a-213">(You never created a School-Prod.sdf file in the App\_Data folder, so you'll copy that file from the test environment to the App\_Data folder in the ContosoUniversity project folder later.)</span></span>

<span data-ttu-id="3c78a-214">Alteração **opções de script de banco de dados** à **esquema e dados**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-214">Change **Database scripting options** to **Schema and data**.</span></span>

<span data-ttu-id="3c78a-215">Você também deseja executar o script para conceder a leitura e permissão de gravação para esse banco de dados para a identidade do pool de aplicativos, portanto, adicione a *Grant.sql* arquivo de script, como você fez para o banco de dados de associação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-215">You also want to run the script to grant read and write permission for this database to the application pool identity, so add the *Grant.sql* script file as you did for the membership database.</span></span>

<span data-ttu-id="3c78a-216">Quando você terminar, as configurações o **implantação SchoolContext** linha na **entradas de banco de dados** semelhante a ilustração a seguir:</span><span class="sxs-lookup"><span data-stu-id="3c78a-216">When you're done, the settings for the **SchoolContext-Deployment** row in **Database Entries** look like the following illustration:</span></span>

![Database_Entry_Details_for_SchoolContext_Test](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image11.png)

<span data-ttu-id="3c78a-218">Salve as alterações para o **empacotar/publicar SQL** guia.</span><span class="sxs-lookup"><span data-stu-id="3c78a-218">Save the changes to the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="3c78a-219">Cópia a *School-Prod.sdf* do arquivo da *c:\inetpub\wwwroot\ContosoUniversity\App\_dados* pasta para o *aplicativo\_dados* pasta no o projeto ContosoUniversity.</span><span class="sxs-lookup"><span data-stu-id="3c78a-219">Copy the *School-Prod.sdf* file from the *c:\inetpub\wwwroot\ContosoUniversity\App\_Data* folder to the *App\_Data* folder in the ContosoUniversity project.</span></span>

### <a name="specifying-transacted-mode-for-the-grant-script"></a><span data-ttu-id="3c78a-220">Especificando o modo de transação para o Script de concessão</span><span class="sxs-lookup"><span data-stu-id="3c78a-220">Specifying Transacted Mode for the Grant Script</span></span>

<span data-ttu-id="3c78a-221">O processo de implantação gera scripts que implanta o esquema de banco de dados e os dados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-221">The deployment process generates scripts that deploy the database schema and data.</span></span> <span data-ttu-id="3c78a-222">Por padrão, esses scripts são executados em uma transação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-222">By default, these scripts run in a transaction.</span></span> <span data-ttu-id="3c78a-223">No entanto, não execute scripts personalizados (como os scripts de concessão) por padrão em uma transação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-223">However, custom scripts (like the grant scripts) by default do not run in a transaction.</span></span> <span data-ttu-id="3c78a-224">Se o processo de implantação misturar modos de transação, você poderá receber um erro de tempo limite quando os scripts são executados durante a implantação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-224">If the deployment process mixes transaction modes, you might get a timeout error when the scripts run during deployment.</span></span> <span data-ttu-id="3c78a-225">Nesta seção, você pode editar o arquivo de projeto para configurar os scripts personalizados para ser executado em uma transação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-225">In this section, you edit the project file in order to configure the custom scripts to run in a transaction.</span></span>

<span data-ttu-id="3c78a-226">Na **Gerenciador de soluções**, clique com botão direito do **ContosoUniversity** do projeto e selecione **descarregar projeto**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-226">In **Solution Explorer**, right-click the **ContosoUniversity** project and select **Unload Project**.</span></span>

![Unload_Project_in_Solution_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image12.png)

<span data-ttu-id="3c78a-228">Em seguida, clique com botão direito no projeto novamente e selecione **Editar Contosouniversity**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-228">Then right-click the project again and select **Edit ContosoUniversity.csproj**.</span></span>

![Edit_Project_in_Solution_Explorer](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image13.png)

<span data-ttu-id="3c78a-230">Editor do Visual Studio mostra o conteúdo XML do arquivo de projeto.</span><span class="sxs-lookup"><span data-stu-id="3c78a-230">The Visual Studio editor shows you the XML content of the project file.</span></span> <span data-ttu-id="3c78a-231">Observe que há várias `PropertyGroup` elementos.</span><span class="sxs-lookup"><span data-stu-id="3c78a-231">Notice that there are several `PropertyGroup` elements.</span></span> <span data-ttu-id="3c78a-232">(Na imagem, o conteúdo do `PropertyGroup` elementos foram omitidos.)</span><span class="sxs-lookup"><span data-stu-id="3c78a-232">(In the image, the contents of the `PropertyGroup` elements have been omitted.)</span></span>

![Janela do editor de arquivo de projeto](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image15.png)

<span data-ttu-id="3c78a-234">O primeiro deles, que não tem nenhum `Condition` de atributo, é para configurações que se aplicam independentemente da configuração de compilação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-234">The first one, which has no `Condition` attribute, is for settings that apply regardless of build configuration.</span></span> <span data-ttu-id="3c78a-235">Uma `PropertyGroup` elemento se aplica apenas a configuração de build de depuração (Observe o `Condition` atributo), uma é aplicada somente à configuração de build de lançamento e uma só se aplica a configuração de compilação de teste.</span><span class="sxs-lookup"><span data-stu-id="3c78a-235">One `PropertyGroup` element applies only to the Debug build configuration (note the `Condition` attribute), one applies only to the Release build configuration, and one applies only to the Test build configuration.</span></span> <span data-ttu-id="3c78a-236">Dentro de `PropertyGroup` elemento para a configuração de build de versão, você verá uma `PublishDatabaseSettings` elemento que contém as configurações que você inseriu na **empacotar/publicar SQL** guia. Há um `Object` elemento que corresponde a cada um dos scripts de concessão especificada (Observe que as duas instâncias de "Grant.sql").</span><span class="sxs-lookup"><span data-stu-id="3c78a-236">Within the `PropertyGroup` element for the Release build configuration, you'll see a `PublishDatabaseSettings` element that contains the settings you entered on the **Package/Publish SQL** tab. There is an `Object` element that corresponds to each of the grant scripts you specified (notice the two instances of "Grant.sql").</span></span> <span data-ttu-id="3c78a-237">Por padrão, o `Transacted` atributo o `Source` elemento para cada script de concessão é `False`.</span><span class="sxs-lookup"><span data-stu-id="3c78a-237">By default, the `Transacted` attribute of the `Source` element for each grant script is `False`.</span></span>

![Transacted_false](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image16.png)

<span data-ttu-id="3c78a-239">Altere o valor da `Transacted` atributo do `Source` elemento a ser `True`.</span><span class="sxs-lookup"><span data-stu-id="3c78a-239">Change the value of the `Transacted` attribute of the `Source` element to `True`.</span></span>

![Transacted_true](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image17.png)

<span data-ttu-id="3c78a-241">Salve e feche o arquivo de projeto e, em seguida, clique com botão direito no projeto no **Gerenciador de soluções** e selecione **recarregar projeto**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-241">Save and close the project file, and then right-click the project in **Solution Explorer** and select **Reload Project**.</span></span>

![Reload_project](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image18.png)

## <a name="setting-up-webconfig-transformations-for-the-connection-strings"></a><span data-ttu-id="3c78a-243">Configurando as transformações de Web. config para as cadeias de caracteres de Conexão</span><span class="sxs-lookup"><span data-stu-id="3c78a-243">Setting up Web.Config Transformations for the Connection Strings</span></span>

<span data-ttu-id="3c78a-244">Cadeias de caracteres da conexão para o SQL Express novos bancos de dados que você inseriu o **empacotar/publicar SQL** guia são usadas pela implantação da Web apenas para a atualização do banco de dados de destino durante a implantação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-244">The connection strings for the new SQL Express databases that you entered on the **Package/Publish SQL** tab are used by Web Deploy only for updating the destination database during deployment.</span></span> <span data-ttu-id="3c78a-245">Você ainda precisará configurar *Web. config* transformações para que a conexão cadeias de caracteres no implantado *Web. config* arquivo de ponto para novos bancos de dados SQL Server Express.</span><span class="sxs-lookup"><span data-stu-id="3c78a-245">You still have to set up *Web.config* transformations so that the connection strings in the deployed *Web.config* file point to the new SQL Server Express databases.</span></span> <span data-ttu-id="3c78a-246">(Quando você usa o **empacotar/publicar SQL** guia, você não pode configurar cadeias de caracteres de conexão no perfil de publicação.)</span><span class="sxs-lookup"><span data-stu-id="3c78a-246">(When you use the **Package/Publish SQL** tab, you can't configure connection strings in the publish profile.)</span></span>

<span data-ttu-id="3c78a-247">Abra *Web.Test.config* e substitua o `connectionStrings` elemento com o `connectionStrings` elemento no exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="3c78a-247">Open *Web.Test.config* and replace the `connectionStrings` element with the `connectionStrings` element in the following example.</span></span> <span data-ttu-id="3c78a-248">(Certifique-se de que copiar apenas o elemento connectionStrings, não o código ao redor é mostrado aqui para fornecer contexto.)</span><span class="sxs-lookup"><span data-stu-id="3c78a-248">(Make sure you only copy the connectionStrings element, not the surrounding code that is shown here to provide context.)</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample4.xml?highlight=2-11)]

<span data-ttu-id="3c78a-249">Esse código faz com que o `connectionString` e `providerName` atributos de cada `add` elemento a ser substituído no implantado *Web. config* arquivo.</span><span class="sxs-lookup"><span data-stu-id="3c78a-249">This code causes the `connectionString` and `providerName` attributes of each `add` element to be replaced in the deployed *Web.config* file.</span></span> <span data-ttu-id="3c78a-250">Essas cadeias de caracteres de conexão não são idênticas aos que você inseriu na **empacotar/publicar SQL** guia. A configuração de "MultipleActiveResultSets = True" foi adicionada a eles porque ela é necessária para o Entity Framework e os provedores universais.</span><span class="sxs-lookup"><span data-stu-id="3c78a-250">These connection strings are not identical to the ones you entered in the **Package/Publish SQL** tab. The setting "MultipleActiveResultSets=True" has been added to them because it's required for the Entity Framework and the Universal Providers.</span></span>

## <a name="installing-sql-server-compact"></a><span data-ttu-id="3c78a-251">Instalando o SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="3c78a-251">Installing SQL Server Compact</span></span>

<span data-ttu-id="3c78a-252">O pacote do SqlServerCompact NuGet fornece o banco de dados do SQL Server Compact assemblies de mecanismo para o aplicativo Contoso University.</span><span class="sxs-lookup"><span data-stu-id="3c78a-252">The SqlServerCompact NuGet package provides the SQL Server Compact database engine assemblies for the Contoso University application.</span></span> <span data-ttu-id="3c78a-253">Mas agora não é o aplicativo, mas implantação da Web que deve ser capaz de ler os bancos de dados do SQL Server Compact, para criar scripts para serem executados nos bancos de dados do SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3c78a-253">But now it is not the application but Web Deploy that must be able to read the SQL Server Compact databases, in order to create scripts to run in the SQL Server databases.</span></span> <span data-ttu-id="3c78a-254">Para habilitar a implantação da Web ler bancos de dados do SQL Server Compact, instale o SQL Server Compact no computador de desenvolvimento usando o link a seguir: [Microsoft SQL Server Compact 4.0](https://www.microsoft.com/downloads/details.aspx?FamilyID=15F7C9B3-A150-4AD2-823E-E4E0DCF85DF6).</span><span class="sxs-lookup"><span data-stu-id="3c78a-254">To enable Web Deploy to read SQL Server Compact databases, install SQL Server Compact on the development computer by using the following link: [Microsoft SQL Server Compact 4.0](https://www.microsoft.com/downloads/details.aspx?FamilyID=15F7C9B3-A150-4AD2-823E-E4E0DCF85DF6).</span></span>

## <a name="deploying-to-the-test-environment"></a><span data-ttu-id="3c78a-255">Implantando no ambiente de teste</span><span class="sxs-lookup"><span data-stu-id="3c78a-255">Deploying to the Test Environment</span></span>

<span data-ttu-id="3c78a-256">Para publicar no ambiente de teste, você precisa criar um perfil de publicação que está configurado para usar o **empacotar/publicar SQL** guia para o banco de dados de publicação em vez das configurações de banco de dados de perfil de publicação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-256">In order to publish to the Test environment, you have to create a publish profile that is configured to use the **Package/Publish SQL** tab for database publishing instead of the publish profile database settings.</span></span>

<span data-ttu-id="3c78a-257">Primeiro, exclua o perfil de teste existente.</span><span class="sxs-lookup"><span data-stu-id="3c78a-257">First, delete the existing Test profile.</span></span>

<span data-ttu-id="3c78a-258">Na **Gerenciador de soluções**, clique com botão direito no projeto ContosoUniversity e clique em **publicar**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-258">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="3c78a-259">Selecione o **perfil** guia.</span><span class="sxs-lookup"><span data-stu-id="3c78a-259">Select the **Profile** tab.</span></span>

<span data-ttu-id="3c78a-260">Clique em **gerenciar perfis**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-260">Click **Manage Profiles**.</span></span>

<span data-ttu-id="3c78a-261">Selecione **teste**, clique em **remover**e, em seguida, clique em **fechar**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-261">Select **Test**, click **Remove**, and then click **Close**.</span></span>

<span data-ttu-id="3c78a-262">Fechar o **publicar na Web** Assistente para salvar essa alteração.</span><span class="sxs-lookup"><span data-stu-id="3c78a-262">Close the **Publish Web** wizard to save this change.</span></span>

<span data-ttu-id="3c78a-263">Em seguida, crie um novo perfil de teste e usá-lo para publicar o projeto.</span><span class="sxs-lookup"><span data-stu-id="3c78a-263">Next, create a new Test profile and use it to publish the project.</span></span>

<span data-ttu-id="3c78a-264">Na **Gerenciador de soluções**, clique com botão direito no projeto ContosoUniversity e clique em **publicar**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-264">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="3c78a-265">Selecione o **perfil** guia.</span><span class="sxs-lookup"><span data-stu-id="3c78a-265">Select the **Profile** tab.</span></span>

<span data-ttu-id="3c78a-266">Selecione **&lt;novo... &gt;** na lista suspensa lista e digite "Test" como o nome do perfil.</span><span class="sxs-lookup"><span data-stu-id="3c78a-266">Select **&lt;New...&gt;** from the drop-down list, and enter "Test" as the profile name.</span></span>

<span data-ttu-id="3c78a-267">No **URL do serviço** , digite *localhost*.</span><span class="sxs-lookup"><span data-stu-id="3c78a-267">In the **Service URL** box, enter *localhost*.</span></span>

<span data-ttu-id="3c78a-268">No **Site/aplicativo** , digite *Default Web Site/ContosoUniversity*.</span><span class="sxs-lookup"><span data-stu-id="3c78a-268">In the **Site/application** box, enter *Default Web Site/ContosoUniversity*.</span></span>

<span data-ttu-id="3c78a-269">No **URL de destino** , digite `http://localhost/ContosoUniversity/`.</span><span class="sxs-lookup"><span data-stu-id="3c78a-269">In the **Destination URL** box, enter `http://localhost/ContosoUniversity/`.</span></span>

<span data-ttu-id="3c78a-270">Clique em **Avançar**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-270">Click **Next**.</span></span>

<span data-ttu-id="3c78a-271">O **as configurações** guia avisa que o **empacotar/publicar SQL** guia tiver sido configurada, e fornece uma oportunidade para substituí-las ao clicar em Habilitar novo melhorias de publicação do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-271">The **Settings** tab warns you that the **Package/Publish SQL** tab has been configured, and it gives you an opportunity to override them by clicking enable the new database publishing improvements.</span></span> <span data-ttu-id="3c78a-272">Para essa implantação, você não deseja substituir a **empacotar/publicar SQL** guia Configurações, então basta clicar em **próxima**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-272">For this deployment you don't want to override the **Package/Publish SQL** tab settings, so just click **Next**.</span></span>

![Publish_Web_wizard_Settings_tab_Migrate](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image19.png)

<span data-ttu-id="3c78a-274">Uma mensagem na **versão prévia** guia indica que **nenhum banco de dados é selecionados para publicação**, mas isso apenas significa que a publicação de banco de dados não está configurada no perfil de publicação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-274">A message on the **Preview** tab indicates that **No databases are selected to publish**, but this only means that database publishing is not configured in the publish profile.</span></span>

<span data-ttu-id="3c78a-275">Clique em **Publicar**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-275">Click **Publish**.</span></span>

![Publish_Web_wizard_Preview_tab_Migrate](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image20.png)

<span data-ttu-id="3c78a-277">Visual Studio implanta o aplicativo e abre o navegador para a home page do site no ambiente de teste.</span><span class="sxs-lookup"><span data-stu-id="3c78a-277">Visual Studio deploys the application and opens the browser to the home page of the site in the test environment.</span></span> <span data-ttu-id="3c78a-278">Execute a página instrutores para ver o que ele exibe os mesmos dados que você viu anteriormente.</span><span class="sxs-lookup"><span data-stu-id="3c78a-278">Run the Instructors page to see that it displays the same data that you saw earlier.</span></span> <span data-ttu-id="3c78a-279">Execute o **adicionar alunos** página, adicione um novo aluno e, em seguida, exibir o novo aluno na **alunos** página.</span><span class="sxs-lookup"><span data-stu-id="3c78a-279">Run the **Add Students** page, add a new student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="3c78a-280">Isso confirma que você pode atualizar o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-280">This verifies that the you can update the database.</span></span> <span data-ttu-id="3c78a-281">Selecione o **atualização créditos** página (você precisará fazer logon) para verificar se o banco de dados de associação foi implantado e você tem acesso a ele.</span><span class="sxs-lookup"><span data-stu-id="3c78a-281">Select the **Update Credits** page (you'll need to log in) to verify that the membership database was deployed and you have access to it.</span></span>

## <a name="creating-a-sql-server-database-for-the-production-environment"></a><span data-ttu-id="3c78a-282">Criando um banco de dados do SQL Server para o ambiente de produção</span><span class="sxs-lookup"><span data-stu-id="3c78a-282">Creating a SQL Server Database for the Production Environment</span></span>

<span data-ttu-id="3c78a-283">Agora que você implantou o ambiente de teste, você está pronto para configurar a implantação para produção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-283">Now that you've deployed to the test environment, you're ready to set up deployment to production.</span></span> <span data-ttu-id="3c78a-284">Você começa como você fez para o ambiente de teste, criando um banco de dados para implantar.</span><span class="sxs-lookup"><span data-stu-id="3c78a-284">You begin as you did for the test environment, by creating a database to deploy to.</span></span> <span data-ttu-id="3c78a-285">Como você se lembra da visão geral, o plano de hospedagem Cytanium Lite permite apenas um único banco de dados de SQL Server, de modo que você irá configurar somente um banco de dados, não dois.</span><span class="sxs-lookup"><span data-stu-id="3c78a-285">As you recall from the Overview, the Cytanium Lite hosting plan only allows a single SQL Server database, so you will set up only one database, not two.</span></span> <span data-ttu-id="3c78a-286">Todas as tabelas e os dados da associação e os bancos de dados School SQL Server Compact serão implantadas em um banco de dados do SQL Server em produção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-286">All of the tables and data from the membership and School SQL Server Compact databases will be deployed into one SQL Server database in production.</span></span>

<span data-ttu-id="3c78a-287">Vá para o painel de controle Cytanium em [ http://panel.cytanium.com ](http://panel.cytanium.com).</span><span class="sxs-lookup"><span data-stu-id="3c78a-287">Go to the Cytanium control panel at [http://panel.cytanium.com](http://panel.cytanium.com).</span></span> <span data-ttu-id="3c78a-288">Mantenha o mouse sobre **bancos de dados** e, em seguida, clique em **SQL Server 2008**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-288">Hold the mouse over **Databases** and then click **SQL Server 2008**.</span></span>

<span data-ttu-id="3c78a-289">[![Selecting_Databases_in_Control_Panel](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image22.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="3c78a-289">[![Selecting_Databases_in_Control_Panel](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image22.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image21.png)</span></span>

<span data-ttu-id="3c78a-290">No **SQL Server 2008** , clique em **criar banco de dados**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-290">In the **SQL Server 2008** page, click **Create Database**.</span></span>

<span data-ttu-id="3c78a-291">[![Selecting_Create_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image24.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image23.png)</span><span class="sxs-lookup"><span data-stu-id="3c78a-291">[![Selecting_Create_Database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image24.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image23.png)</span></span>

<span data-ttu-id="3c78a-292">Nomeie o banco de dados "School" e clique em **salvar**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-292">Name the database "School" and click **Save**.</span></span> <span data-ttu-id="3c78a-293">(A página automaticamente adiciona o prefixo "contosou", portanto, o nome efetivo será "contosouSchool".)</span><span class="sxs-lookup"><span data-stu-id="3c78a-293">(The page automatically adds the prefix "contosou", so the effective name will be "contosouSchool".)</span></span>

<span data-ttu-id="3c78a-294">[![Naming_the_database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image26.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="3c78a-294">[![Naming_the_database](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image26.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image25.png)</span></span>

<span data-ttu-id="3c78a-295">Na mesma página, clique em **criar usuário**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-295">On the same page, click **Create User**.</span></span> <span data-ttu-id="3c78a-296">Em servidores do Cytanium, em vez de usar segurança integrada do Windows e permitindo que a identidade do pool de aplicativo abra seu banco de dados, você criará um usuário que tem autoridade para abrir o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-296">On Cytanium's servers, rather than using integrated Windows security and letting the application pool identity open your database, you'll create a user that has authority to open your database.</span></span> <span data-ttu-id="3c78a-297">Você adicionará as credenciais do usuário para as cadeias de caracteres de conexão que vão na produção *Web. config* arquivo.</span><span class="sxs-lookup"><span data-stu-id="3c78a-297">You'll add the user's credentials to the connection strings that go in the production *Web.config* file.</span></span> <span data-ttu-id="3c78a-298">Nesta etapa, você cria essas credenciais.</span><span class="sxs-lookup"><span data-stu-id="3c78a-298">In this step you create those credentials.</span></span>

<span data-ttu-id="3c78a-299">[![Creating_a_database_user](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image28.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image27.png)</span><span class="sxs-lookup"><span data-stu-id="3c78a-299">[![Creating_a_database_user](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image28.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image27.png)</span></span>

<span data-ttu-id="3c78a-300">Preencha os campos obrigatórios na **propriedades do usuário SQL** página:</span><span class="sxs-lookup"><span data-stu-id="3c78a-300">Fill in the required fields in the **SQL User Properties** page:</span></span>

- <span data-ttu-id="3c78a-301">Insira "ContosoUniversityUser" como o nome.</span><span class="sxs-lookup"><span data-stu-id="3c78a-301">Enter "ContosoUniversityUser" as the name.</span></span>
- <span data-ttu-id="3c78a-302">Insira uma senha.</span><span class="sxs-lookup"><span data-stu-id="3c78a-302">Enter a password.</span></span>
- <span data-ttu-id="3c78a-303">Selecione **contosouSchool** como banco de dados padrão.</span><span class="sxs-lookup"><span data-stu-id="3c78a-303">Select **contosouSchool** as the default database.</span></span>
- <span data-ttu-id="3c78a-304">Selecione o **contosouSchool** caixa de seleção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-304">Select the **contosouSchool** check box.</span></span>

<span data-ttu-id="3c78a-305">[![SQL_User_Properties_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image30.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image29.png)</span><span class="sxs-lookup"><span data-stu-id="3c78a-305">[![SQL_User_Properties_page](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image30.png)](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image29.png)</span></span>

## <a name="configuring-database-deployment-for-the-production-environment"></a><span data-ttu-id="3c78a-306">Configurando a implantação de banco de dados para o ambiente de produção</span><span class="sxs-lookup"><span data-stu-id="3c78a-306">Configuring Database Deployment for the Production Environment</span></span>

<span data-ttu-id="3c78a-307">Agora você está pronto para definir as configurações de implantação de banco de dados na **empacotar/publicar SQL** guia, como fez anteriormente para o ambiente de teste.</span><span class="sxs-lookup"><span data-stu-id="3c78a-307">Now you're ready to set up database deployment settings in the **Package/Publish SQL** tab, as you did earlier for the test environment.</span></span>

<span data-ttu-id="3c78a-308">Abra o **propriedades do projeto** janela, selecione a **empacotar/publicar SQL** guia e certifique-se de que **ativo (lançamento)** ou **versão** é selecionado na **configuração** lista suspensa.</span><span class="sxs-lookup"><span data-stu-id="3c78a-308">Open the **Project Properties** window, select the **Package/Publish SQL** tab, and make sure that **Active (Release)** or **Release** is selected in the **Configuration** drop-down list.</span></span>

<span data-ttu-id="3c78a-309">Quando você configura as configurações de implantação para cada banco de dados, a principal diferença entre o que fazer para ambientes de produção e de teste está em como você pode configurar cadeias de caracteres de conexão.</span><span class="sxs-lookup"><span data-stu-id="3c78a-309">When you configure deployment settings for each database, the key difference between what you do for production and test environments is in how you configure connection strings.</span></span> <span data-ttu-id="3c78a-310">Para o ambiente de teste que você inseriu cadeias de conexão de banco de dados de destino diferente, mas o ambiente de produção a cadeia de caracteres de conexão de destino será o mesmo para ambos os bancos de dados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-310">For the test environment you entered different destination database connection strings, but for the production environment the destination connection string will be the same for both databases.</span></span> <span data-ttu-id="3c78a-311">Isso ocorre porque você está implantando bancos de dados em um banco de dados em produção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-311">This is because you are deploying both databases to one database in production.</span></span>

### <a name="configuring-deployment-settings-for-the-membership-database"></a><span data-ttu-id="3c78a-312">Definindo configurações de implantação para o banco de dados de associação</span><span class="sxs-lookup"><span data-stu-id="3c78a-312">Configuring Deployment Settings for the Membership Database</span></span>

<span data-ttu-id="3c78a-313">Para definir as configurações que se aplicam ao banco de dados de associação, selecione a **implantação DefaultConnection** linha na **entradas de banco de dados** tabela.</span><span class="sxs-lookup"><span data-stu-id="3c78a-313">To configure settings that apply to the membership database, select the **DefaultConnection-Deployment** row in the **Database Entries** table.</span></span>

<span data-ttu-id="3c78a-314">Na **cadeia de caracteres de Conexão para banco de dados de destino**, insira uma cadeia de caracteres de conexão que aponta para o banco de dados de SQL Server produção novo que você acabou de criar.</span><span class="sxs-lookup"><span data-stu-id="3c78a-314">In **Connection string for destination database**, enter a connection string that points to the new production SQL Server database that you just created.</span></span> <span data-ttu-id="3c78a-315">Você pode obter a cadeia de caracteres de conexão de seu email de boas-vinda.</span><span class="sxs-lookup"><span data-stu-id="3c78a-315">You can get the connection string from your welcome email.</span></span> <span data-ttu-id="3c78a-316">A parte relevante do email contém a cadeia de conexão de exemplo a seguir:</span><span class="sxs-lookup"><span data-stu-id="3c78a-316">The relevant part of the email contains the following sample connection string:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample5.cmd)]

<span data-ttu-id="3c78a-317">Depois que você substitua as três variáveis, a cadeia de caracteres de conexão que você precisa se parece com este exemplo:</span><span class="sxs-lookup"><span data-stu-id="3c78a-317">After you replace the three variables, the connection string you need looks like this example:</span></span>

[!code-console[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample6.cmd)]

<span data-ttu-id="3c78a-318">Copie e cole essa cadeia de caracteres de conexão em **cadeia de caracteres de Conexão para banco de dados de destino** na **empacotar/publicar SQL** guia.</span><span class="sxs-lookup"><span data-stu-id="3c78a-318">Copy and paste this connection string into **Connection string for destination database** in the **Package/Publish SQL** tab.</span></span>

<span data-ttu-id="3c78a-319">Certifique-se de que **efetuar Pull de dados e/ou esquema de banco de dados existente** ainda selecionado, e o **opções de script de banco de dados** ainda **esquema e dados**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-319">Make sure that **Pull data and/or schema from an existing database** is still selected, and that **Database scripting options** is still **Schema and Data**.</span></span>

<span data-ttu-id="3c78a-320">No **Scripts de banco de dados** caixa, desmarque a caixa de seleção ao lado do script Grant.sql.</span><span class="sxs-lookup"><span data-stu-id="3c78a-320">In the **Database Scripts** box, clear the check box next to the Grant.sql script.</span></span>

![Disable_Grant_script](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/_static/image31.png)

### <a name="configuring-deployment-settings-for-the-school-database"></a><span data-ttu-id="3c78a-322">Definindo configurações de implantação para o banco de dados de escola</span><span class="sxs-lookup"><span data-stu-id="3c78a-322">Configuring Deployment Settings for the School Database</span></span>

<span data-ttu-id="3c78a-323">Em seguida, selecione a **implantação SchoolContext** linha na **entradas de banco de dados** tabela para definir as configurações de banco de dados de escola.</span><span class="sxs-lookup"><span data-stu-id="3c78a-323">Next, select the **SchoolContext-Deployment** row in the **Database Entries** table in order to configure the School database settings.</span></span>

<span data-ttu-id="3c78a-324">Copie a mesma cadeia de conexão em **cadeia de caracteres de Conexão para banco de dados de destino** que você copiou para o campo para o banco de dados de associação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-324">Copy the same connection string into **Connection string for destination database** that you copied into that field for the membership database.</span></span>

<span data-ttu-id="3c78a-325">Certifique-se de que **efetuar Pull de dados e/ou esquema de banco de dados existente** ainda selecionado, e o **opções de script de banco de dados** ainda **esquema e dados**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-325">Make sure that **Pull data and/or schema from an existing database** is still selected, and that **Database scripting options** is still **Schema and Data**.</span></span>

<span data-ttu-id="3c78a-326">No **Scripts de banco de dados** caixa, desmarque a caixa de seleção ao lado do script Grant.sql.</span><span class="sxs-lookup"><span data-stu-id="3c78a-326">In the **Database Scripts** box, clear the check box next to the Grant.sql script.</span></span>

<span data-ttu-id="3c78a-327">Salve as alterações para o **empacotar/publicar SQL** guia.</span><span class="sxs-lookup"><span data-stu-id="3c78a-327">Save the changes to the **Package/Publish SQL** tab.</span></span>

## <a name="setting-up-webconfig-transforms-for-the-connection-strings-to-production-databases"></a><span data-ttu-id="3c78a-328">Transformações de configuração Web. config para as cadeias de Conexão para bancos de dados de produção</span><span class="sxs-lookup"><span data-stu-id="3c78a-328">Setting Up Web.Config Transforms for the Connection Strings to Production Databases</span></span>

<span data-ttu-id="3c78a-329">Em seguida, você configurará *Web. config* transformações para que a conexão cadeias de caracteres no implantado *Web. config* arquivo para apontar para o novo banco de dados de produção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-329">Next, you'll set up *Web.config* transformations so that the connection strings in the deployed *Web.config* file to point to the new production database.</span></span> <span data-ttu-id="3c78a-330">A cadeia de caracteres de conexão que você inseriu na **empacotar/publicar SQL** guia de implantação da Web para usar é o mesmo que o aplicativo precisa usar, exceto para a adição do `MultipleResultSets` opção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-330">The connection string that you entered on the **Package/Publish SQL** tab for Web Deploy to use is the same as the one the application needs to use, except for the addition of the `MultipleResultSets` option.</span></span>

<span data-ttu-id="3c78a-331">Abra *Web.Production.config* e substitua o `connectionStrings` elemento com um `connectionStrings` elemento que se parece com o exemplo a seguir.</span><span class="sxs-lookup"><span data-stu-id="3c78a-331">Open *Web.Production.config* and replace the `connectionStrings` element with a `connectionStrings` element that looks like the following example.</span></span> <span data-ttu-id="3c78a-332">(Apenas copiar o `connectionStrings` elemento, não as marcas ao redor que são fornecidas para mostrar o contexto.)</span><span class="sxs-lookup"><span data-stu-id="3c78a-332">(Only copy the `connectionStrings` element, not the surrounding tags that are provided to show the context.)</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample7.xml?highlight=2-11)]

<span data-ttu-id="3c78a-333">Às vezes você ver o aviso que diz a você para sempre criptografar cadeias de caracteres de conexão na *Web. config* arquivo.</span><span class="sxs-lookup"><span data-stu-id="3c78a-333">You sometimes see advice that tells you to always encrypt connection strings in the *Web.config* file.</span></span> <span data-ttu-id="3c78a-334">Isso pode ser apropriado se você estivesse implantando a servidores na rede da sua própria empresa.</span><span class="sxs-lookup"><span data-stu-id="3c78a-334">This might be appropriate if you were deploying to servers on your own company's network.</span></span> <span data-ttu-id="3c78a-335">No entanto, quando você estiver implantando em um ambiente de hospedagem compartilhado, você confia em práticas de segurança do provedor de hospedagem e não é necessário ou prático criptografar as cadeias de caracteres de conexão.</span><span class="sxs-lookup"><span data-stu-id="3c78a-335">When you are deploying to a shared hosting environment, though, you're trusting the security practices of the hosting provider, and it's not necessary or practical to encrypt the connection strings.</span></span>

## <a name="deploying-to-the-production-environment"></a><span data-ttu-id="3c78a-336">Implantando no ambiente de produção</span><span class="sxs-lookup"><span data-stu-id="3c78a-336">Deploying to the Production Environment</span></span>

<span data-ttu-id="3c78a-337">Agora você está pronto para implantar em produção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-337">Now you're ready to deploy to production.</span></span> <span data-ttu-id="3c78a-338">A implantação da Web lerá os bancos de dados do SQL Server Compact no seu projeto *App\_dados* pasta e recrie todas as suas tabelas e os dados do banco de dados do SQL Server de produção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-338">Web Deploy will read the SQL Server Compact databases in your project's *App\_Data* folder and re-create all of their tables and data in the production SQL Server database.</span></span> <span data-ttu-id="3c78a-339">Para publicar usando o **empacotar/Publicar Web** configurações da guia, você precisa criar um novo perfil de publicação para produção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-339">In order to publish by using the **Package/Publish Web** tab settings, you have to create a new publish profile for production.</span></span>

<span data-ttu-id="3c78a-340">Primeiro, exclua o perfil de produção existente como fez anteriormente o perfil de teste.</span><span class="sxs-lookup"><span data-stu-id="3c78a-340">First, delete the existing Production profile as you did the Test profile earlier.</span></span>

<span data-ttu-id="3c78a-341">Na **Gerenciador de soluções**, clique com botão direito no projeto ContosoUniversity e clique em **publicar**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-341">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="3c78a-342">Selecione o **perfil** guia.</span><span class="sxs-lookup"><span data-stu-id="3c78a-342">Select the **Profile** tab.</span></span>

<span data-ttu-id="3c78a-343">Clique em **gerenciar perfis**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-343">Click **Manage Profiles**.</span></span>

<span data-ttu-id="3c78a-344">Selecione **produção**, clique em **remover**e, em seguida, clique em **fechar**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-344">Select **Production**, click **Remove**, and then click **Close**.</span></span>

<span data-ttu-id="3c78a-345">Fechar o **publicar na Web** Assistente para salvar essa alteração.</span><span class="sxs-lookup"><span data-stu-id="3c78a-345">Close the **Publish Web** wizard to save this change.</span></span>

<span data-ttu-id="3c78a-346">Em seguida, crie um novo perfil de produção e usá-lo para publicar o projeto.</span><span class="sxs-lookup"><span data-stu-id="3c78a-346">Next, create a new Production profile and use it to publish the project.</span></span>

<span data-ttu-id="3c78a-347">Na **Gerenciador de soluções**, clique com botão direito no projeto ContosoUniversity e clique em **publicar**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-347">In **Solution Explorer**, right-click the ContosoUniversity project, and click **Publish**.</span></span>

<span data-ttu-id="3c78a-348">Selecione o **perfil** guia.</span><span class="sxs-lookup"><span data-stu-id="3c78a-348">Select the **Profile** tab.</span></span>

<span data-ttu-id="3c78a-349">Clique em **importação**e selecione o arquivo. publishsettings baixado anteriormente.</span><span class="sxs-lookup"><span data-stu-id="3c78a-349">Click **Import**, and select the .publishsettings file that you downloaded earlier.</span></span>

<span data-ttu-id="3c78a-350">Sobre o **Conexão** , altere o **URL de destino** para a URL correta temporária, que neste exemplo é http://contosouniversity.com.vserver01.cytanium.com.</span><span class="sxs-lookup"><span data-stu-id="3c78a-350">On the **Connection** tab, change the **Destination URL** to the correct temporary URL, which in this example is http://contosouniversity.com.vserver01.cytanium.com.</span></span>

<span data-ttu-id="3c78a-351">Renomear o perfil para a produção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-351">Rename the profile to Production.</span></span> <span data-ttu-id="3c78a-352">(Selecione o **perfil** guia e clique em **gerenciar perfis** para fazer isso).</span><span class="sxs-lookup"><span data-stu-id="3c78a-352">(Select the **Profile** tab and click **Manage Profiles** to do that).</span></span>

<span data-ttu-id="3c78a-353">Fechar o **publicar na Web** Assistente para salvar suas alterações.</span><span class="sxs-lookup"><span data-stu-id="3c78a-353">Close the **Publish Web** wizard to save your changes.</span></span>

<span data-ttu-id="3c78a-354">Em um aplicativo real em que o banco de dados estava sendo atualizado em produção, você deveria fazer duas etapas adicionais agora antes de publicar:</span><span class="sxs-lookup"><span data-stu-id="3c78a-354">In a real application in which the database was being updated in production, you would do two additional steps now before you publish:</span></span>

1. <span data-ttu-id="3c78a-355">Carregue *app\_offline.htm*, conforme mostrado no [implantando no ambiente de produção](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial.</span><span class="sxs-lookup"><span data-stu-id="3c78a-355">Upload *app\_offline.htm*, as shown in the [Deploying to the Production Environment](deployment-to-a-hosting-provider-deploying-to-the-production-environment-7-of-12.md) tutorial.</span></span>
2. <span data-ttu-id="3c78a-356">Use o **Gerenciador de arquivos** recurso do painel de controle Cytanium para copiar a *aspnet Prod.sdf* e *School-Prod.sdf* arquivos do site de produção para o *App\_dados* pasta do projeto ContosoUniversity.</span><span class="sxs-lookup"><span data-stu-id="3c78a-356">Use the **File Manager** feature of the Cytanium control panel to copy the *aspnet-Prod.sdf* and *School-Prod.sdf* files from the production site to the *App\_Data* folder of the ContosoUniversity project.</span></span> <span data-ttu-id="3c78a-357">Isso garante que os dados que você está implantando para o novo banco de dados do SQL Server incluem as atualizações mais recentes feitas por seu site de produção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-357">This ensures that the data you're deploying to the new SQL Server database includes the latest updates made by your production website.</span></span>

<span data-ttu-id="3c78a-358">No **publicação Web com um clique em** barra de ferramentas, certifique-se de que o **produção** perfil está selecionado e, em seguida, clique em **publicar**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-358">In the **Web One Click Publish** toolbar, make sure that the **Production** profile is selected, and then click **Publish**.</span></span>

<span data-ttu-id="3c78a-359">Se você carregou <em>app\_offline.htm</em> antes de publicar, você deve usar o <strong>Gerenciador de arquivos</strong> utilitário no painel de controle Cytanium excluir <em>aplicativo\_offline.</em> htm antes de testar.</span><span class="sxs-lookup"><span data-stu-id="3c78a-359">If you uploaded <em>app\_offline.htm</em> before publishing, you have to use the <strong>File Manager</strong> utility in the Cytanium control panel to delete <em>app\_offline.</em>htm before you test.</span></span> <span data-ttu-id="3c78a-360">Também é possível ao mesmo tempo excluir o <em>sdf</em> arquivos da <em>App\_dados</em> pasta.</span><span class="sxs-lookup"><span data-stu-id="3c78a-360">You can also at the same time delete the <em>.sdf</em> files from the <em>App\_Data</em> folder.</span></span>

<span data-ttu-id="3c78a-361">Agora você pode abrir um navegador e vá para a URL do seu site público para testar o aplicativo da mesma maneira que você fez após a implantação para o ambiente de teste.</span><span class="sxs-lookup"><span data-stu-id="3c78a-361">You can now open a browser and go to the URL of your public site to test the application the same way you did after deploying to the test environment.</span></span>

## <a name="switching-to-sql-server-express-localdb-in-development"></a><span data-ttu-id="3c78a-362">Alternar para o SQL Server Express LocalDB no desenvolvimento</span><span class="sxs-lookup"><span data-stu-id="3c78a-362">Switching to SQL Server Express LocalDB in Development</span></span>

<span data-ttu-id="3c78a-363">Como foi explicado na visão geral, é geralmente melhor usar o mesmo mecanismo de banco de dados no desenvolvimento do que você usar em teste e produção.</span><span class="sxs-lookup"><span data-stu-id="3c78a-363">As was explained in the Overview, it's generally best to use the same database engine in development that you use in test and production.</span></span> <span data-ttu-id="3c78a-364">(Lembre-se de que a vantagem de usar o SQL Server Express em desenvolvimento é que o banco de dados funcionam da mesma forma em seus ambientes de desenvolvimento, teste e produção.) Nesta seção você configurará o projeto ContosoUniversity para usar o SQL Server Express LocalDB ao executar o aplicativo do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="3c78a-364">(Remember that the advantage to using SQL Server Express in development is that the database will work the same in your development, test, and production environments.) In this section you'll set up the ContosoUniversity project to use SQL Server Express LocalDB when you run the application from Visual Studio.</span></span>

<span data-ttu-id="3c78a-365">A maneira mais simples para realizar essa migração é permitir que o Code First e o sistema de associação criará os dois novos bancos de dados de desenvolvimento para você.</span><span class="sxs-lookup"><span data-stu-id="3c78a-365">The simplest way to perform this migration is to let Code First and the membership system create both new development databases for you.</span></span> <span data-ttu-id="3c78a-366">Usando esse método para migrar exige três etapas:</span><span class="sxs-lookup"><span data-stu-id="3c78a-366">Using this method to migrate requires three steps:</span></span>

1. <span data-ttu-id="3c78a-367">Altere as cadeias de caracteres de conexão para especificar novos bancos de dados do SQL Express LocalDB.</span><span class="sxs-lookup"><span data-stu-id="3c78a-367">Change the connection strings to specify new SQL Express LocalDB databases.</span></span>
2. <span data-ttu-id="3c78a-368">Execute a ferramenta de administração de Site da Web para criar um usuário de administrador.</span><span class="sxs-lookup"><span data-stu-id="3c78a-368">Run the Web Site Administration Tool to create an administrator user.</span></span> <span data-ttu-id="3c78a-369">Isso cria o banco de dados de associação.</span><span class="sxs-lookup"><span data-stu-id="3c78a-369">This creates the membership database.</span></span>
3. <span data-ttu-id="3c78a-370">Use o comando de atualização de banco de dados de migrações do Code First para criar e propagar o banco de dados do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="3c78a-370">Use the Code First Migrations update-database command to create and seed the application database.</span></span>

### <a name="updating-connection-strings-in-the-webconfig-file"></a><span data-ttu-id="3c78a-371">Atualizando cadeias de Conexão no arquivo Web. config</span><span class="sxs-lookup"><span data-stu-id="3c78a-371">Updating Connection Strings in the Web.config file</span></span>

<span data-ttu-id="3c78a-372">Abra o *Web. config* do arquivo e substitua o `connectionStrings` elemento com o código a seguir:</span><span class="sxs-lookup"><span data-stu-id="3c78a-372">Open the *Web.config* file and replace the `connectionStrings` element with the following code:</span></span>

[!code-xml[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample8.xml)]

### <a name="creating-the-membership-database"></a><span data-ttu-id="3c78a-373">Criando o banco de dados de associação</span><span class="sxs-lookup"><span data-stu-id="3c78a-373">Creating the Membership Database</span></span>

<span data-ttu-id="3c78a-374">Na **Gerenciador de soluções**, selecione o projeto ContosoUniversity e, em seguida, clique em **configuração do ASP.NET** no **projeto** menu.</span><span class="sxs-lookup"><span data-stu-id="3c78a-374">In **Solution Explorer**, select the ContosoUniversity project, and then click **ASP.NET Configuration** in the **Project** menu.</span></span>

<span data-ttu-id="3c78a-375">Selecione a guia Segurança.</span><span class="sxs-lookup"><span data-stu-id="3c78a-375">Select the Security tab.</span></span>

<span data-ttu-id="3c78a-376">Clique em **criar ou gerenciar funções**e, em seguida, crie um **administrador** função.</span><span class="sxs-lookup"><span data-stu-id="3c78a-376">Click **Create or Manage Roles**, and then create an **Administrator** role.</span></span>

<span data-ttu-id="3c78a-377">Volte para a guia de segurança.</span><span class="sxs-lookup"><span data-stu-id="3c78a-377">Return to the Security tab.</span></span>

<span data-ttu-id="3c78a-378">Clique em **criar usuário**e, em seguida, selecione o **administrador** caixa de seleção e criar um usuário chamado administrador.</span><span class="sxs-lookup"><span data-stu-id="3c78a-378">Click **Create user**, and then select the **Administrator** check box and create a user named admin.</span></span>

<span data-ttu-id="3c78a-379">Fechar o **ferramenta Web Site Administration**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-379">Close the **Web Site Administration Tool**.</span></span>

### <a name="creating-the-school-database"></a><span data-ttu-id="3c78a-380">Criando o banco de dados de escola</span><span class="sxs-lookup"><span data-stu-id="3c78a-380">Creating the School Database</span></span>

<span data-ttu-id="3c78a-381">Abra a janela do Console do Gerenciador de pacotes.</span><span class="sxs-lookup"><span data-stu-id="3c78a-381">Open the Package Manager Console window.</span></span>

<span data-ttu-id="3c78a-382">No **projeto padrão** lista suspensa, selecione o projeto ContosoUniversity.DAL.</span><span class="sxs-lookup"><span data-stu-id="3c78a-382">In the **Default project** drop-down list, select the ContosoUniversity.DAL project.</span></span>

<span data-ttu-id="3c78a-383">Insira o seguinte comando:</span><span class="sxs-lookup"><span data-stu-id="3c78a-383">Enter the following command:</span></span>

[!code-powershell[Main](deployment-to-a-hosting-provider-migrating-to-sql-server-10-of-12/samples/sample9.ps1)]

<span data-ttu-id="3c78a-384">Migrações do Code First aplica-se a migração inicial que cria o banco de dados e, em seguida, aplica-se a migração AddBirthDate e, em seguida, ele executa o método de semente.</span><span class="sxs-lookup"><span data-stu-id="3c78a-384">Code First Migrations applies the Initial migration that creates the database and then applies the AddBirthDate migration, then it runs the Seed method.</span></span>

<span data-ttu-id="3c78a-385">Execute o site pressionando F5 do controle.</span><span class="sxs-lookup"><span data-stu-id="3c78a-385">Run the site by pressing Control-F5.</span></span> <span data-ttu-id="3c78a-386">Como você fez para os ambientes de teste e produção, execute as **adicionar alunos** página, adicione um novo aluno e, em seguida, exibir o novo aluno na **alunos** página.</span><span class="sxs-lookup"><span data-stu-id="3c78a-386">As you did for the test and production environments, run the **Add Students** page, add a new student, and then view the new student in the **Students** page.</span></span> <span data-ttu-id="3c78a-387">Isso verifica que o banco de dados da escola foi criado e inicializado e que leu e acesso de gravação para ele.</span><span class="sxs-lookup"><span data-stu-id="3c78a-387">This verifies that the School database was created and initialized and that you have read and write access to it.</span></span>

<span data-ttu-id="3c78a-388">Selecione o **atualização créditos** página e faça logon para verificar que o banco de dados de associação foi implantado e se você tem acesso a ele.</span><span class="sxs-lookup"><span data-stu-id="3c78a-388">Select the **Update Credits** page and log in to verify that the membership database was deployed and that you have access to it.</span></span> <span data-ttu-id="3c78a-389">Se você não migrou suas contas de usuário, crie uma conta de administrador e, em seguida, selecione a **atualização créditos** página para verificar se ele funciona.</span><span class="sxs-lookup"><span data-stu-id="3c78a-389">If you did not migrate your user accounts, create an administrator account and then select the **Update Credits** page to verify that it works.</span></span>

## <a name="cleaning-up-sql-server-compact-files"></a><span data-ttu-id="3c78a-390">Limpando arquivos do SQL Server Compact</span><span class="sxs-lookup"><span data-stu-id="3c78a-390">Cleaning Up SQL Server Compact Files</span></span>

<span data-ttu-id="3c78a-391">Você não precisa mais arquivos e pacotes do NuGet que foram incluídos para dar suporte a SQL Server Compact.</span><span class="sxs-lookup"><span data-stu-id="3c78a-391">You no longer need files and NuGet packages that were included to support SQL Server Compact.</span></span> <span data-ttu-id="3c78a-392">Se você quiser (essa etapa não é necessária), você pode limpar todos os arquivos desnecessários e referências.</span><span class="sxs-lookup"><span data-stu-id="3c78a-392">If you want (this step is not required), you can clean up unneeded files and references.</span></span>

<span data-ttu-id="3c78a-393">No **Gerenciador de soluções**, exclua o *. sdf* arquivos da *aplicativo\_dados* pasta e o *amd64* e *x86* pastas a partir de *bin* pasta.</span><span class="sxs-lookup"><span data-stu-id="3c78a-393">In **Solution Explorer**, delete the *.sdf* files from the *App\_Data* folder and the *amd64* and *x86* folders from the *bin* folder.</span></span>

<span data-ttu-id="3c78a-394">Na **Gerenciador de soluções**, clique com botão direito a solução (não um dos projetos) e, em seguida, clique em **gerenciar pacotes NuGet para solução**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-394">In **Solution Explorer**, right-click the solution (not one of the projects), and then click **Manage NuGet Packages for Solution**.</span></span>

<span data-ttu-id="3c78a-395">No painel esquerdo do **gerenciar pacotes NuGet** caixa de diálogo, selecione **pacotes instalados**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-395">In the left pane of the **Manage NuGet Packages** dialog box, select **Installed packages**.</span></span>

<span data-ttu-id="3c78a-396">Selecione o **EntityFramework.SqlServerCompact** de pacote e clique em **gerenciar**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-396">Select the **EntityFramework.SqlServerCompact** package and click **Manage**.</span></span>

<span data-ttu-id="3c78a-397">No **selecionar projetos** caixa de diálogo, ambos os projetos são selecionados.</span><span class="sxs-lookup"><span data-stu-id="3c78a-397">In the **Select Projects** dialog box, both projects are selected.</span></span> <span data-ttu-id="3c78a-398">Para desinstalar o pacote em ambos os projetos, desmarque as duas caixas de seleção e clique em **Okey**.</span><span class="sxs-lookup"><span data-stu-id="3c78a-398">To uninstall the package in both projects, clear both check boxes, then click **OK**.</span></span>

<span data-ttu-id="3c78a-399">Na caixa de diálogo que pergunta se você deseja desinstalar os pacotes dependentes também, clique em não.</span><span class="sxs-lookup"><span data-stu-id="3c78a-399">In the dialog box that asks if you want to uninstall the dependent packages also, click No.</span></span> <span data-ttu-id="3c78a-400">Um deles é o pacote do Entity Framework que você precisa manter.</span><span class="sxs-lookup"><span data-stu-id="3c78a-400">One of these is the Entity Framework package that you have to keep.</span></span>

<span data-ttu-id="3c78a-401">Siga o mesmo procedimento para desinstalar o **SqlServerCompact** pacote.</span><span class="sxs-lookup"><span data-stu-id="3c78a-401">Follow the same procedure to uninstall the **SqlServerCompact** package.</span></span> <span data-ttu-id="3c78a-402">(Os pacotes devem ser desinstalados nesta ordem, porque o **EntityFramework.SqlServerCompact** depende do pacote a **SqlServerCompact** pacote.)</span><span class="sxs-lookup"><span data-stu-id="3c78a-402">(The packages must be uninstalled in this order because the **EntityFramework.SqlServerCompact** package depends on the **SqlServerCompact** package.)</span></span>

<span data-ttu-id="3c78a-403">Você agora ter migrado com êxito para o SQL Server Express e o SQL Server completo.</span><span class="sxs-lookup"><span data-stu-id="3c78a-403">You have now successfully migrated to SQL Server Express and full SQL Server.</span></span> <span data-ttu-id="3c78a-404">No próximo tutorial, você vai fazer outra alteração de banco de dados e você verá como implantar as alterações do banco de dados quando os bancos de dados de teste e produção usam o SQL Server Express e o SQL Server completo.</span><span class="sxs-lookup"><span data-stu-id="3c78a-404">In the next tutorial you'll make another database change, and you'll see how to deploy database changes when your test and production databases use SQL Server Express and full SQL Server.</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="3c78a-405">[Anterior](deployment-to-a-hosting-provider-deploying-a-database-update-9-of-12.md)
> [Próximo](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)</span><span class="sxs-lookup"><span data-stu-id="3c78a-405">[Previous](deployment-to-a-hosting-provider-deploying-a-database-update-9-of-12.md)
[Next](deployment-to-a-hosting-provider-deploying-a-sql-server-database-update-11-of-12.md)</span></span>
