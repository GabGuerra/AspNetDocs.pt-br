---
uid: web-forms/overview/older-versions-getting-started/master-pages/nested-master-pages-cs
title: Aninhado páginas mestras (c#) | Microsoft Docs
author: rick-anderson
description: Mostra como aninhar uma página mestra dentro de outra.
ms.author: riande
ms.date: 07/28/2008
ms.assetid: 32b7fb6e-d74b-4048-91f8-70631b2523ee
msc.legacyurl: /web-forms/overview/older-versions-getting-started/master-pages/nested-master-pages-cs
msc.type: authoredcontent
ms.openlocfilehash: 1b60b0b7ce4be66bc24ccbc1d25ce4dc56766815
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57036213"
---
<a name="nested-master-pages-c"></a><span data-ttu-id="5ddcf-103">Páginas mestras aninhadas (C#)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-103">Nested Master Pages (C#)</span></span>
====================
<span data-ttu-id="5ddcf-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="5ddcf-105">[Baixar o código](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.zip) ou [baixar PDF](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.pdf)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-105">[Download Code](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.zip) or [Download PDF](http://download.microsoft.com/download/d/6/6/d66ad554-afdd-409e-a5c3-201b774fbb31/ASPNET_MasterPages_Tutorial_10_CS.pdf)</span></span>

> <span data-ttu-id="5ddcf-106">Mostra como aninhar uma página mestra dentro de outra.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-106">Shows how to nest one master page within another.</span></span>


## <a name="introduction"></a><span data-ttu-id="5ddcf-107">Introdução</span><span class="sxs-lookup"><span data-stu-id="5ddcf-107">Introduction</span></span>

<span data-ttu-id="5ddcf-108">Ao longo dos últimos nove tutoriais nós vimos como implementar um layout de todo o site com páginas mestras.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-108">Over the course of the past nine tutorials we have seen how to implement a site-wide layout with master pages.</span></span> <span data-ttu-id="5ddcf-109">Em resumo, páginas mestras permitem que nós, se o desenvolvedor de página para definir a marcação comuns na página mestra, juntamente com a regiões específicas que podem ser personalizados em uma base de página de conteúdo a página de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-109">In a nutshell, master pages allow us, the page developer, to define common markup in the master page along with specific regions that can be customized on a content page-by-content page basis.</span></span> <span data-ttu-id="5ddcf-110">Controles em uma página mestra ContentPlaceHolder indicam as regiões personalizáveis; a marcação personalizada para controles ContentPlaceHolder são definidas na página de conteúdo por meio de controles de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-110">The ContentPlaceHolder controls in a master page indicate the customizable regions; the customized markup for the ContentPlaceHolder controls are defined in the content page via Content controls.</span></span>

<span data-ttu-id="5ddcf-111">As técnicas de página mestra que exploramos até o momento são ótimas, se você tiver um único layout usado em todo o site.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-111">The master page techniques we've explored thus far are great if you have a single layout used across the entire site.</span></span> <span data-ttu-id="5ddcf-112">No entanto, muitos sites grandes têm um layout de site personalizada em várias seções.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-112">However, many large websites have a site layout that is customized across various sections.</span></span> <span data-ttu-id="5ddcf-113">Por exemplo, considere um aplicativo de serviços de saúde usado pela equipe do hospital para gerenciar a cobrança, atividades e informações do paciente.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-113">For example, consider a health care application used by hospital staff to manage patient information, activities, and billing.</span></span> <span data-ttu-id="5ddcf-114">Pode haver três tipos de páginas da web neste aplicativo:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-114">There may be three types of web pages in this application:</span></span>

- <span data-ttu-id="5ddcf-115">Páginas de específicas de membro da equipe em que os membros da equipe podem atualizar a disponibilidade, Exibir agendas ou solicitação de férias.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-115">Staff member-specific pages where staff members can update availability, view schedules, or request vacation time.</span></span>
- <span data-ttu-id="5ddcf-116">Páginas de paciente específicas em que os membros da equipe exibir ou editar informações do paciente específico.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-116">Patient-specific pages where staff members view or edit information for a specific patient.</span></span>
- <span data-ttu-id="5ddcf-117">Páginas de cobrança específico em que os contadores examinar atual de declaração de status e relatórios financeiros.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-117">Billing-specific pages where accountants review current claim statuses and financial reports.</span></span>

<span data-ttu-id="5ddcf-118">Todas as páginas podem compartilhar um layout comum, como um menu na parte superior e uma série de links usados com frequência na parte inferior.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-118">Every page might share a common layout, such as a menu across the top and a series of frequently used links along the bottom.</span></span> <span data-ttu-id="5ddcf-119">Mas a equipe, pacientes e páginas específicas de cobrança, talvez seja necessário personalizar esse layout genérico.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-119">But the staff-, patient-, and billing-specific pages may need to customize this generic layout.</span></span> <span data-ttu-id="5ddcf-120">Por exemplo, talvez todas as páginas específicas da equipe devem incluir uma lista de calendário e tarefas que mostra a disponibilidade e uma agenda diária do usuário conectado no momento.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-120">For example, perhaps all staff-specific pages should include a calendar and task list showing the currently logged on user's availability and daily schedule.</span></span> <span data-ttu-id="5ddcf-121">Talvez precisam de todas as páginas específicas do paciente mostrar o nome, endereço e informações de seguro para o paciente cujas informações está sendo editadas.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-121">Perhaps all patient-specific pages need to show the name, address, and insurance information for the patient whose information is being edited.</span></span>

<span data-ttu-id="5ddcf-122">É possível criar esses layouts personalizados usando *páginas mestras aninhadas*.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-122">It's possible to create such customized layouts by using *nested master pages*.</span></span> <span data-ttu-id="5ddcf-123">Para implementar o cenário acima, seria começamos criando uma página mestra que definiu o conteúdo em todo o site de layout, o menu e o rodapé, com ContentPlaceHolders definindo as regiões personalizáveis.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-123">To implement the above scenario, we would start by creating a master page that defined the site-wide layout, the menu and footer content, with ContentPlaceHolders defining the customizable regions.</span></span> <span data-ttu-id="5ddcf-124">Criaremos três páginas mestras aninhadas, uma para cada tipo de página da web.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-124">We would then create three nested master pages, one for each type of web page.</span></span> <span data-ttu-id="5ddcf-125">Cada página mestra aninhada definiria o conteúdo entre os tipos de páginas de conteúdo que use a página mestra.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-125">Each nested master page would define the content among the type of content pages that use the master page.</span></span> <span data-ttu-id="5ddcf-126">Em outras palavras, a página mestra aninhada para páginas de conteúdo específico do paciente incluiria marcação e lógica programática para exibir informações sobre o paciente que está sendo editado.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-126">In other words, the nested master page for patient-specific content pages would include markup and programmatic logic for displaying information about the patient being edited.</span></span> <span data-ttu-id="5ddcf-127">Ao criar uma nova página específica do paciente seria a ligamos para essa página mestra aninhada.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-127">When creating a new patient-specific page we would bind it to this nested master page.</span></span>

<span data-ttu-id="5ddcf-128">Este tutorial começa, realçando os benefícios das páginas mestras aninhadas.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-128">This tutorial starts by highlighting the benefits of nested master pages.</span></span> <span data-ttu-id="5ddcf-129">Em seguida, ele mostra como criar e usar as páginas mestras aninhadas.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-129">It then shows how to create and use nested master pages.</span></span>

> [!NOTE]
> <span data-ttu-id="5ddcf-130">Páginas mestras aninhadas tem sido possíveis desde a versão 2.0 do .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-130">Nested master pages have been possible since version 2.0 of the .NET Framework.</span></span> <span data-ttu-id="5ddcf-131">No entanto, o Visual Studio 2005 não incluíam suporte de tempo de design para páginas mestras aninhadas.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-131">However, Visual Studio 2005 did not include design-time support for nested master pages.</span></span> <span data-ttu-id="5ddcf-132">A boa notícia é que o Visual Studio 2008 oferece uma experiência avançada de tempo de design para páginas mestras aninhadas.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-132">The good news is that Visual Studio 2008 offers a rich design-time experience for nested master pages.</span></span> <span data-ttu-id="5ddcf-133">Se você estiver interessado em usar páginas mestras aninhadas, mas ainda estiver usando o Visual Studio 2005, fazer check-out [Scott Guthrie](https://weblogs.asp.net/scottgu/)da entrada de blog [dicas para páginas mestras aninhadas em tempo de Design do VS 2005](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx).</span><span class="sxs-lookup"><span data-stu-id="5ddcf-133">If you are interested in using nested master pages but are still using Visual Studio 2005, check out [Scott Guthrie](https://weblogs.asp.net/scottgu/)'s blog entry, [Tips for Nested Master Pages in VS 2005 Design-Time](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx).</span></span>


## <a name="the-benefits-of-nested-master-pages"></a><span data-ttu-id="5ddcf-134">Os benefícios de páginas mestras aninhadas</span><span class="sxs-lookup"><span data-stu-id="5ddcf-134">The Benefits of Nested Master Pages</span></span>

<span data-ttu-id="5ddcf-135">Muitos sites têm um design abrangente do site, bem como mais designs personalizados específicos para determinados tipos de páginas.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-135">Many websites have an overarching site design as well as more customized designs specific to certain types of pages.</span></span> <span data-ttu-id="5ddcf-136">Por exemplo, em nosso aplicativo web de demonstração criamos uma seção de administração rudimentar (as páginas no `~/Admin` pasta).</span><span class="sxs-lookup"><span data-stu-id="5ddcf-136">For instance, in our demo web application we have created a rudimentary Administration section (the pages in the `~/Admin` folder).</span></span> <span data-ttu-id="5ddcf-137">Atualmente, as páginas da web na `~/Admin` pasta usar a mesma página mestra como essas páginas não na seção administration (ou seja, `Site.master` ou `Alternate.master`, dependendo da seleção do usuário).</span><span class="sxs-lookup"><span data-stu-id="5ddcf-137">Currently the web pages in the `~/Admin` folder use the same master page as those pages not in the administration section (namely, `Site.master` or `Alternate.master`, depending on the user's selection).</span></span>

> [!NOTE]
> <span data-ttu-id="5ddcf-138">Por enquanto, fingir que nosso site tem apenas uma página mestra, `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-138">For now, pretend that our site has just one master page, `Site.master`.</span></span> <span data-ttu-id="5ddcf-139">Vamos abordar usando páginas mestras aninhadas com duas (ou mais) páginas mestras, começando com "Usando um aninhada mestre de página para a seção Administração" posteriormente no tutorial.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-139">We'll address using nested master pages with two (or more) master pages starting with "Using a Nested Master Page for the Administration Section" later in this tutorial.</span></span>


<span data-ttu-id="5ddcf-140">Imagine que foi solicitado que personalizar o layout das páginas de administração para incluir informações adicionais ou links que normalmente não estariam presentes em outras páginas no site.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-140">Imagine that we were asked to customize the layout of the Administration pages to include additional information or links that would not otherwise be present in other pages in the site.</span></span> <span data-ttu-id="5ddcf-141">Há quatro técnicas para implementar esse requisito:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-141">There are four techniques to implement this requirement:</span></span>

1. <span data-ttu-id="5ddcf-142">Adicionar manualmente as informações específicas da administração e links para cada página de conteúdo no `~/Admin` pasta.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-142">Manually add the Administration-specific information and links to every content page in the `~/Admin` folder.</span></span>
2. <span data-ttu-id="5ddcf-143">Atualização de `Site.master` página mestra para incluir as informações da seção específica de administração e links e, em seguida, adicione o código para a página mestra para mostrar ou ocultar essas seções com base em se uma das páginas de administração está sendo visitada.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-143">Update the `Site.master` master page to include the Administration section-specific information and links, and then add code to the master page to show or hide these sections based on whether one of the Administration pages is being visited.</span></span>
3. <span data-ttu-id="5ddcf-144">Criar uma nova página mestra especificamente para a seção de administração, copiar sobre a marcação de `Site.master`, adicione as informações da seção específica de administração e os links e, em seguida, atualize as páginas de conteúdo no `~/Admin` pasta a usar esse novo mestre página.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-144">Create a new master page specifically for the Administration section, copy over the markup from `Site.master`, add the Administration section-specific information and links, and then update the content pages in the `~/Admin` folder to use this new master page.</span></span>
4. <span data-ttu-id="5ddcf-145">Criar uma página mestra aninhada que associa a `Site.master` e têm as páginas de conteúdo no `~/Admin` aninhados de pasta use essa nova página mestra.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-145">Create a nested master page that binds to `Site.master` and have the content pages in the `~/Admin` folder use this new nested master page.</span></span> <span data-ttu-id="5ddcf-146">Essa página mestra aninhada incluiria apenas as informações adicionais e links específicos para as páginas de administração e não precisa repetir a marcação já definida no `Site.master`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-146">This nested master page would include just the additional information and links specific to the Administration pages and would not need to repeat the markup already defined in `Site.master`.</span></span>

<span data-ttu-id="5ddcf-147">A primeira opção é menos agradável.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-147">The first option is the least palatable.</span></span> <span data-ttu-id="5ddcf-148">É o ponto de uso de páginas mestras deixar de ter que copiar e colar marcação comum para as páginas ASP.NET manualmente.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-148">The whole point of using master pages is to move away from having to manually copy and paste common markup to new ASP.NET pages.</span></span> <span data-ttu-id="5ddcf-149">A segunda opção é aceitável, mas torna o aplicativo menos capaz de manutenção como ele dá volume às páginas mestras com a marcação que é exibido apenas ocasionalmente e exige que os desenvolvedores editando a página mestra para contornar essa marcação e precisa se lembrar de quando, exatamente, determinada marcação é exibida em vez de quando ele está oculto.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-149">The second option is acceptable, but makes the application less maintainable as it bulks up the master pages with markup that is only occasionally displayed and requires developers editing the master page to work around this markup and to have to remember when, exactly, certain markup is displayed versus when it is hidden.</span></span> <span data-ttu-id="5ddcf-150">Essa abordagem seria menos tenable como personalizações de cada vez mais tipos de páginas da web precisava ser acomodado por essa única página mestra.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-150">This approach would be less tenable as customizations from more and more types of web pages needed to be accommodated by this single master page.</span></span>

<span data-ttu-id="5ddcf-151">A terceira opção remove a confusão e complexidade emite a superfície com a segunda opção.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-151">The third option removes the clutter and complexity issues the surfaced with the second option.</span></span> <span data-ttu-id="5ddcf-152">No entanto, a principal desvantagem de opção de três é requer us copiar e colar o layout comum de `Site.master` para a nova página mestre da seção específica de administração.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-152">However, option three's main drawback is that it requires us to copy and paste the common layout from `Site.master` to the new Administration section-specific master page.</span></span> <span data-ttu-id="5ddcf-153">Se, posteriormente, decidir alterar o layout de todo o site que temos de lembrar para alterá-lo em dois locais.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-153">If we later decide to change the site-wide layout we have to remember to change it in two places.</span></span>

<span data-ttu-id="5ddcf-154">Páginas mestras aninhadas de quarta opção, envie-no melhor das opções de segundo e terceiro.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-154">The fourth option, nested master pages, give us the best of the second and third options.</span></span> <span data-ttu-id="5ddcf-155">As informações de layout de todo o site são mantidas em um arquivo: a página mestre de nível superior – enquanto o conteúdo específico para regiões específicas é separado em arquivos diferentes.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-155">The site-wide layout information is maintained in one file - the top-level master page - while the content specific to particular regions is separated out into different files.</span></span>

<span data-ttu-id="5ddcf-156">Este tutorial começa com uma olhada em como criar e usar uma página mestra aninhada simples.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-156">This tutorial starts with a look at creating and using a simple nested master page.</span></span> <span data-ttu-id="5ddcf-157">Criamos uma página mestre de nível superior totalmente nova, duas páginas mestras aninhadas e duas páginas de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-157">We create a brand new top-level master page, two nested master pages, and two content pages.</span></span> <span data-ttu-id="5ddcf-158">Começando com "Usando um aninhados mestre para a administração seção da página", vamos examinar atualizando nossa arquitetura de página mestra existente para incluir o uso de páginas mestras aninhadas.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-158">Starting with "Using a Nested Master Page for the Administration Section," we look at updating our existing master page architecture to include the use of nested master pages.</span></span> <span data-ttu-id="5ddcf-159">Especificamente, criamos uma página mestra aninhada e usá-lo para incluir mais conteúdo personalizado para as páginas de conteúdo no `~/Admin` pasta.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-159">Specifically, we create a nested master page and use it to include additional custom content for the content pages in the `~/Admin` folder.</span></span>

## <a name="step-1-creating-a-simple-top-level-master-page"></a><span data-ttu-id="5ddcf-160">Etapa 1: Criando uma página simples de mestre de nível superior</span><span class="sxs-lookup"><span data-stu-id="5ddcf-160">Step 1: Creating a Simple Top-Level Master Page</span></span>

<span data-ttu-id="5ddcf-161">Criar um mestre aninhado com base em um do mestre existente de páginas e, em seguida, atualizar uma página de conteúdo existente para usar essa nova página mestra aninhada em vez de nível superior página mestra envolve alguma complexidade porque as páginas de conteúdo existentes já esperam que certas Controles de ContentPlaceHolder definidos na página mestre de nível superior.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-161">Creating a nested master based on one of the existing master pages and then updating an existing content page to use this new nested master page instead of the top-level master page entails some complexity because the existing content pages already expect certain ContentPlaceHolder controls defined in the top-level master page.</span></span> <span data-ttu-id="5ddcf-162">Portanto, a página mestra aninhada também deve incluir os mesmos controles ContentPlaceHolder com os mesmos nomes.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-162">Therefore, the nested master page must also include the same ContentPlaceHolder controls with the same names.</span></span> <span data-ttu-id="5ddcf-163">Além disso, nosso aplicativo de demonstração específica tem duas páginas mestras (`Site.master` e `Alternate.master`) que são atribuídos dinamicamente uma página de conteúdo com base nas preferências do usuário, que aumenta ainda mais essa complexidade.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-163">Furthermore, our particular demo application has two master pages (`Site.master` and `Alternate.master`) that are dynamically assigned to a content page based on a user's preferences, which further adds to this complexity.</span></span> <span data-ttu-id="5ddcf-164">Examinaremos de atualização do aplicativo existente para usar páginas mestras aninhadas mais tarde neste tutorial, mas vamos primeiro enfocam um simples aninhados do exemplo de páginas mestras.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-164">We will look at updating the existing application to use nested master pages later in this tutorial, but let's first focus on a simple nested master pages example.</span></span>

<span data-ttu-id="5ddcf-165">Criar uma nova pasta chamada `NestedMasterPages` e, em seguida, adicione um novo arquivo de página mestra para essa pasta denominada `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-165">Create a new folder named `NestedMasterPages` and then add a new master page file to that folder named `Simple.master`.</span></span> <span data-ttu-id="5ddcf-166">(Consulte a Figura 1 para uma captura de tela do Gerenciador de soluções depois que essa pasta e arquivo foram adicionadas.) Arraste o `AlternateStyles.css` arquivo de folha de estilo do Gerenciador de soluções para o Designer.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-166">(See Figure 1 for a screen shot of the Solution Explorer after this folder and file have been added.) Drag the `AlternateStyles.css` style sheet file from the Solution Explorer onto the Designer.</span></span> <span data-ttu-id="5ddcf-167">Isso adiciona uma `<link>` elemento para o arquivo de folha de estilos em de `<head>` elemento após o qual a página mestra `<head>` marcação do elemento deve parecer com:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-167">This adds a `<link>` element to the style sheet file in the `<head>` element, after which the master page's `<head>` element's markup should look like:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample1.aspx)]

<span data-ttu-id="5ddcf-168">Em seguida, adicione a seguinte marcação dentro do formulário da Web de `Simple.master`:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-168">Next, add the following markup within the Web Form of `Simple.master`:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample2.aspx)]

<span data-ttu-id="5ddcf-169">Essa marcação exibe um link intitulado "Nested as páginas mestras (simples)" na parte superior da página em uma fonte branca grande em um plano de fundo azul marinho.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-169">This markup displays a link titled "Nested Master Pages (Simple)" at the top of the page in a large white font on a navy background.</span></span> <span data-ttu-id="5ddcf-170">Além disso, é o `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-170">Beneath that is the `MainContent` ContentPlaceHolder.</span></span> <span data-ttu-id="5ddcf-171">A Figura 1 mostra o `Simple.master` página mestra quando carregado no Designer do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-171">Figure 1 shows the `Simple.master` master page when loaded in the Visual Studio Designer.</span></span>


<span data-ttu-id="5ddcf-172">[![A página mestra aninhada define o conteúdo específico para as páginas na seção Administração](nested-master-pages-cs/_static/image2.png)](nested-master-pages-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-172">[![The Nested Master Page Defines Content Specific to the Pages in the Administration Section](nested-master-pages-cs/_static/image2.png)](nested-master-pages-cs/_static/image1.png)</span></span>

<span data-ttu-id="5ddcf-173">**Figura 01**: O aninhados mestre página define conteúdo específicos para as páginas na seção Administration ([clique para exibir a imagem em tamanho normal](nested-master-pages-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="5ddcf-173">**Figure 01**: The Nested Master Page Defines Content Specific to the Pages in the Administration Section ([Click to view full-size image](nested-master-pages-cs/_static/image3.png))</span></span>


## <a name="step-2-creating-a-simple-nested-master-page"></a><span data-ttu-id="5ddcf-174">Etapa 2: Criando uma página mestra aninhada simples</span><span class="sxs-lookup"><span data-stu-id="5ddcf-174">Step 2: Creating a Simple Nested Master Page</span></span>

<span data-ttu-id="5ddcf-175">`Simple.master` contém dois controles ContentPlaceHolder: o `MainContent` ContentPlaceHolder adicionamos dentro do formulário da Web juntamente com o `head` ContentPlaceHolder no `<head>` elemento.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-175">`Simple.master` contains two ContentPlaceHolder controls: the `MainContent` ContentPlaceHolder we added within the Web Form along with the `head` ContentPlaceHolder in the `<head>` element.</span></span> <span data-ttu-id="5ddcf-176">Se fôssemos criar uma página de conteúdo e associá-lo para `Simple.master` a página de conteúdo teria dois controles de conteúdo, fazendo referência as duas ContentPlaceHolders.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-176">If we were to create a content page and bind it to `Simple.master` the content page would have two Content controls referencing the two ContentPlaceHolders.</span></span> <span data-ttu-id="5ddcf-177">Da mesma forma, se podemos criar uma página mestra aninhada e associá-lo para `Simple.master` e em seguida, a página mestra aninhada terá dois controles de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-177">Similarly, if we create a nested master page and bind it to `Simple.master` then the nested master page will have two Content controls.</span></span>

<span data-ttu-id="5ddcf-178">Vamos adicionar uma nova página mestra aninhada para o `NestedMasterPages` pasta chamada `SimpleNested.master`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-178">Let's add a new nested master page to the `NestedMasterPages` folder named `SimpleNested.master`.</span></span> <span data-ttu-id="5ddcf-179">Clique com botão direito no `NestedMasterPages` pasta e escolha Add New Item.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-179">Right-click on the `NestedMasterPages` folder and choose Add New Item.</span></span> <span data-ttu-id="5ddcf-180">Isso abre a caixa de diálogo Add New Item mostrada na Figura 2.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-180">This brings up the Add New Item dialog box shown in Figure 2.</span></span> <span data-ttu-id="5ddcf-181">Selecione o tipo de modelo de página mestra e digite o nome a nova página mestra.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-181">Select the Master Page template type and type in the name of the new master page.</span></span> <span data-ttu-id="5ddcf-182">Para indicar que a nova página mestra deve ser uma página mestra aninhada, marque a caixa de seleção "Selecionar página mestra".</span><span class="sxs-lookup"><span data-stu-id="5ddcf-182">To indicate that the new master page should be a nested master page, check the "Select master page" checkbox.</span></span>

<span data-ttu-id="5ddcf-183">Em seguida, clique no botão Adicionar.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-183">Next, click the Add button.</span></span> <span data-ttu-id="5ddcf-184">Isso exibirá o mesmo selecione uma caixa de diálogo de página mestra que você vê quando uma página de conteúdo de associação a uma página mestra (consulte a Figura 3).</span><span class="sxs-lookup"><span data-stu-id="5ddcf-184">This will display the same Select a Master Page dialog box you see when binding a content page to a master page (see Figure 3).</span></span> <span data-ttu-id="5ddcf-185">Escolha o `Simple.master` página mestra no `NestedMasterPages` pasta e clique em Okey.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-185">Choose the `Simple.master` master page in the `NestedMasterPages` folder and click OK.</span></span>

> [!NOTE]
> <span data-ttu-id="5ddcf-186">Se você tiver criado seu site da Web ASP.NET usando o modelo de projeto de aplicativo Web em vez do modelo de projeto de Site, você não verá a caixa de seleção "Selecionar a página mestra" na caixa de diálogo Add New Item, mostrada na Figura 2.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-186">If you created your ASP.NET website using the Web Application Project model instead of the Web Site Project model you will not see the "Select master page" checkbox in the Add New Item dialog box shown in Figure 2.</span></span> <span data-ttu-id="5ddcf-187">Para criar uma página mestra aninhada ao usar o modelo de projeto de aplicativo Web, você deve escolher o modelo de página mestra aninhada (em vez do modelo de página mestra).</span><span class="sxs-lookup"><span data-stu-id="5ddcf-187">To create a nested master page when using the Web Application Project model you must choose the Nested Master Page template (instead of the Master Page template).</span></span> <span data-ttu-id="5ddcf-188">Depois de selecionar o modelo de página mestra aninhada e clicando em Adicionar, o mesmo selecionar uma página mestra que será exibida a caixa de diálogo mostrada na Figura 3.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-188">After selecting the Nested Master Page template and clicking Add, the same Select a Master Page dialog box shown in Figure 3 will appear.</span></span>


<span data-ttu-id="5ddcf-189">[![Verifique a &quot;página mestra selecione&quot; caixa de seleção para adicionar uma página de mestra aninhada](nested-master-pages-cs/_static/image5.png)](nested-master-pages-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-189">[![Check the &quot;Select master page&quot; Checkbox to Add a Nested Master Page](nested-master-pages-cs/_static/image5.png)](nested-master-pages-cs/_static/image4.png)</span></span>

<span data-ttu-id="5ddcf-190">**Figura 02**: Marque a caixa de seleção "Selecionar a página mestra" para adicionar uma página de mestra aninhada ([clique para exibir a imagem em tamanho normal](nested-master-pages-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="5ddcf-190">**Figure 02**: Check the "Select master page" Checkbox to Add a Nested Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image6.png))</span></span>


<span data-ttu-id="5ddcf-191">[![Associar a página mestra aninhada para a página mestra Simple](nested-master-pages-cs/_static/image8.png)](nested-master-pages-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-191">[![Bind the Nested Master Page to the Simple.master Master Page](nested-master-pages-cs/_static/image8.png)](nested-master-pages-cs/_static/image7.png)</span></span>

<span data-ttu-id="5ddcf-192">**Figura 03**: Associar a página mestra aninhada para o `Simple.master` página mestra ([clique para exibir a imagem em tamanho normal](nested-master-pages-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="5ddcf-192">**Figure 03**: Bind the Nested Master Page to the `Simple.master` Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image9.png))</span></span>


<span data-ttu-id="5ddcf-193">Marcação declarativa da página mestra aninhada, mostrada abaixo, contém dois controles de conteúdo, fazendo referência a dois controles de ContentPlaceHolder o nível superior da página mestra.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-193">The nested master page's declarative markup, shown below, contains two Content controls referencing the top-level master page's two ContentPlaceHolder controls.</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample3.aspx)]

<span data-ttu-id="5ddcf-194">Exceto para o `<%@ Master %>` diretiva, marcação declarativa do inicial da página mestra aninhada é idêntica à marcação que é gerada inicialmente ao associar uma página de conteúdo para a mesma página mestre de nível superior.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-194">Except for the `<%@ Master %>` directive, the nested master page's initial declarative markup is identical to the markup that is initially generated when binding a content page to the same top-level master page.</span></span> <span data-ttu-id="5ddcf-195">Como uma página de conteúdo `<%@ Page %>` diretiva, o `<%@ Master %>` diretiva aqui inclui um `MasterPageFile` atributo que especifica a página mestra do pai da página mestra aninhada.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-195">Like a content page's `<%@ Page %>` directive, the `<%@ Master %>` directive here includes a `MasterPageFile` attribute that specifies the nested master page's parent master page.</span></span> <span data-ttu-id="5ddcf-196">A principal diferença entre a página mestra aninhada e uma página de conteúdo associado para a mesma página mestre de nível superior é que a página mestra aninhada pode incluir controles ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-196">The main difference between the nested master page and a content page bound to the same top-level master page is that the nested master page can include ContentPlaceHolder controls.</span></span> <span data-ttu-id="5ddcf-197">Controles de ContentPlaceHolder da página mestra aninhada definem as regiões onde as páginas de conteúdo podem personalizar a marcação.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-197">The nested master page's ContentPlaceHolder controls define the regions where the content pages can customize the markup.</span></span>

<span data-ttu-id="5ddcf-198">Atualizar esta página mestra aninhada para que ele exibe o texto "Olá, de SimpleNested!"</span><span class="sxs-lookup"><span data-stu-id="5ddcf-198">Update this nested master page so that it displays the text "Hello, from SimpleNested!"</span></span> <span data-ttu-id="5ddcf-199">no controle de conteúdo que corresponde ao `MainContent` controle ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-199">in the Content control that corresponds to the `MainContent` ContentPlaceHolder control.</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample4.aspx)]

<span data-ttu-id="5ddcf-200">Depois de fazer essa adição, salve a página mestra aninhada e, em seguida, adicione uma nova página de conteúdo para o `NestedMasterPages` pasta chamada `Default.aspx`e associá-lo para o `SimpleNested.master` página mestra.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-200">After making this addition, save the nested master page and then add a new content page to the `NestedMasterPages` folder named `Default.aspx`, and bind it to the `SimpleNested.master` master page.</span></span> <span data-ttu-id="5ddcf-201">Após a adição desta página, você pode se surpreender ao ver que ele contém sem controles de conteúdo (consulte a Figura 4)!</span><span class="sxs-lookup"><span data-stu-id="5ddcf-201">Upon adding this page you may be surprised to see that it contains no Content controls (see Figure 4)!</span></span> <span data-ttu-id="5ddcf-202">Uma página de conteúdo só pode acessar seus *pai* mestre ContentPlaceHolders da página.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-202">A content page can only access its *parent* master page's ContentPlaceHolders.</span></span> <span data-ttu-id="5ddcf-203">`SimpleNested.master` não contém todos os controles ContentPlaceHolder; Portanto, qualquer página de conteúdo associada a essa página mestra não pode conter quaisquer controles de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-203">`SimpleNested.master` does not contain any ContentPlaceHolder controls; therefore, any content page bound to this master page cannot contain any Content controls.</span></span>


<span data-ttu-id="5ddcf-204">[![Nova página de conteúdo não contém nenhum controle de conteúdo](nested-master-pages-cs/_static/image11.png)](nested-master-pages-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-204">[![The New Content Page Contains No Content Controls](nested-master-pages-cs/_static/image11.png)](nested-master-pages-cs/_static/image10.png)</span></span>

<span data-ttu-id="5ddcf-205">**Figura 04**: A nova página contém nenhum conteúdo controles de conteúdo ([clique para exibir a imagem em tamanho normal](nested-master-pages-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="5ddcf-205">**Figure 04**: The New Content Page Contains No Content Controls ([Click to view full-size image](nested-master-pages-cs/_static/image12.png))</span></span>


<span data-ttu-id="5ddcf-206">O que precisamos fazer é atualizar a página mestra aninhada (`SimpleNested.master`) para incluir controles ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-206">What we need to do is update the nested master page (`SimpleNested.master`) to include ContentPlaceHolder controls.</span></span> <span data-ttu-id="5ddcf-207">Normalmente você desejará que suas páginas mestras aninhadas para incluir um ContentPlaceHolder para cada ContentPlaceHolder definido pela página mestra pai, permitindo assim que sua página mestra filha ou a página conteúdo para trabalhar com qualquer um ContentPlaceHolder de nível superior da página mestra controles.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-207">Typically you'll want your nested master pages to include a ContentPlaceHolder for each ContentPlaceHolder defined by its parent master page, thereby allowing its child master page or content page to work with any of the top-level master page's ContentPlaceHolder controls.</span></span>

<span data-ttu-id="5ddcf-208">Atualização de `SimpleNested.master` página mestra para incluir um ContentPlaceHolder em seus dois controles de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-208">Update the `SimpleNested.master` master page to include a ContentPlaceHolder in its two Content controls.</span></span> <span data-ttu-id="5ddcf-209">Dão aos controles ContentPlaceHolder o mesmo nome que o controle de ContentPlaceHolder a que seu controle de conteúdo refere-se.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-209">Give the ContentPlaceHolder controls the same name as the ContentPlaceHolder control their Content control refers to.</span></span> <span data-ttu-id="5ddcf-210">Ou seja, adicione um controle de ContentPlaceHolder chamado `MainContent` para o conteúdo do controle no `SimpleNested.master` que faz referência a `MainContent` ContentPlaceHolder em `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-210">That is, add a ContentPlaceHolder control named `MainContent` to the Content control in `SimpleNested.master` that references the `MainContent` ContentPlaceHolder in `Simple.master`.</span></span> <span data-ttu-id="5ddcf-211">Fazer a mesma coisa no controle de conteúdo que faz referência a `head` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-211">Do the same thing in the Content control that references the `head` ContentPlaceHolder.</span></span>

> [!NOTE]
> <span data-ttu-id="5ddcf-212">Embora eu recomende nomear os controles de ContentPlaceHolder na página mestra aninhada o mesmo que o ContentPlaceHolders na página mestre de nível superior, essa nomenclatura simetria não é necessária.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-212">While I recommend naming the ContentPlaceHolder controls in the nested master page the same as the ContentPlaceHolders in the top-level master page, this naming symmetry is not required.</span></span> <span data-ttu-id="5ddcf-213">Você pode atribuir controles ContentPlaceHolder na sua página mestra aninhada qualquer nome que você deseja.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-213">You can give the ContentPlaceHolder controls in your nested master page any name you like.</span></span> <span data-ttu-id="5ddcf-214">No entanto, eu acho mais fácil lembrar o que ContentPlaceHolders correspondem com quais regiões da página se minha página mestre de nível superior e páginas mestras aninhadas usam os mesmos nomes.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-214">However, I find it easier to remember what ContentPlaceHolders correspond with what regions of the page if my top-level master page and nested master pages use the same names.</span></span>


<span data-ttu-id="5ddcf-215">Depois de fazer essas adições seu `SimpleNested.master` marcação declarativa da página mestra deve ser semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-215">After making these additions your `SimpleNested.master` master page's declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample5.aspx)]

<span data-ttu-id="5ddcf-216">Excluir o `Default.aspx` que acabamos de criar de página de conteúdo e, em seguida, adicioná-la novamente, associando-o para o `SimpleNested.master` página mestra.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-216">Delete the `Default.aspx` content page we just created and then re-add it, binding it to the `SimpleNested.master` master page.</span></span> <span data-ttu-id="5ddcf-217">Desta vez o Visual Studio adiciona dois controles de conteúdo para o `Default.aspx`, referenciar o ContentPlaceHolders agora definido no `SimpleNested.master` (veja a Figura 6).</span><span class="sxs-lookup"><span data-stu-id="5ddcf-217">This time Visual Studio adds two Content controls to the `Default.aspx`, referencing the ContentPlaceHolders now defined in `SimpleNested.master` (see Figure 6).</span></span> <span data-ttu-id="5ddcf-218">Adicione o texto, "Olá, de Default. aspx!"</span><span class="sxs-lookup"><span data-stu-id="5ddcf-218">Add the text, "Hello, from Default.aspx!"</span></span> <span data-ttu-id="5ddcf-219">no conteúdo do controle que referenciado `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-219">in the Content control that referenced `MainContent`.</span></span>

<span data-ttu-id="5ddcf-220">A Figura 5 mostra as três entidades envolvidas aqui – `Simple.master`, `SimpleNested.master`, e `Default.aspx` – e como elas se relacionam entre si.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-220">Figure 5 shows the three entities involved here - `Simple.master`, `SimpleNested.master`, and `Default.aspx` - and how they relate to one another.</span></span> <span data-ttu-id="5ddcf-221">Como mostra o diagrama, a página mestra aninhada implementa controles de conteúdo para ContentPlaceHolder do seu pai.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-221">As the diagram shows, the nested master page implements Content controls for its parent's ContentPlaceHolder.</span></span> <span data-ttu-id="5ddcf-222">Se essas regiões precisam estar acessíveis para a página de conteúdo, a página mestra aninhada deve adicionar seu próprio ContentPlaceHolders aos controles de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-222">If these regions need to be accessible to the content page, the nested master page must add its own ContentPlaceHolders to the Content controls.</span></span>


<span data-ttu-id="5ddcf-223">[![As páginas mestras aninhadas e de alto nível das ditam o Layout da página de conteúdo](nested-master-pages-cs/_static/image14.png)](nested-master-pages-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-223">[![The Top-Level and Nested Master Pages Dictate the Content Page's Layout](nested-master-pages-cs/_static/image14.png)](nested-master-pages-cs/_static/image13.png)</span></span>

<span data-ttu-id="5ddcf-224">**Figura 05**: As páginas mestras aninhadas e de alto nível ditam o Layout da página de conteúdo ([clique para exibir a imagem em tamanho normal](nested-master-pages-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="5ddcf-224">**Figure 05**: The Top-Level and Nested Master Pages Dictate the Content Page's Layout ([Click to view full-size image](nested-master-pages-cs/_static/image15.png))</span></span>


<span data-ttu-id="5ddcf-225">Esse comportamento ilustra como uma página de conteúdo ou a página mestra só está ciente da página mestra pai.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-225">This behavior illustrates how a content page or master page is only cognizant of its parent master page.</span></span> <span data-ttu-id="5ddcf-226">Esse comportamento também é indicado pelo Designer do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-226">This behavior is also indicated by the Visual Studio Designer.</span></span> <span data-ttu-id="5ddcf-227">A Figura 6 mostra o Designer para `Default.aspx`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-227">Figure 6 shows the Designer for `Default.aspx`.</span></span> <span data-ttu-id="5ddcf-228">Enquanto o Designer mostra claramente quais regiões são editáveis da página de conteúdo e não são as partes, ele não resolver a ambiguidade do que são regiões não editáveis da página mestra aninhada e quais regiões são da página mestre de nível superior.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-228">While the Designer clearly shows what regions are editable from the content page and what portions aren't, it doesn't disambiguate what non-editable regions are from the nested master page and what regions are from the top-level master page.</span></span>


<span data-ttu-id="5ddcf-229">[![O conteúdo agora de página inclui controles de conteúdo para ContentPlaceHolders a página mestra aninhada](nested-master-pages-cs/_static/image17.png)](nested-master-pages-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-229">[![The Content Page Now Includes Content Controls for the Nested Master Page's ContentPlaceHolders](nested-master-pages-cs/_static/image17.png)](nested-master-pages-cs/_static/image16.png)</span></span>

<span data-ttu-id="5ddcf-230">**Figura 06**: O conteúdo página agora inclui controles de conteúdo para ContentPlaceHolders a página mestra aninhada ([clique para exibir a imagem em tamanho normal](nested-master-pages-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="5ddcf-230">**Figure 06**: The Content Page Now Includes Content Controls for the Nested Master Page's ContentPlaceHolders ([Click to view full-size image](nested-master-pages-cs/_static/image18.png))</span></span>


## <a name="step-3-adding-a-second-simple-nested-master-page"></a><span data-ttu-id="5ddcf-231">Etapa 3: Adicionando uma segunda página de mestre aninhados simples</span><span class="sxs-lookup"><span data-stu-id="5ddcf-231">Step 3: Adding a Second Simple Nested Master Page</span></span>

<span data-ttu-id="5ddcf-232">O benefício de páginas mestras aninhadas é mais evidente quando há várias páginas mestras aninhadas.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-232">The benefit of nested master pages is more evident when there are multiple nested master pages.</span></span> <span data-ttu-id="5ddcf-233">Para ilustrar esse benefício, crie outra página mestra aninhada na `NestedMasterPages` pasta; Nomeie esse novo aninhado de página mestra `SimpleNestedAlternate.master` e associá-lo para o `Simple.master` página mestra.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-233">To illustrate this benefit, create another nested master page in the `NestedMasterPages` folder; name this new nested master page `SimpleNestedAlternate.master` and bind it to the `Simple.master` master page.</span></span> <span data-ttu-id="5ddcf-234">Adicione controles ContentPlaceHolder em dois controles de conteúdo da página mestra aninhada, como fizemos na etapa 2.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-234">Add ContentPlaceHolder controls in the nested master page's two Content controls like we did in Step 2.</span></span> <span data-ttu-id="5ddcf-235">Também adicione o texto, "Olá, de SimpleNestedAlternate!"</span><span class="sxs-lookup"><span data-stu-id="5ddcf-235">Also add the text, "Hello, from SimpleNestedAlternate!"</span></span> <span data-ttu-id="5ddcf-236">no controle de conteúdo que corresponde da nível superior da página mestra `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-236">in the Content control that corresponds to the top-level master page's `MainContent` ContentPlaceHolder.</span></span> <span data-ttu-id="5ddcf-237">Depois de fazer essas alterações marcação declarativa do sua nova página mestra aninhada deve ser semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-237">After making these changes your new nested master page's declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample6.aspx)]

<span data-ttu-id="5ddcf-238">Criar uma página de conteúdo denominada `Alternate.aspx` no `NestedMasterPages` pasta e associá-lo para o `SimpleNestedAlternate.master` página mestra aninhada.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-238">Create a content page named `Alternate.aspx` in the `NestedMasterPages` folder and bind it to the `SimpleNestedAlternate.master` nested master page.</span></span> <span data-ttu-id="5ddcf-239">Adicione o texto, "Olá, da alternativa!"</span><span class="sxs-lookup"><span data-stu-id="5ddcf-239">Add the text, "Hello, from Alternate!"</span></span> <span data-ttu-id="5ddcf-240">no controle de conteúdo que corresponde ao `MainContent`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-240">in the Content control that corresponds to `MainContent`.</span></span> <span data-ttu-id="5ddcf-241">A Figura 7 mostra `Alternate.aspx` quando visualizado no Designer do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-241">Figure 7 shows `Alternate.aspx` when viewed through the Visual Studio Designer.</span></span>


<span data-ttu-id="5ddcf-242">[![Alternate.aspx é vinculada à página mestra SimpleNestedAlternate.master](nested-master-pages-cs/_static/image20.png)](nested-master-pages-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-242">[![Alternate.aspx is Bound to the SimpleNestedAlternate.master Master Page](nested-master-pages-cs/_static/image20.png)](nested-master-pages-cs/_static/image19.png)</span></span>

<span data-ttu-id="5ddcf-243">**Figura 07**: `Alternate.aspx` está associado a `SimpleNestedAlternate.master` página mestra ([clique para exibir a imagem em tamanho normal](nested-master-pages-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="5ddcf-243">**Figure 07**: `Alternate.aspx` is Bound to the `SimpleNestedAlternate.master` Master Page ([Click to view full-size image](nested-master-pages-cs/_static/image21.png))</span></span>


<span data-ttu-id="5ddcf-244">Compare o Designer na Figura 7 para o Designer na Figura 6.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-244">Compare the Designer in Figure 7 to the Designer in Figure 6.</span></span> <span data-ttu-id="5ddcf-245">Ambas as páginas de conteúdo compartilham o mesmo layout definido na página mestre de nível superior (`Simple.master`), ou seja, o título de "Aninhado mestre Tutorial das páginas (simples)".</span><span class="sxs-lookup"><span data-stu-id="5ddcf-245">Both content pages share the same layout defined in the top-level master page (`Simple.master`), namely the "Nested Master Pages Tutorial (Simple)" title.</span></span> <span data-ttu-id="5ddcf-246">Ainda têm conteúdo distinto definido em suas páginas mestras do pai – o texto "Olá, de SimpleNested!"</span><span class="sxs-lookup"><span data-stu-id="5ddcf-246">Yet both have distinct content defined in their parent master pages - the text "Hello, from SimpleNested!"</span></span> <span data-ttu-id="5ddcf-247">na Figura 6 e "Olá, de SimpleNestedAlternate!"</span><span class="sxs-lookup"><span data-stu-id="5ddcf-247">in Figure 6 and "Hello, from SimpleNestedAlternate!"</span></span> <span data-ttu-id="5ddcf-248">Figura 7.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-248">in Figure 7.</span></span> <span data-ttu-id="5ddcf-249">Tudo bem, essas diferenças aqui são triviais, mas você pode estender este exemplo para incluir as diferenças mais significativas.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-249">Granted, these differences here are trivial, but you could extend this example to include more meaningful differences.</span></span> <span data-ttu-id="5ddcf-250">Por exemplo, o `SimpleNested.master` página pode incluir um menu com opções específicas para suas páginas de conteúdo, enquanto `SimpleNestedAlternate.master` pode ter informações pertinentes para as páginas de conteúdo que se associam a ela.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-250">For instance, the `SimpleNested.master` page might include a menu with options specific to its content pages, whereas `SimpleNestedAlternate.master` might have information pertinent to the content pages that bind to it.</span></span>

<span data-ttu-id="5ddcf-251">Agora, imagine que precisávamos fazer uma alteração para o layout geral do site.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-251">Now, imagine that we needed to make a change to the overarching site layout.</span></span> <span data-ttu-id="5ddcf-252">Por exemplo, imagine que gostaríamos de adicionar uma lista de links comuns a todas as páginas de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-252">For example, imagine that we wanted to add a list of common links to all content pages.</span></span> <span data-ttu-id="5ddcf-253">Para fazer isso, podemos atualizar a página mestre de nível superior, `Simple.master`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-253">To accomplish this we update the top-level master page, `Simple.master`.</span></span> <span data-ttu-id="5ddcf-254">Lá, as alterações são refletidas imediatamente em suas páginas mestras aninhadas e, por extensão, suas páginas de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-254">Any changes there are immediately reflected in its nested master pages and, by extension, their content pages.</span></span>

<span data-ttu-id="5ddcf-255">Para demonstrar a facilidade com a qual podemos alterar o layout geral do site, abra o `Simple.master` página mestra e adicione a seguinte marcação entre o `topContent` e `mainContent` `<div>` elementos:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-255">To demonstrate the ease with which we can change the overarching site layout, open the `Simple.master` master page and add the following markup between the `topContent` and `mainContent` `<div>` elements:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample7.aspx)]

<span data-ttu-id="5ddcf-256">Isso adiciona dois links na parte superior de cada página que é associado a `Simple.master`, `SimpleNested.master`, ou `SimpleNestedAlternate.master`; essas alterações se aplicam a todas as páginas mestras e de suas páginas de conteúdo imediatamente.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-256">This adds two links to the top of every page that binds to `Simple.master`, `SimpleNested.master`, or `SimpleNestedAlternate.master`; these changes apply to all nested master pages and their content pages immediately.</span></span> <span data-ttu-id="5ddcf-257">A Figura 8 mostra `Alternate.aspx` quando visualizado por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-257">Figure 8 shows `Alternate.aspx` when viewed through a browser.</span></span> <span data-ttu-id="5ddcf-258">Observe a adição dos links na parte superior da página (em comparação comparada a Figura 7).</span><span class="sxs-lookup"><span data-stu-id="5ddcf-258">Note the addition of the links at the top of the page (compared to Figure 7).</span></span>


<span data-ttu-id="5ddcf-259">[![Alterado para a página mestra de nível superior são refletidas imediatamente em suas páginas mestras aninhadas e suas páginas de conteúdo](nested-master-pages-cs/_static/image23.png)](nested-master-pages-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-259">[![Changed to the Top-Level Master Page are Immediately Reflected in its Nested Master Pages and Their Content Pages](nested-master-pages-cs/_static/image23.png)](nested-master-pages-cs/_static/image22.png)</span></span>

<span data-ttu-id="5ddcf-260">**Figura 08**: Alterado para a página mestra de nível superior são refletidas imediatamente em suas páginas mestras aninhadas e suas páginas de conteúdo ([clique para exibir a imagem em tamanho normal](nested-master-pages-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="5ddcf-260">**Figure 08**: Changed to the Top-Level Master Page are Immediately Reflected in its Nested Master Pages and Their Content Pages ([Click to view full-size image](nested-master-pages-cs/_static/image24.png))</span></span>


## <a name="using-a-nested-master-page-for-the-administration-section"></a><span data-ttu-id="5ddcf-261">Usando uma página mestra aninhada para a seção de administração</span><span class="sxs-lookup"><span data-stu-id="5ddcf-261">Using a Nested Master Page for the Administration Section</span></span>

<span data-ttu-id="5ddcf-262">Agora que examinamos as vantagens do mestre aninhada de páginas e tenha visto o como criar e usá-los em um aplicativo ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-262">At this point we have looked at the advantages of nested master pages and have seen how to create and use them in an ASP.NET application.</span></span> <span data-ttu-id="5ddcf-263">Os exemplos nas etapas 1, 2 e 3, no entanto, envolveu a criação de uma nova página mestre de nível superior, novas páginas mestras aninhadas e páginas de conteúdo novo.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-263">The examples in Steps 1, 2, and 3, however, involved creating a new top-level master page, new nested master pages, and new content pages.</span></span> <span data-ttu-id="5ddcf-264">E quanto adicionar uma nova página mestra aninhada em um site com uma página mestre de nível superior existente e páginas de conteúdo?</span><span class="sxs-lookup"><span data-stu-id="5ddcf-264">What about adding a new nested master page to a website with an existing top-level master page and content pages?</span></span>

<span data-ttu-id="5ddcf-265">Integrar uma página mestra aninhada em um site existente e associá-la a páginas de conteúdo existentes requer um pouco mais complexa que a partir do zero.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-265">Integrating a nested master page into an existing website and associating it with existing content pages requires a bit more effort than starting from scratch.</span></span> <span data-ttu-id="5ddcf-266">As etapas 4, 5, 6 e 7 explorar esses desafios, como nós ampliamos nosso aplicativo de demonstração para incluir uma nova página mestra aninhada denominada `AdminNested.master` que contém instruções para o administrador e é usado pelas páginas do ASP.NET no `~/Admin` pasta.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-266">Steps 4, 5, 6, and 7 explore these challenges as we augment our demo application to include a new nested master page named `AdminNested.master` that contains instructions for the administrator and is used by the ASP.NET pages in the `~/Admin` folder.</span></span>

<span data-ttu-id="5ddcf-267">Integrar uma página mestra aninhada em nosso aplicativo de demonstração apresenta os obstáculos a seguir:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-267">Integrating a nested master page into our demo application introduces the following hurdles:</span></span>

- <span data-ttu-id="5ddcf-268">As páginas de conteúdo existente no `~/Admin` pasta têm certas expectativas de sua página mestra.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-268">The existing content pages in the `~/Admin` folder have certain expectations from their master page.</span></span> <span data-ttu-id="5ddcf-269">Para os iniciantes, eles esperam certos controles ContentPlaceHolder esteja presente.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-269">For starters, they expect certain ContentPlaceHolder controls to be present.</span></span> <span data-ttu-id="5ddcf-270">Além disso, o `~/Admin/AddProduct.aspx` e `~/Admin/Products.aspx` páginas chamar público da página mestra `RefreshRecentProductsGrid` método, defina seu `GridMessageText` propriedade, ou tem um manipulador de eventos para seu `PricesDoubled` eventos.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-270">Furthermore, the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages call the master page's public `RefreshRecentProductsGrid` method, set its `GridMessageText` property, or have an event handler for its `PricesDoubled` event.</span></span> <span data-ttu-id="5ddcf-271">Consequentemente, nossa página mestra aninhada deve fornecer o mesmo ContentPlaceHolders e membros públicos.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-271">Consequently, our nested master page must provide the same ContentPlaceHolders and public members.</span></span>
- <span data-ttu-id="5ddcf-272">No tutorial anterior aprimoramos o `BasePage` classe para definir dinamicamente o `Page` do objeto `MasterPageFile` propriedade com base em uma variável de sessão.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-272">In the preceding tutorial we enhanced the `BasePage` class to dynamically set the `Page` object's `MasterPageFile` property based on a Session variable.</span></span> <span data-ttu-id="5ddcf-273">Como a oferecemos suporte a páginas mestras dinâmicas ao usar páginas mestras aninhadas?</span><span class="sxs-lookup"><span data-stu-id="5ddcf-273">How to we support dynamic master pages when using nested master pages?</span></span>

<span data-ttu-id="5ddcf-274">Esses dois desafios superfície serão como criamos a página mestra aninhada e usá-lo em nossas páginas de conteúdo existentes.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-274">These two challenges will surface as we build the nested master page and use it from our existing content pages.</span></span> <span data-ttu-id="5ddcf-275">Vamos investigar e superar esses problemas conforme eles surgem.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-275">We'll investigate and surmount these issues as they arise.</span></span>

## <a name="step-4-creating-the-nested-master-page"></a><span data-ttu-id="5ddcf-276">Etapa 4: Criando a página mestra aninhada</span><span class="sxs-lookup"><span data-stu-id="5ddcf-276">Step 4: Creating the Nested Master Page</span></span>

<span data-ttu-id="5ddcf-277">Nossa primeira tarefa é criar a página mestra aninhada a ser usado pelas páginas na seção Administração.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-277">Our first task is to create the nested master page to be used by the pages in the Administration section.</span></span> <span data-ttu-id="5ddcf-278">Como vimos na etapa 2, quando adicionar um novo aninhados página mestra, precisamos especificar a página mestra do pai da página mestra aninhada.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-278">As we saw in Step 2, when adding a new nested master page we need to specify the nested master page's parent master page.</span></span> <span data-ttu-id="5ddcf-279">Mas temos duas páginas mestras de nível superior: `Site.master` e `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-279">But we have two top-level master pages: `Site.master` and `Alternate.master`.</span></span> <span data-ttu-id="5ddcf-280">Lembre-se que criamos `Alternate.master` no tutorial anterior e escreveu o código na `BasePage` classe que defina o objeto de página `MasterPageFile` propriedade em tempo de execução para um `Site.master` ou `Alternate.master` dependendo do valor da `MyMasterPage` Variável de sessão.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-280">Recall that we created `Alternate.master` in the preceding tutorial and wrote code in the `BasePage` class that set the Page object's `MasterPageFile` property at runtime to either `Site.master` or `Alternate.master` depending on the value of the `MyMasterPage` Session variable.</span></span>

<span data-ttu-id="5ddcf-281">Como podemos configurar nosso página mestra aninhada para que ele use a página mestre de nível superior apropriada?</span><span class="sxs-lookup"><span data-stu-id="5ddcf-281">How do we configure our nested master page so that it uses the appropriate top-level master page?</span></span> <span data-ttu-id="5ddcf-282">Temos duas opções:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-282">We have two options:</span></span>

- <span data-ttu-id="5ddcf-283">Criar duas páginas mestras aninhadas `AdminNestedSite.master` e `AdminNestedAlternate.master`e associá-las para as páginas mestras de nível superior `Site.master` e `Alternate.master`, respectivamente.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-283">Create two nested master pages, `AdminNestedSite.master` and `AdminNestedAlternate.master`, and bind them to the top-level master pages `Site.master` and `Alternate.master`, respectively.</span></span> <span data-ttu-id="5ddcf-284">Na `BasePage`, em seguida, definiríamos o `Page` do objeto `MasterPageFile` à página mestra aninhada apropriada.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-284">In `BasePage`, then, we'd set the `Page` object's `MasterPageFile` to the appropriate nested master page.</span></span>
- <span data-ttu-id="5ddcf-285">Criar uma única página mestra aninhada e fazer com que as páginas de conteúdo use essa página mestra específica.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-285">Create a single nested master page and have the content pages use this particular master page.</span></span> <span data-ttu-id="5ddcf-286">Em seguida, em tempo de execução, seria preciso definir da página mestra aninhada `MasterPageFile` propriedade para a página mestre de nível superior apropriada em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-286">Then, at runtime, we'd need to set the nested master page's `MasterPageFile` property to the appropriate top-level master page at runtime.</span></span> <span data-ttu-id="5ddcf-287">(Como você talvez já descobriu agora, as páginas mestras também têm um `MasterPageFile` propriedade.)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-287">(As you might have figured out by now, master pages also have a `MasterPageFile` property.)</span></span>

<span data-ttu-id="5ddcf-288">Vamos usar a segunda opção.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-288">Let's use the second option.</span></span> <span data-ttu-id="5ddcf-289">Criar um único aninhada mestre arquivo de paginação na `~/Admin` pasta chamada `AdminNested.master`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-289">Create a single nested master page file in the `~/Admin` folder named `AdminNested.master`.</span></span> <span data-ttu-id="5ddcf-290">Porque ambos `Site.master` e `Alternate.master` têm o mesmo conjunto de controles ContentPlaceHolder, não importa qual página mestre você associá-lo, embora eu recomendo que você associe-o a `Site.master` para exemplificar entre a consistência.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-290">Because both `Site.master` and `Alternate.master` have the same set of ContentPlaceHolder controls, it doesn't matter what master page you bind it to, although I encourage you to bind it to `Site.master` for consistency's sake.</span></span>


<span data-ttu-id="5ddcf-291">[![Adicione uma página mestra aninhada para a pasta ~/Admin.](nested-master-pages-cs/_static/image26.png)](nested-master-pages-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-291">[![Add a Nested Master Page to the ~/Admin Folder.](nested-master-pages-cs/_static/image26.png)](nested-master-pages-cs/_static/image25.png)</span></span>

<span data-ttu-id="5ddcf-292">**Figura 09**: Adicionar uma página mestra aninhada para o `~/Admin` pasta.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-292">**Figure 09**: Add a Nested Master Page to the `~/Admin` Folder.</span></span> <span data-ttu-id="5ddcf-293">([Clique para exibir a imagem em tamanho normal](nested-master-pages-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="5ddcf-293">([Click to view full-size image](nested-master-pages-cs/_static/image27.png))</span></span>


<span data-ttu-id="5ddcf-294">Como a página mestra aninhada é associada a uma página mestra com quatro controles ContentPlaceHolder, o Visual Studio adiciona quatro controles de conteúdo para marcação de inicial do novo arquivo de página mestra aninhada.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-294">Because the nested master page is bound to a master page with four ContentPlaceHolder controls, Visual Studio adds four Content controls to the new nested master page file's initial markup.</span></span> <span data-ttu-id="5ddcf-295">Como fizemos nas etapas 2 e 3, adicione um controle ContentPlaceHolder em cada controle de conteúdo, dando a ele o mesmo nome que o controle de ContentPlaceHolder o nível superior da página mestra.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-295">Like we did in Steps 2 and 3, add a ContentPlaceHolder control in each Content control, giving it the same name as the top-level master page's ContentPlaceHolder control.</span></span> <span data-ttu-id="5ddcf-296">Também adicione a seguinte marcação para o controle de conteúdo que corresponde ao `MainContent` ContentPlaceHolder:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-296">Also add the following markup to the Content control that corresponds to the `MainContent` ContentPlaceHolder:</span></span>


[!code-html[Main](nested-master-pages-cs/samples/sample8.html)]

<span data-ttu-id="5ddcf-297">Em seguida, defina as `instructions` da classe CSS em de `Styles.css` e `AlternateStyles.css` arquivos CSS.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-297">Next, define the `instructions` CSS class in the `Styles.css` and `AlternateStyles.css` CSS files.</span></span> <span data-ttu-id="5ddcf-298">As regras CSS a seguir fazem com que os elementos HTML com o estilo de `instructions` classe a ser exibido com uma cor de plano de fundo amarelo claro e uma borda preta sólida:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-298">The following CSS rules cause HTML elements styled with the `instructions` class to be displayed with a light yellow background color and a black, solid border:</span></span>


[!code-css[Main](nested-master-pages-cs/samples/sample9.css)]

<span data-ttu-id="5ddcf-299">Porque essa marcação foi adicionada à página mestra aninhada, ele será exibido apenas nessas páginas que usam essa página mestra aninhada (ou seja, as páginas na seção Administration).</span><span class="sxs-lookup"><span data-stu-id="5ddcf-299">Because this markup has been added to the nested master page, it will only appear in those pages that use this nested master page (namely, the pages in the Administration section).</span></span>

<span data-ttu-id="5ddcf-300">Depois de fazer essas adições para sua página mestra aninhada, sua marcação declarativa deve ser semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-300">After making these additions to your nested master page, its declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample10.aspx)]

<span data-ttu-id="5ddcf-301">Observe que cada controle de conteúdo tem um controle ContentPlaceHolder e que os controles ContentPlaceHolder `ID` propriedades recebem os mesmos valores que os controles de ContentPlaceHolder correspondentes na página mestre de nível superior.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-301">Note that each Content control has a ContentPlaceHolder control and that the ContentPlaceHolder controls' `ID` properties are assigned the same values as the corresponding ContentPlaceHolder controls in the top-level master page.</span></span> <span data-ttu-id="5ddcf-302">Além disso, a marcação da seção específica de administração aparece no `MainContent` ContentPlaceHolder.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-302">Moreover, the Administration section-specific markup appears in the `MainContent` ContentPlaceHolder.</span></span>

<span data-ttu-id="5ddcf-303">A Figura 10 mostra a `AdminNested.master` página mestra aninhada quando visualizado no Designer do Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-303">Figure 10 shows the `AdminNested.master` nested master page when viewed through Visual Studio's Designer.</span></span> <span data-ttu-id="5ddcf-304">Você pode ver as instruções na caixa amarela na parte superior do `MainContent` controle de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-304">You can see the instructions in the yellow box at the top of the `MainContent` Content control.</span></span>


<span data-ttu-id="5ddcf-305">[![A página mestra aninhada estende a página mestre de nível superior para incluir instruções para o administrador.](nested-master-pages-cs/_static/image29.png)](nested-master-pages-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-305">[![The Nested Master Page Extends the Top-Level Master Page to Include Instructions for the Administrator.](nested-master-pages-cs/_static/image29.png)](nested-master-pages-cs/_static/image28.png)</span></span>

<span data-ttu-id="5ddcf-306">**Figura 10**: A página mestra aninhada estende a página mestre de nível superior para incluir instruções para o administrador.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-306">**Figure 10**: The Nested Master Page Extends the Top-Level Master Page to Include Instructions for the Administrator.</span></span> <span data-ttu-id="5ddcf-307">([Clique para exibir a imagem em tamanho normal](nested-master-pages-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="5ddcf-307">([Click to view full-size image](nested-master-pages-cs/_static/image30.png))</span></span>


## <a name="step-5-updating-the-existing-content-pages-to-use-the-new-nested-master-page"></a><span data-ttu-id="5ddcf-308">Etapa 5: Atualizando as páginas de conteúdo existentes para usar a nova página mestra aninhada</span><span class="sxs-lookup"><span data-stu-id="5ddcf-308">Step 5: Updating the Existing Content Pages to Use the New Nested Master Page</span></span>

<span data-ttu-id="5ddcf-309">A qualquer momento que podemos adicionar uma nova página de conteúdo para a seção de administração, é preciso associá-lo para o `AdminNested.master` página mestra que acabamos de criar.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-309">Anytime we add a new content page to the Administration section we need to bind it to the `AdminNested.master` master page we just created.</span></span> <span data-ttu-id="5ddcf-310">Mas e quanto existente páginas de conteúdo?</span><span class="sxs-lookup"><span data-stu-id="5ddcf-310">But what about the existing content pages?</span></span> <span data-ttu-id="5ddcf-311">Atualmente, todas as páginas de conteúdo no site derivam o `BasePage` classe, que define programaticamente o conteúdo da página mestra em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-311">Currently, all content pages in the site derive from the `BasePage` class, which programmatically sets the content page's master page at runtime.</span></span> <span data-ttu-id="5ddcf-312">Isso não é o comportamento que queremos para as páginas de conteúdo na seção Administração.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-312">This is not the behavior we want for the content pages in the Administration section.</span></span> <span data-ttu-id="5ddcf-313">Em vez disso, queremos que essas páginas de conteúdo para usar sempre o `AdminNested.master` página.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-313">Instead, we want these content pages to always use the `AdminNested.master` page.</span></span> <span data-ttu-id="5ddcf-314">É responsabilidade da página mestra aninhada para escolher a página de conteúdo de nível superior à direita em tempo de execução.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-314">It will be the responsibility of the nested master page to choose the right top-level content page at runtime.</span></span>

<span data-ttu-id="5ddcf-315">A melhor maneira de conseguir isso desejado comportamento é criar uma nova classe de página de base personalizada denominada `AdminBasePage` que se estende a `BasePage` classe.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-315">To best way to achieve this desired behavior is to create a new custom base page class named `AdminBasePage` that extends the `BasePage` class.</span></span> <span data-ttu-id="5ddcf-316">`AdminBasePage` em seguida, pode substituir a `SetMasterPageFile` e defina o `Page` do objeto `MasterPageFile` ao valor embutido em código "~ / Admin/AdminNested.master".</span><span class="sxs-lookup"><span data-stu-id="5ddcf-316">`AdminBasePage` can then override the `SetMasterPageFile` and set the `Page` object's `MasterPageFile` to the hard-coded value "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="5ddcf-317">Dessa forma, qualquer página que deriva de `AdminBasePage` usará `AdminNested.master`, enquanto que qualquer página que é derivado de `BasePage` terá seu `MasterPageFile` propriedade definido dinamicamente como "~ / Master" ou "~ / Alternate.master" com base no valor da `MyMasterPage` Variável de sessão.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-317">In this way, any page that derives from `AdminBasePage` will use `AdminNested.master`, whereas any page that derives from `BasePage` will have its `MasterPageFile` property set dynamically to either "~/Site.master" or "~/Alternate.master" based on the value of the `MyMasterPage` Session variable.</span></span>

<span data-ttu-id="5ddcf-318">Comece adicionando um novo arquivo de classe para o `App_Code` pasta chamada `AdminBasePage.cs`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-318">Start by adding a new class file to the `App_Code` folder named `AdminBasePage.cs`.</span></span> <span data-ttu-id="5ddcf-319">Ter `AdminBasePage` estender `BasePage` e, em seguida, substituir o `SetMasterPageFile` método.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-319">Have `AdminBasePage` extend `BasePage` and then override the `SetMasterPageFile` method.</span></span> <span data-ttu-id="5ddcf-320">Nesse método, atribua o `MasterPageFile` o valor "~ / Admin/AdminNested.master".</span><span class="sxs-lookup"><span data-stu-id="5ddcf-320">In that method assign the `MasterPageFile` the value "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="5ddcf-321">Depois de fazer essas alterações em sua classe de arquivo deve ser semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-321">After making these changes your class file should look similar to the following:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample11.cs)]

<span data-ttu-id="5ddcf-322">Agora, é necessário ter as páginas de conteúdo existentes na administração seção derivam `AdminBasePage` em vez de `BasePage`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-322">We now need to have the existing content pages in the Administration section derive from `AdminBasePage` instead of `BasePage`.</span></span> <span data-ttu-id="5ddcf-323">Vá para o arquivo de classe code-behind para cada página de conteúdo no `~/Admin` pasta e fazer essa alteração.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-323">Go to the code-behind class file for each content page in the `~/Admin` folder and make this change.</span></span> <span data-ttu-id="5ddcf-324">Por exemplo, no `~/Admin/Default.aspx` você alteraria a declaração de classe de lógica de:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-324">For example, in `~/Admin/Default.aspx` you'd change the code-behind class declaration from:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample12.cs)]

<span data-ttu-id="5ddcf-325">Para:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-325">To:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample13.cs)]

<span data-ttu-id="5ddcf-326">Figura 11 ilustra como a página mestre de nível superior (`Site.master` ou `Alternate.master`), a página mestra aninhada (`AdminNested.master`), e as páginas de conteúdo seção Administração se relacionam entre si.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-326">Figure 11 depicts how the top-level master page (`Site.master` or `Alternate.master`), the nested master page (`AdminNested.master`), and the Administration section content pages relate to one another.</span></span>


<span data-ttu-id="5ddcf-327">[![A página mestra aninhada define o conteúdo específico para as páginas na seção Administração](nested-master-pages-cs/_static/image32.png)](nested-master-pages-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-327">[![The Nested Master Page Defines Content Specific to the Pages in the Administration Section](nested-master-pages-cs/_static/image32.png)](nested-master-pages-cs/_static/image31.png)</span></span>

<span data-ttu-id="5ddcf-328">**Figura 11**: O aninhados mestre página define conteúdo específicos para as páginas na seção Administration ([clique para exibir a imagem em tamanho normal](nested-master-pages-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="5ddcf-328">**Figure 11**: The Nested Master Page Defines Content Specific to the Pages in the Administration Section ([Click to view full-size image](nested-master-pages-cs/_static/image33.png))</span></span>


## <a name="step-6-mirroring-the-master-pages-public-methods-and-properties"></a><span data-ttu-id="5ddcf-329">Etapa 6: Espelhamento de propriedades e métodos públicos da página mestra</span><span class="sxs-lookup"><span data-stu-id="5ddcf-329">Step 6: Mirroring the Master Page's Public Methods and Properties</span></span>

<span data-ttu-id="5ddcf-330">Lembre-se de que o `~/Admin/AddProduct.aspx` e `~/Admin/Products.aspx` páginas interagem programaticamente com a página mestra: `~/Admin/AddProduct.aspx` chamadas a página mestra do pública `RefreshRecentProductsGrid` método e define seu `GridMessageText` propriedade; `~/Admin/Products.aspx` tem um manipulador de eventos para o `PricesDoubled` eventos.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-330">Recall that the `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages interact programmatically with the master page: `~/Admin/AddProduct.aspx` calls the master page's public `RefreshRecentProductsGrid` method and sets its `GridMessageText` property; `~/Admin/Products.aspx` has an event handler for the `PricesDoubled` event.</span></span> <span data-ttu-id="5ddcf-331">No tutorial anterior, criamos um resumo `BaseMasterPage` classe que definiu esses membros públicos.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-331">In the preceding tutorial we created an abstract `BaseMasterPage` class that defined these public members.</span></span>

<span data-ttu-id="5ddcf-332">O `~/Admin/AddProduct.aspx` e `~/Admin/Products.aspx` páginas supõem que sua página mestra deriva o `BaseMasterPage` classe.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-332">The `~/Admin/AddProduct.aspx` and `~/Admin/Products.aspx` pages assume that their master page derives from the `BaseMasterPage` class.</span></span> <span data-ttu-id="5ddcf-333">O `AdminNested.master` página, no entanto, atualmente, estende o `System.Web.UI.MasterPage` classe.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-333">The `AdminNested.master` page, however, currently extends the `System.Web.UI.MasterPage` class.</span></span> <span data-ttu-id="5ddcf-334">Como resultado, ao visitar `~/Admin/Products.aspx` um `InvalidCastException` é lançada com a mensagem: "Não é possível converter o objeto do tipo ' ASP.admin\_adminnested\_mestre ' para o tipo 'BaseMasterPage'."</span><span class="sxs-lookup"><span data-stu-id="5ddcf-334">As a result, when visiting `~/Admin/Products.aspx` an `InvalidCastException` is thrown with the message: "Unable to cast object of type 'ASP.admin\_adminnested\_master' to type 'BaseMasterPage'."</span></span>

<span data-ttu-id="5ddcf-335">Para corrigir isso, precisamos ter o `AdminNested.master` estender classe code-behind `BaseMasterPage`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-335">To fix this we need to have the `AdminNested.master` code-behind class extend `BaseMasterPage`.</span></span> <span data-ttu-id="5ddcf-336">Atualize a declaração de classe da página mestra aninhada de lógica de:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-336">Update the nested master page's code-behind class declaration from:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample14.cs)]

<span data-ttu-id="5ddcf-337">Para:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-337">To:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample15.cs)]

<span data-ttu-id="5ddcf-338">Nós não ainda terminou.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-338">We're not done yet.</span></span> <span data-ttu-id="5ddcf-339">Porque o `BaseMasterPage` classe é abstrata, é preciso substituir o `abstract` membros `RefreshRecentProductsGrid` e `GridMessageText`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-339">Because the `BaseMasterPage` class is abstract, we need to override the `abstract` members, `RefreshRecentProductsGrid` and `GridMessageText`.</span></span> <span data-ttu-id="5ddcf-340">Esses membros são usados pelas páginas mestras nível superior para atualizar suas interfaces de usuário.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-340">These members are used by the top-level master pages to update their user interfaces.</span></span> <span data-ttu-id="5ddcf-341">(Na verdade, somente o `Site.master` página mestre usa esses métodos, embora ambas as páginas mestras de nível superior para implementar esses métodos, já que ambos estendem `BaseMasterPage`.)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-341">(Actually, only the `Site.master` master page uses these methods, although both top-level master pages implement these methods, since both extend `BaseMasterPage`.)</span></span>

<span data-ttu-id="5ddcf-342">Embora, precisamos implementar esses membros de `AdminNested.master`, tudo o que essas implementações precisam fazer é simplesmente chamar o mesmo membro no nível superior página mestra usada pela página mestra aninhada.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-342">While we need to implement these members in `AdminNested.master`, all these implementations need to do is simply call the same member in the top-level master page used by the nested master page.</span></span> <span data-ttu-id="5ddcf-343">Por exemplo, quando uma página de conteúdo na seção Administração chama da página mestra aninhada `RefreshRecentProductsGrid` método, a página mestra aninhada precisa fazer é, por sua vez, chamar `Site.master` ou `Alternate.master`do `RefreshRecentProductsGrid` método.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-343">For instance, when a content page in the Administration section calls the nested master page's `RefreshRecentProductsGrid` method, all the nested master page needs to do is, in turn, call `Site.master` or `Alternate.master`'s `RefreshRecentProductsGrid` method.</span></span>

<span data-ttu-id="5ddcf-344">Para fazer isso, comece adicionando o seguinte `@MasterType` diretiva na parte superior do `AdminNested.master`:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-344">To achieve this, start by adding the following `@MasterType` directive to the top of `AdminNested.master`:</span></span>


[!code-aspx[Main](nested-master-pages-cs/samples/sample16.aspx)]

<span data-ttu-id="5ddcf-345">Lembre-se de que o `@MasterType` diretiva adiciona uma propriedade fortemente tipada para a classe code-behind chamado `Master`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-345">Recall that the `@MasterType` directive adds a strongly-typed property to the code-behind class named `Master`.</span></span> <span data-ttu-id="5ddcf-346">Em seguida, substituir os `RefreshRecentProductsGrid` e `GridMessageText` membros e simplesmente delegar a chamada para o `Master`correspondente do método:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-346">Then override the `RefreshRecentProductsGrid` and `GridMessageText` members and simply delegate the call to the `Master`'s corresponding method:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample17.cs)]

<span data-ttu-id="5ddcf-347">Com esse código em vigor, você poderá visitar e usar as páginas de conteúdo na seção Administração.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-347">With this code in place, you should be able to visit and use the content pages in the Administration section.</span></span> <span data-ttu-id="5ddcf-348">A Figura 12 mostra o `~/Admin/Products.aspx` página quando visualizado por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-348">Figure 12 shows the `~/Admin/Products.aspx` page when viewed through a browser.</span></span> <span data-ttu-id="5ddcf-349">Como você pode ver, a página inclui a caixa de instruções de administração, que é definida na página mestra aninhada.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-349">As you can see, the page includes the Administration Instructions box, which is defined in the nested master page.</span></span>


<span data-ttu-id="5ddcf-350">[![As páginas de conteúdo na seção Administração incluem instruções na parte superior de cada página](nested-master-pages-cs/_static/image35.png)](nested-master-pages-cs/_static/image34.png)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-350">[![The Content Pages in the Administration Section Include Instructions at the Top of Each Page](nested-master-pages-cs/_static/image35.png)](nested-master-pages-cs/_static/image34.png)</span></span>

<span data-ttu-id="5ddcf-351">**Figura 12**: As páginas de conteúdo a seção Administração incluem instruções na parte superior de cada página ([clique para exibir a imagem em tamanho normal](nested-master-pages-cs/_static/image36.png))</span><span class="sxs-lookup"><span data-stu-id="5ddcf-351">**Figure 12**: The Content Pages in the Administration Section Include Instructions at the Top of Each Page ([Click to view full-size image](nested-master-pages-cs/_static/image36.png))</span></span>


## <a name="step-7-using-the-appropriate-top-level-master-page-at-runtime"></a><span data-ttu-id="5ddcf-352">Etapa 7: Usando a página de mestre de nível superior apropriado em tempo de execução</span><span class="sxs-lookup"><span data-stu-id="5ddcf-352">Step 7: Using the Appropriate Top-Level Master Page at Runtime</span></span>

<span data-ttu-id="5ddcf-353">Enquanto todas as páginas de conteúdo na seção Administração estão totalmente funcionais, eles usam a mesma página mestra de nível superior e ignorar a página mestra selecionada pelo usuário em `ChooseMasterPage.aspx`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-353">While all the content pages in the Administration section are fully functional, they all use the same top-level master page and ignore the master page selected by the user at `ChooseMasterPage.aspx`.</span></span> <span data-ttu-id="5ddcf-354">Esse comportamento é devido ao fato de que a página mestra aninhada tem seu `MasterPageFile` propriedade estaticamente definida como `Site.master` em seu `<%@ Master %>` diretiva.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-354">This behavior is due to the fact that the nested master page has its `MasterPageFile` property statically set to `Site.master` in its `<%@ Master %>` directive.</span></span>

<span data-ttu-id="5ddcf-355">Para usar a página mestre de nível superior selecionada pelo usuário final, precisamos definir a `AdminNested.master`do `MasterPageFile` propriedade para o valor no `MyMasterPage` variável de sessão.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-355">To use the top-level master page selected by the end user we need to set the `AdminNested.master`'s `MasterPageFile` property to the value in the `MyMasterPage` Session variable.</span></span> <span data-ttu-id="5ddcf-356">Porque definimos as conteúdo das páginas `MasterPageFile` propriedades na `BasePage`, você pode achar que nós a definiríamos da página mestra aninhada `MasterPageFile` propriedade na `BaseMasterPage` ou no `AdminNested.master`da classe code-behind.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-356">Because we set the content pages' `MasterPageFile` properties in `BasePage`, you may think that we would set the nested master page's `MasterPageFile` property in `BaseMasterPage` or in the `AdminNested.master`'s code-behind class.</span></span> <span data-ttu-id="5ddcf-357">Isso não funcionar, no entanto, porque é preciso ter definido a `MasterPageFile` propriedade até o final do estágio PreInit.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-357">This won't work, however, because we need to have set the `MasterPageFile` property by the end of the PreInit stage.</span></span> <span data-ttu-id="5ddcf-358">O horário mais cedo que podemos programaticamente explorar o ciclo de vida da página de uma página mestre é o estágio de inicialização (o que ocorre após o estágio de PreInit).</span><span class="sxs-lookup"><span data-stu-id="5ddcf-358">The earliest time that we can programmatically tap into the page lifecycle from a master page is the Init stage (which occurs after the PreInit stage).</span></span>

<span data-ttu-id="5ddcf-359">Portanto, precisamos definir da página mestra aninhada `MasterPageFile` propriedade de páginas de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-359">Therefore, we need to set the nested master page's `MasterPageFile` property from the content pages.</span></span> <span data-ttu-id="5ddcf-360">O único conteúdo de páginas que usam o `AdminNested.master` derivam de página mestra `AdminBasePage`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-360">The only content pages that use the `AdminNested.master` master page derive from `AdminBasePage`.</span></span> <span data-ttu-id="5ddcf-361">Portanto, podemos colocar essa lógica existe.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-361">Therefore, we can put this logic there.</span></span> <span data-ttu-id="5ddcf-362">Na etapa 5 ou seja, substituímos o `SetMasterPageFile` método, configurando a `Page` do objeto `MasterPageFile` propriedade como "~ / Admin/AdminNested.master".</span><span class="sxs-lookup"><span data-stu-id="5ddcf-362">In Step 5 we overrode the `SetMasterPageFile` method, setting the `Page` object's `MasterPageFile` property to "~/Admin/AdminNested.master".</span></span> <span data-ttu-id="5ddcf-363">Atualização `SetMasterPageFile` para definir também a página mestra `MasterPageFile` propriedade para o resultado armazenado na sessão:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-363">Update `SetMasterPageFile` to also set the master page's `MasterPageFile` property to the result stored in Session:</span></span>


[!code-csharp[Main](nested-master-pages-cs/samples/sample18.cs)]

<span data-ttu-id="5ddcf-364">O `GetMasterPageFileFromSession` método, que adicionamos ao `BasePage` classe no tutorial anterior, retorna o caminho do arquivo de página mestra apropriado com base no valor da variável de sessão.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-364">The `GetMasterPageFileFromSession` method, which we added to the `BasePage` class in the preceding tutorial, returns the appropriate master page file path based on the Session variable value.</span></span>

<span data-ttu-id="5ddcf-365">Com essa alteração em vigor, a seleção do usuário página mestra é transportado para a seção de administração.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-365">With this change in place, the user's master page selection carries over to the Administration section.</span></span> <span data-ttu-id="5ddcf-366">Figura 13 mostra a mesma página como a Figura 12, mas depois que o usuário alterou sua seleção de página mestra para `Alternate.master`.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-366">Figure 13 shows the same page as Figure 12, but after the user has changed their master page selection to `Alternate.master`.</span></span>


<span data-ttu-id="5ddcf-367">[![A página de administração aninhada usa a página mestre de nível superior selecionado pelo usuário](nested-master-pages-cs/_static/image38.png)](nested-master-pages-cs/_static/image37.png)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-367">[![The Nested Administration Page Uses the Top-Level Master Page Selected by the User](nested-master-pages-cs/_static/image38.png)](nested-master-pages-cs/_static/image37.png)</span></span>

<span data-ttu-id="5ddcf-368">**Figura 13**: A página de administração Nested usa a página mestre de nível superior selecionado pelo usuário ([clique para exibir a imagem em tamanho normal](nested-master-pages-cs/_static/image39.png))</span><span class="sxs-lookup"><span data-stu-id="5ddcf-368">**Figure 13**: The Nested Administration Page Uses the Top-Level Master Page Selected by the User ([Click to view full-size image](nested-master-pages-cs/_static/image39.png))</span></span>


## <a name="summary"></a><span data-ttu-id="5ddcf-369">Resumo</span><span class="sxs-lookup"><span data-stu-id="5ddcf-369">Summary</span></span>

<span data-ttu-id="5ddcf-370">Muito páginas de conteúdo como like podem associar a uma página mestra, é possível criar aninhado páginas mestras, fazendo com que uma página mestra filha associar a uma página mestra pai.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-370">Much like how content pages can bind to a master page, it is possible to create nested master pages by having a child master page bind to a parent master page.</span></span> <span data-ttu-id="5ddcf-371">A página mestra filha pode definir controles de conteúdo para cada um dos ContentPlaceHolders do pai; ele pode adicionar seus próprios controles ContentPlaceHolder (bem como outra marcação) a esses controles de conteúdo.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-371">The child master page may define Content controls for each of its parent's ContentPlaceHolders; it can then add its own ContentPlaceHolder controls (as well as other markup) to these Content controls.</span></span> <span data-ttu-id="5ddcf-372">Páginas mestras aninhadas são bastante útil em aplicativos web grandes, onde todas as páginas compartilhem uma aparência abrangente, mas determinadas seções do site exigem personalizações exclusivas.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-372">Nested master pages are quite useful in large web applications where all pages share an overarching look and feel, yet certain sections of the site require unique customizations.</span></span>

<span data-ttu-id="5ddcf-373">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="5ddcf-373">Happy Programming!</span></span>

### <a name="further-reading"></a><span data-ttu-id="5ddcf-374">Leitura adicional</span><span class="sxs-lookup"><span data-stu-id="5ddcf-374">Further Reading</span></span>

<span data-ttu-id="5ddcf-375">Para obter mais informações sobre os tópicos abordados neste tutorial, consulte os seguintes recursos:</span><span class="sxs-lookup"><span data-stu-id="5ddcf-375">For more information on the topics discussed in this tutorial, refer to the following resources:</span></span>

- [<span data-ttu-id="5ddcf-376">Páginas mestras do ASP.NET aninhadas</span><span class="sxs-lookup"><span data-stu-id="5ddcf-376">Nested ASP.NET Master Pages</span></span>](https://msdn.microsoft.com/library/x2b3ktt7.aspx)
- [<span data-ttu-id="5ddcf-377">Dicas para páginas mestras aninhadas e tempo de Design do VS 2005</span><span class="sxs-lookup"><span data-stu-id="5ddcf-377">Tips for Nested Master Pages and VS 2005 Design-Time</span></span>](https://weblogs.asp.net/scottgu/archive/2005/11/11/430382.aspx)
- [<span data-ttu-id="5ddcf-378">VS 2008 aninhados suporte a página mestra</span><span class="sxs-lookup"><span data-stu-id="5ddcf-378">VS 2008 Nested Master Page Support</span></span>](https://weblogs.asp.net/scottgu/archive/2007/07/09/vs-2008-nested-master-page-support.aspx)

### <a name="about-the-author"></a><span data-ttu-id="5ddcf-379">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="5ddcf-379">About the Author</span></span>

<span data-ttu-id="5ddcf-380">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de vários livros sobre ASP/ASP.NET e fundador da 4GuysFromRolla.com, trabalha com tecnologias Web Microsoft desde 1998.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-380">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of multiple ASP/ASP.NET books and founder of 4GuysFromRolla.com, has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="5ddcf-381">Scott funciona como um consultor independente, instrutor e escritor.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-381">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="5ddcf-382">Seu livro mais recente é [ *Sams Teach por conta própria ASP.NET 3.5 in 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="5ddcf-382">His latest book is [*Sams Teach Yourself ASP.NET 3.5 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672329972/4guysfromrollaco).</span></span> <span data-ttu-id="5ddcf-383">Scott pode ser contatado pelo [ mitchell@4GuysFromRolla.com ](mailto:mitchell@4GuysFromRolla.com) ou por meio de seu blog em [ http://ScottOnWriting.NET ](http://scottonwriting.net/).</span><span class="sxs-lookup"><span data-stu-id="5ddcf-383">Scott can be reached at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com) or via his blog at [http://ScottOnWriting.NET](http://scottonwriting.net/).</span></span>

### <a name="special-thanks-to"></a><span data-ttu-id="5ddcf-384">Agradecimentos especiais a</span><span class="sxs-lookup"><span data-stu-id="5ddcf-384">Special Thanks To</span></span>

<span data-ttu-id="5ddcf-385">Esta série de tutoriais foi revisada por muitos revisores úteis.</span><span class="sxs-lookup"><span data-stu-id="5ddcf-385">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="5ddcf-386">Você está interessado na revisão Meus próximos artigos do MSDN?</span><span class="sxs-lookup"><span data-stu-id="5ddcf-386">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="5ddcf-387">Nesse caso, escreva-me em [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-387">If so, drop me a line at [mitchell@4GuysFromRolla.com](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="5ddcf-388">[Anterior](specifying-the-master-page-programmatically-cs.md)
> [Próximo](creating-a-site-wide-layout-using-master-pages-vb.md)</span><span class="sxs-lookup"><span data-stu-id="5ddcf-388">[Previous](specifying-the-master-page-programmatically-cs.md)
[Next](creating-a-site-wide-layout-using-master-pages-vb.md)</span></span>
