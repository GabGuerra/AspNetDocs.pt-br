---
uid: web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
title: Mestre/detalhes filtragem com uma DropDownList (C#) | Microsoft Docs
author: rick-anderson
description: Neste tutorial, veremos como exibir os registros principais em um controle DropDownList e os detalhes do item de lista selecionado em um GridView.
ms.author: riande
ms.date: 03/31/2010
ms.assetid: 53e659cc-eefb-40c1-a1dc-559481c99443
msc.legacyurl: /web-forms/overview/data-access/masterdetail/master-detail-filtering-with-a-dropdownlist-cs
msc.type: authoredcontent
ms.openlocfilehash: a2d7a27a8bf9da365e4f48d7ca2d9d902ec4a5ba
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57048463"
---
<a name="masterdetail-filtering-with-a-dropdownlist-c"></a><span data-ttu-id="95578-103">Filtragem mestre/detalhes com uma DropDownList (C#)</span><span class="sxs-lookup"><span data-stu-id="95578-103">Master/Detail Filtering With a DropDownList (C#)</span></span>
====================
<span data-ttu-id="95578-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="95578-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="95578-105">[Baixe o aplicativo de exemplo](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) ou [baixar PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="95578-105">[Download Sample App](http://download.microsoft.com/download/4/6/3/463cf87c-4724-4cbc-b7b5-3f866f43ba50/ASPNET_Data_Tutorial_7_CS.exe) or [Download PDF](master-detail-filtering-with-a-dropdownlist-cs/_static/datatutorial07cs1.pdf)</span></span>

> <span data-ttu-id="95578-106">Neste tutorial, veremos como exibir os registros principais em um controle DropDownList e os detalhes do item de lista selecionado em um GridView.</span><span class="sxs-lookup"><span data-stu-id="95578-106">In this tutorial we'll see how to display the master records in a DropDownList control and the details of the selected list item in a GridView.</span></span>


## <a name="introduction"></a><span data-ttu-id="95578-107">Introdução</span><span class="sxs-lookup"><span data-stu-id="95578-107">Introduction</span></span>

<span data-ttu-id="95578-108">Um tipo comum de relatório é o *relatório de mestre/detalhes*, no qual o relatório começa mostrando um conjunto de registros "mestres".</span><span class="sxs-lookup"><span data-stu-id="95578-108">A common type of report is the *master/detail report*, in which the report begins by showing some set of "master" records.</span></span> <span data-ttu-id="95578-109">O usuário pode, em seguida, fazer drill down em um dos registros mestres, assim, detalhes do registro mestre "."</span><span class="sxs-lookup"><span data-stu-id="95578-109">The user can then drill down into one of the master records, thereby viewing that master record's "details."</span></span> <span data-ttu-id="95578-110">Mestre/detalhes relatórios é uma opção ideal para visualizar relações um-para-muitos, como um relatório que mostra todas as categorias e, em seguida, que permite ao usuário selecionar uma categoria específica e exibir seus produtos associados.</span><span class="sxs-lookup"><span data-stu-id="95578-110">Master/detail reports are an ideal choice for visualizing one-to-many relationships, such as a report showing all of the categories and then allowing a user to select a particular category and display its associated products.</span></span> <span data-ttu-id="95578-111">Além disso, os relatórios mestre/detalhes são úteis para exibir informações detalhadas de tabelas particularmente "largos" (aqueles que têm muitas colunas).</span><span class="sxs-lookup"><span data-stu-id="95578-111">Additionally, master/detail reports are useful for displaying detailed information from particularly "wide" tables (ones that have a lot of columns).</span></span> <span data-ttu-id="95578-112">Por exemplo, o nível de "mestre" de um relatório de detalhes mestre pode mostrar apenas o nome e a unidade de preço do produto dos produtos no banco de dados e fazer uma busca detalhada em um determinado produto mostraria os campos adicionais do produto (categoria, fornecedor, quantidade por unidade, e assim por diante).</span><span class="sxs-lookup"><span data-stu-id="95578-112">For example, the "master" level of a master/detail report might show just the product name and unit price of the products in the database, and drilling down into a particular product would show the additional product fields (category, supplier, quantity per unit, and so on).</span></span>

<span data-ttu-id="95578-113">Há muitas maneiras com que um relatório mestre/detalhes pode ser implementado.</span><span class="sxs-lookup"><span data-stu-id="95578-113">There are many ways with which a master/detail report can be implemented.</span></span> <span data-ttu-id="95578-114">Sobre isso e os próximos três tutoriais, examinaremos uma variedade de relatórios mestre/detalhes.</span><span class="sxs-lookup"><span data-stu-id="95578-114">Over this and the next three tutorials we'll look at a variety of master/detail reports.</span></span> <span data-ttu-id="95578-115">Neste tutorial, veremos como exibir os registros principais em um [controle DropDownList](https://msdn.microsoft.com/library/dtx91y0z.aspx) e os detalhes do item de lista selecionado em um GridView.</span><span class="sxs-lookup"><span data-stu-id="95578-115">In this tutorial we'll see how to display the master records in a [DropDownList control](https://msdn.microsoft.com/library/dtx91y0z.aspx) and the details of the selected list item in a GridView.</span></span> <span data-ttu-id="95578-116">Em particular, o relatório de detalhes mestre deste tutorial lista as informações de categoria e produto.</span><span class="sxs-lookup"><span data-stu-id="95578-116">In particular, this tutorial's master/detail report will list category and product information.</span></span>

## <a name="step-1-displaying-the-categories-in-a-dropdownlist"></a><span data-ttu-id="95578-117">Etapa 1: Exibindo as categorias na DropDownList</span><span class="sxs-lookup"><span data-stu-id="95578-117">Step 1: Displaying the Categories in a DropDownList</span></span>

<span data-ttu-id="95578-118">Nosso relatório mestre/detalhes listará as categorias na DropDownList, com produtos do item de lista selecionado exibidos mais adiante na página em um GridView.</span><span class="sxs-lookup"><span data-stu-id="95578-118">Our master/detail report will list the categories in a DropDownList, with the selected list item's products displayed further down in the page in a GridView.</span></span> <span data-ttu-id="95578-119">A primeira tarefa à frente de nós, em seguida, é ter as categorias exibidas na DropDownList.</span><span class="sxs-lookup"><span data-stu-id="95578-119">The first task ahead of us, then, is to have the categories displayed in a DropDownList.</span></span> <span data-ttu-id="95578-120">Abrir o `FilterByDropDownList.aspx` página o `Filtering` pasta, arraste uma DropDownList da caixa de ferramentas para o designer da página e defina seu `ID` propriedade para `Categories`.</span><span class="sxs-lookup"><span data-stu-id="95578-120">Open the `FilterByDropDownList.aspx` page in the `Filtering` folder, drag on a DropDownList from the Toolbox onto the page's designer, and set its `ID` property to `Categories`.</span></span> <span data-ttu-id="95578-121">Em seguida, clique no link na marca inteligente do DropDownList Escolher fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="95578-121">Next, click on the Choose Data Source link from the DropDownList's smart tag.</span></span> <span data-ttu-id="95578-122">Isso exibirá o Assistente de configuração de fonte de dados.</span><span class="sxs-lookup"><span data-stu-id="95578-122">This will display the Data Source Configuration wizard.</span></span>


<span data-ttu-id="95578-123">[![Especifique a fonte de dados do DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="95578-123">[![Specify the DropDownList's Data Source](master-detail-filtering-with-a-dropdownlist-cs/_static/image2.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image1.png)</span></span>

<span data-ttu-id="95578-124">**Figura 1**: Especifique fonte a DropDownList de dados ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="95578-124">**Figure 1**: Specify the DropDownList's Data Source ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image3.png))</span></span>


<span data-ttu-id="95578-125">Optar por adicionar um novo ObjectDataSource denominado `CategoriesDataSource` que invoca a `CategoriesBLL` da classe `GetCategories()` método.</span><span class="sxs-lookup"><span data-stu-id="95578-125">Choose to add a new ObjectDataSource named `CategoriesDataSource` that invokes the `CategoriesBLL` class's `GetCategories()` method.</span></span>


<span data-ttu-id="95578-126">[![Adicionar um novo ObjectDataSource chamado CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="95578-126">[![Add a New ObjectDataSource Named CategoriesDataSource](master-detail-filtering-with-a-dropdownlist-cs/_static/image5.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image4.png)</span></span>

<span data-ttu-id="95578-127">**Figura 2**: Adicionar um novo ObjectDataSource nomeado `CategoriesDataSource` ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="95578-127">**Figure 2**: Add a New ObjectDataSource Named `CategoriesDataSource` ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image6.png))</span></span>


<span data-ttu-id="95578-128">[![Optar por usar a classe CategoriesBLL](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="95578-128">[![Choose to Use the CategoriesBLL Class](master-detail-filtering-with-a-dropdownlist-cs/_static/image8.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image7.png)</span></span>

<span data-ttu-id="95578-129">**Figura 3**: Optar por usar o `CategoriesBLL` classe ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="95578-129">**Figure 3**: Choose to Use the `CategoriesBLL` Class ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image9.png))</span></span>


<span data-ttu-id="95578-130">[![Configurar o ObjectDataSource para usar o método GetCategories()](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="95578-130">[![Configure the ObjectDataSource to Use the GetCategories() Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image11.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image10.png)</span></span>

<span data-ttu-id="95578-131">**Figura 4**: Configurar o ObjectDataSource para usar o `GetCategories()` método ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="95578-131">**Figure 4**: Configure the ObjectDataSource to Use the `GetCategories()` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image12.png))</span></span>


<span data-ttu-id="95578-132">Depois de configurar o ObjectDataSource ainda precisamos especificar qual campo de fonte de dados deve ser exibido na DropDownList e o que um deve ser associado como o valor do item de lista.</span><span class="sxs-lookup"><span data-stu-id="95578-132">After configuring the ObjectDataSource we still need to specify what data source field should be displayed in DropDownList and which one should be associated as the value for the list item.</span></span> <span data-ttu-id="95578-133">Ter o `CategoryName` campo, como a exibição e `CategoryID` como o valor para cada item de lista.</span><span class="sxs-lookup"><span data-stu-id="95578-133">Have the `CategoryName` field as the display and `CategoryID` as the value for each list item.</span></span>


<span data-ttu-id="95578-134">[![Ter a exibição DropDownList CategoryName campo e Use CategoryID como o valor](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="95578-134">[![Have the DropDownList Display the CategoryName Field and Use CategoryID as the Value](master-detail-filtering-with-a-dropdownlist-cs/_static/image14.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image13.png)</span></span>

<span data-ttu-id="95578-135">**Figura 5**: Ter a exibição DropDownList a `CategoryName` campo e Use `CategoryID` como o valor ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="95578-135">**Figure 5**: Have the DropDownList Display the `CategoryName` Field and Use `CategoryID` as the Value ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image15.png))</span></span>


<span data-ttu-id="95578-136">Neste ponto, temos um controle DropDownList que é preenchido com os registros da `Categories` tabela (tudo feito em cerca de seis segundos).</span><span class="sxs-lookup"><span data-stu-id="95578-136">At this point we have a DropDownList control that's populated with the records from the `Categories` table (all accomplished in about six seconds).</span></span> <span data-ttu-id="95578-137">Figura 6 mostra nosso progresso até o momento quando visualizado por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="95578-137">Figure 6 shows our progress thus far when viewed through a browser.</span></span>


<span data-ttu-id="95578-138">[![Uma lista suspensa lista as categorias atuais](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="95578-138">[![A Drop-Down Lists the Current Categories](master-detail-filtering-with-a-dropdownlist-cs/_static/image17.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image16.png)</span></span>

<span data-ttu-id="95578-139">**Figura 6**: Menu suspenso que lista as categorias atual ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="95578-139">**Figure 6**: A Drop-Down Lists the Current Categories ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image18.png))</span></span>


## <a name="step-2-adding-the-products-gridview"></a><span data-ttu-id="95578-140">Etapa 2: Adicionando o GridView de produtos</span><span class="sxs-lookup"><span data-stu-id="95578-140">Step 2: Adding the Products GridView</span></span>

<span data-ttu-id="95578-141">A última etapa em nosso relatório mestre/detalhes é listar os produtos associados a categoria selecionada.</span><span class="sxs-lookup"><span data-stu-id="95578-141">That last step in our master/detail report is to list the products associated with the selected category.</span></span> <span data-ttu-id="95578-142">Para fazer isso, adicione um controle GridView à página e criar um novo ObjectDataSource chamado `productsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="95578-142">To accomplish this, add a GridView to the page and create a new ObjectDataSource named `productsDataSource`.</span></span> <span data-ttu-id="95578-143">Ter o `productsDataSource` controle selecionar seus dados do `ProductsBLL` da classe `GetProductsByCategoryID(categoryID)` método.</span><span class="sxs-lookup"><span data-stu-id="95578-143">Have the `productsDataSource` control cull its data from the `ProductsBLL` class's `GetProductsByCategoryID(categoryID)` method.</span></span>


<span data-ttu-id="95578-144">[![Selecione o método GetProductsByCategoryID(categoryID)](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="95578-144">[![Select the GetProductsByCategoryID(categoryID) Method](master-detail-filtering-with-a-dropdownlist-cs/_static/image20.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image19.png)</span></span>

<span data-ttu-id="95578-145">**Figura 7**: Selecione o `GetProductsByCategoryID(categoryID)` método ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span><span class="sxs-lookup"><span data-stu-id="95578-145">**Figure 7**: Select the `GetProductsByCategoryID(categoryID)` Method ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image21.png))</span></span>


<span data-ttu-id="95578-146">Depois de escolher esse método, o assistente ObjectDataSource nos solicita o valor para o método *`categoryID`* parâmetro.</span><span class="sxs-lookup"><span data-stu-id="95578-146">After choosing this method, the ObjectDataSource wizard prompts us for the value for the method's *`categoryID`* parameter.</span></span> <span data-ttu-id="95578-147">Para usar o valor de selecionado `categories` DropDownList item define a origem do parâmetro ControlID para e de controle `Categories`.</span><span class="sxs-lookup"><span data-stu-id="95578-147">To use the value of the selected `categories` DropDownList item set the Parameter source to Control and the ControlID to `Categories`.</span></span>


<span data-ttu-id="95578-148">[![Defina o parâmetro categoryID como o valor de Categories DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span><span class="sxs-lookup"><span data-stu-id="95578-148">[![Set the categoryID Parameter to the Value of the Categories DropDownList](master-detail-filtering-with-a-dropdownlist-cs/_static/image23.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image22.png)</span></span>

<span data-ttu-id="95578-149">**Figura 8**: Defina as *`categoryID`* parâmetro para o valor da `Categories` DropDownList ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span><span class="sxs-lookup"><span data-stu-id="95578-149">**Figure 8**: Set the *`categoryID`* Parameter to the Value of the `Categories` DropDownList ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image24.png))</span></span>


<span data-ttu-id="95578-150">Reserve um tempo para fazer check-out de nosso progresso em um navegador.</span><span class="sxs-lookup"><span data-stu-id="95578-150">Take a moment to check out our progress in a browser.</span></span> <span data-ttu-id="95578-151">Quando o primeiro visitando a página, esses produtos pertencem à categoria selecionada (Bebidas) são exibidas (conforme mostrado na Figura 9), mas alterar DropDownList não atualiza os dados.</span><span class="sxs-lookup"><span data-stu-id="95578-151">When first visiting the page, those products belong to the selected category (Beverages) are displayed (as shown in Figure 9), but changing the DropDownList doesn't update the data.</span></span> <span data-ttu-id="95578-152">Isso ocorre porque um postback deve ocorrer para que o GridView atualizar.</span><span class="sxs-lookup"><span data-stu-id="95578-152">This is because a postback must occur for the GridView to update.</span></span> <span data-ttu-id="95578-153">Para fazer isso, temos duas opções (nenhum deles exige gravar nenhum código):</span><span class="sxs-lookup"><span data-stu-id="95578-153">To accomplish this we have two options (neither of which requires writing any code):</span></span>

- <span data-ttu-id="95578-154">**Definir as categorias DropDownList**[propriedade AutoPostBack](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)**como True.**</span><span class="sxs-lookup"><span data-stu-id="95578-154">**Set the categories DropDownList's**[AutoPostBack property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.listcontrol.autopostback%28VS.80%29.aspx)**to True.**</span></span> <span data-ttu-id="95578-155">(Você pode fazer isso, marcando a opção Enable AutoPostBack na marca inteligente da DropDownList.) Isso vai disparar um postback sempre que a DropDownList selecionado item for alterado pelo usuário.</span><span class="sxs-lookup"><span data-stu-id="95578-155">(You can accomplish this by checking the Enable AutoPostBack option in the DropDownList's smart tag.) This will trigger a postback whenever the DropDownList's selected item is changed by the user.</span></span> <span data-ttu-id="95578-156">Portanto, quando o usuário seleciona uma nova categoria de erro do DropDownList ocorrerá um postback e GridView será atualizado com os produtos para a categoria selecionada recentemente.</span><span class="sxs-lookup"><span data-stu-id="95578-156">Therefore, when the user selects a new category from the DropDownList a postback will ensue and the GridView will be updated with the products for the newly selected category.</span></span> <span data-ttu-id="95578-157">(Essa é a abordagem usada neste tutorial.)</span><span class="sxs-lookup"><span data-stu-id="95578-157">(This is the approach I've used in this tutorial.)</span></span>
- <span data-ttu-id="95578-158">**Adicione um controle da Web de botão ao lado do DropDownList.**</span><span class="sxs-lookup"><span data-stu-id="95578-158">**Add a Button Web control next to the DropDownList.**</span></span> <span data-ttu-id="95578-159">Defina seu `Text` propriedade para a atualização ou algo semelhante.</span><span class="sxs-lookup"><span data-stu-id="95578-159">Set its `Text` property to Refresh or something similar.</span></span> <span data-ttu-id="95578-160">Com essa abordagem, o usuário precisará selecionar uma nova categoria e, em seguida, clique no botão.</span><span class="sxs-lookup"><span data-stu-id="95578-160">With this approach, the user will need to select a new category and then click the Button.</span></span> <span data-ttu-id="95578-161">Clicando no botão causam um postback e atualizar o GridView para listar os produtos da categoria selecionada.</span><span class="sxs-lookup"><span data-stu-id="95578-161">Clicking the Button will cause a postback and update the GridView to list those products of the selected category.</span></span>

<span data-ttu-id="95578-162">As figuras 9 e 10 ilustram o relatório mestre/detalhes em ação.</span><span class="sxs-lookup"><span data-stu-id="95578-162">Figures 9 and 10 illustrate the master/detail report in action.</span></span>


<span data-ttu-id="95578-163">[![Quando o primeiro visitando a página, os produtos de bebidas são exibidos](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span><span class="sxs-lookup"><span data-stu-id="95578-163">[![When First Visiting the Page, the Beverage Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image26.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image25.png)</span></span>

<span data-ttu-id="95578-164">**Figura 9**: Quando o primeiro visitando a página, os produtos de bebidas são exibidos ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span><span class="sxs-lookup"><span data-stu-id="95578-164">**Figure 9**: When First Visiting the Page, the Beverage Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image27.png))</span></span>


<span data-ttu-id="95578-165">[![Selecionar um novo produto (produzir) automaticamente faz com que um PostBack, atualizando o GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span><span class="sxs-lookup"><span data-stu-id="95578-165">[![Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView](master-detail-filtering-with-a-dropdownlist-cs/_static/image29.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image28.png)</span></span>

<span data-ttu-id="95578-166">**Figura 10**: Selecionar um novo produto (produzir) automaticamente faz com que um PostBack, atualizando o GridView ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span><span class="sxs-lookup"><span data-stu-id="95578-166">**Figure 10**: Selecting a New Product (Produce) Automatically Causes a PostBack, Updating the GridView ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image30.png))</span></span>


## <a name="adding-a----choose-a-category----list-item"></a><span data-ttu-id="95578-167">Adicionando um Item de lista "-- Escolha uma categoria –"</span><span class="sxs-lookup"><span data-stu-id="95578-167">Adding a "-- Choose a Category --" List Item</span></span>

<span data-ttu-id="95578-168">Ao visitar primeiro o `FilterByDropDownList.aspx` página categorias primeiro item da lista do DropDownList (Bebidas) é selecionado por padrão, mostrando os produtos de bebidas no GridView.</span><span class="sxs-lookup"><span data-stu-id="95578-168">When first visiting the `FilterByDropDownList.aspx` page the categories DropDownList's first list item (Beverages) is selected by default, showing the beverage products in the GridView.</span></span> <span data-ttu-id="95578-169">Em vez de Mostrar produtos da primeira categoria, que podemos querer ter em vez disso, um item de DropDownList selecionado que diz algo como "-- Escolha uma categoria –".</span><span class="sxs-lookup"><span data-stu-id="95578-169">Rather than showing the first category's products, we may want to instead have a DropDownList item selected that says something like, "-- Choose a Category --".</span></span>

<span data-ttu-id="95578-170">Para adicionar um novo item de lista a DropDownList, vá para a janela Propriedades e clique nas elipses no `Items` propriedade.</span><span class="sxs-lookup"><span data-stu-id="95578-170">To add a new list item to the DropDownList, go to the Properties window and click on the ellipses in the `Items` property.</span></span> <span data-ttu-id="95578-171">Adicionar um novo item de lista com o `Text` "-- Escolha uma categoria –" e o `Value` `-1`.</span><span class="sxs-lookup"><span data-stu-id="95578-171">Add a new list item with the `Text` "-- Choose a Category --" and the `Value` `-1`.</span></span>


<span data-ttu-id="95578-172">[![Adicionar um – escolha uma categoria – Item de lista](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span><span class="sxs-lookup"><span data-stu-id="95578-172">[![Add a -- Choose a Category -- List Item](master-detail-filtering-with-a-dropdownlist-cs/_static/image32.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image31.png)</span></span>

<span data-ttu-id="95578-173">**Figura 11**: Adicionar um – escolha uma categoria – Item de lista ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span><span class="sxs-lookup"><span data-stu-id="95578-173">**Figure 11**: Add a -- Choose a Category -- List Item ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image33.png))</span></span>


<span data-ttu-id="95578-174">Como alternativa, você pode adicionar o item de lista, adicionando a seguinte marcação ao DropDownList:</span><span class="sxs-lookup"><span data-stu-id="95578-174">Alternatively, you can add the list item by adding the following markup to the DropDownList:</span></span>

[!code-aspx[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample1.aspx)]

<span data-ttu-id="95578-175">Além disso, precisamos definir o controle de DropDownList `AppendDataBoundItems` como True porque quando as categorias são associadas ao DropDownList do ObjectDataSource elas vão substituir quaisquer itens da lista adicionados manualmente se `AppendDataBoundItems` não é True.</span><span class="sxs-lookup"><span data-stu-id="95578-175">Additionally, we need to set the DropDownList control's `AppendDataBoundItems` to True because when the categories are bound to the DropDownList from the ObjectDataSource they'll overwrite any manually-added list items if `AppendDataBoundItems` isn't True.</span></span>


![Defina a propriedade AppendDataBoundItems como True](master-detail-filtering-with-a-dropdownlist-cs/_static/image34.png)

<span data-ttu-id="95578-177">**Figura 12**: Defina o `AppendDataBoundItems` propriedade como True</span><span class="sxs-lookup"><span data-stu-id="95578-177">**Figure 12**: Set the `AppendDataBoundItems` Property to True</span></span>


<span data-ttu-id="95578-178">Após essas alterações, quando visitar a página é selecionada a opção "-- Escolha uma categoria –" pela primeira vez e nenhum produto é exibido.</span><span class="sxs-lookup"><span data-stu-id="95578-178">After these changes, when first visiting the page the "-- Choose a Category --" option is selected and no products are displayed.</span></span>


<span data-ttu-id="95578-179">[![O carregamento de página inicial sem produtos são exibidos.](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span><span class="sxs-lookup"><span data-stu-id="95578-179">[![On the Initial Page Load No Products are Displayed](master-detail-filtering-with-a-dropdownlist-cs/_static/image36.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image35.png)</span></span>

<span data-ttu-id="95578-180">**Figura 13**: São exibidos nos produtos de não de carregamento de página inicial ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span><span class="sxs-lookup"><span data-stu-id="95578-180">**Figure 13**: On the Initial Page Load No Products are Displayed ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image37.png))</span></span>


<span data-ttu-id="95578-181">O motivo pelo qual não há produtos são exibidos quando porque o item de lista "-- Escolha uma categoria –" está selecionado é porque seu valor é `-1` e não há nenhum produto no banco de dados com um `CategoryID` de `-1`.</span><span class="sxs-lookup"><span data-stu-id="95578-181">The reason no products are displayed when because the "-- Choose a Category --" list item is selected is because its value is `-1` and there are no products in the database with a `CategoryID` of `-1`.</span></span> <span data-ttu-id="95578-182">Se esse for o comportamento desejado, você terminou no momento!</span><span class="sxs-lookup"><span data-stu-id="95578-182">If this is the behavior you want then you're done at this point!</span></span> <span data-ttu-id="95578-183">Se, no entanto, você deseja exibir *todos os* das categorias de quando o item de lista "-- Escolha uma categoria –" está selecionado, volte para o `ProductsBLL` classe e personalizar o `GetProductsByCategoryID(categoryID)` , de modo que ele invoca o `GetProducts()` método se o que for passado em *`categoryID`* parâmetro é menor que zero:</span><span class="sxs-lookup"><span data-stu-id="95578-183">If, however, you want to display *all* of the categories when the "-- Choose a Category --" list item is selected, return to the `ProductsBLL` class and customize the `GetProductsByCategoryID(categoryID)` method so that it invokes the `GetProducts()` method if the passed in *`categoryID`* parameter is less than zero:</span></span>

[!code-csharp[Main](master-detail-filtering-with-a-dropdownlist-cs/samples/sample2.cs)]

<span data-ttu-id="95578-184">A técnica usada aqui é semelhante à abordagem que usamos para exibir todos os fornecedores de volta a [parâmetros declarativos](../basic-reporting/declarative-parameters-cs.md) tutorial, embora para este exemplo, estamos usando um valor de `-1` para indicar que todos os registros devem ser recuperado em oposição a `null`.</span><span class="sxs-lookup"><span data-stu-id="95578-184">The technique used here is similar to the approach we used to display all suppliers back in the [Declarative Parameters](../basic-reporting/declarative-parameters-cs.md) tutorial, although for this example we're using a value of `-1` to indicate that all records should be retrieved as opposed to `null`.</span></span> <span data-ttu-id="95578-185">Isso ocorre porque o *`categoryID`* parâmetro do `GetProductsByCategoryID(categoryID)` método espera como o valor do inteiro passado, enquanto que no tutorial parâmetros declarativos que estavam passando um parâmetro de entrada de cadeia de caracteres.</span><span class="sxs-lookup"><span data-stu-id="95578-185">This is because the *`categoryID`* parameter of the `GetProductsByCategoryID(categoryID)` method expects as integer value passed in, whereas in the Declarative Parameters tutorial we were passing in a string input parameter.</span></span>

<span data-ttu-id="95578-186">A Figura 14 mostra uma captura de tela de `FilterByDropDownList.aspx` quando a opção "-- Escolha uma categoria –" estiver selecionada.</span><span class="sxs-lookup"><span data-stu-id="95578-186">Figure 14 shows a screen shot of `FilterByDropDownList.aspx` when the "-- Choose a Category --" option is selected.</span></span> <span data-ttu-id="95578-187">Aqui, todos os produtos são exibidos por padrão, e o usuário pode restringir a exibição ao escolher uma categoria específica.</span><span class="sxs-lookup"><span data-stu-id="95578-187">Here, all of the products are displayed by default, and the user can narrow the display by choosing a specific category.</span></span>


<span data-ttu-id="95578-188">[![Todos os produtos estão agora listados por padrão](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span><span class="sxs-lookup"><span data-stu-id="95578-188">[![All of the Products are Now Listed By Default](master-detail-filtering-with-a-dropdownlist-cs/_static/image39.png)](master-detail-filtering-with-a-dropdownlist-cs/_static/image38.png)</span></span>

<span data-ttu-id="95578-189">**Figura 14**: Todos os produtos estão agora listados por padrão ([clique para exibir a imagem em tamanho normal](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span><span class="sxs-lookup"><span data-stu-id="95578-189">**Figure 14**: All of the Products are Now Listed By Default ([Click to view full-size image](master-detail-filtering-with-a-dropdownlist-cs/_static/image40.png))</span></span>


## <a name="summary"></a><span data-ttu-id="95578-190">Resumo</span><span class="sxs-lookup"><span data-stu-id="95578-190">Summary</span></span>

<span data-ttu-id="95578-191">Ao exibir dados relacionados hierarquicamente, isso geralmente ajuda a apresentar os dados usando os relatórios mestre/detalhes, do qual o usuário pode começar a ler os dados da parte superior da hierarquia e fazer drill down nos detalhes.</span><span class="sxs-lookup"><span data-stu-id="95578-191">When displaying hierarchically-related data, it often helps to present the data using master/detail reports, from which the user can start perusing the data from the top of the hierarchy and drill down into details.</span></span> <span data-ttu-id="95578-192">Neste tutorial, examinamos a criação de um relatório simples mestre/detalhes mostrando produtos de uma determinada categoria.</span><span class="sxs-lookup"><span data-stu-id="95578-192">In this tutorial we examined building a simple master/detail report showing a selected category's products.</span></span> <span data-ttu-id="95578-193">Isso foi realizado usando DropDownList para a lista de categorias e GridView para os produtos que pertencem à categoria selecionada.</span><span class="sxs-lookup"><span data-stu-id="95578-193">This was accomplished by using a DropDownList for the list of categories and a GridView for the products belonging to the selected category.</span></span>

<span data-ttu-id="95578-194">No [próximo tutorial](master-detail-filtering-with-two-dropdownlists-cs.md) , faremos o DropDownList interface, uma etapa adicional, usando duas DropDownLists.</span><span class="sxs-lookup"><span data-stu-id="95578-194">In the [next tutorial](master-detail-filtering-with-two-dropdownlists-cs.md) we'll take the DropDownList interface one step further, using two DropDownLists.</span></span>

<span data-ttu-id="95578-195">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="95578-195">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="95578-196">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="95578-196">About the Author</span></span>

<span data-ttu-id="95578-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de sete livros sobre ASP/ASP.NET e fundador da [4GuysFromRolla.com](http://www.4guysfromrolla.com), tem trabalhado com tecnologias Microsoft Web desde 1998.</span><span class="sxs-lookup"><span data-stu-id="95578-197">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="95578-198">Scott funciona como um consultor independente, instrutor e escritor.</span><span class="sxs-lookup"><span data-stu-id="95578-198">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="95578-199">Seu livro mais recente é [ *Sams Teach por conta própria ASP.NET 2.0 em 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="95578-199">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="95578-200">Ele pode ser contatado pelo [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="95578-200">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="95578-201">ou por meio de seu blog, que pode ser encontrado em [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="95578-201">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

> [!div class="step-by-step"]
> [<span data-ttu-id="95578-202">Avançar</span><span class="sxs-lookup"><span data-stu-id="95578-202">Next</span></span>](master-detail-filtering-with-two-dropdownlists-cs.md)
