---
uid: web-forms/overview/data-access/enhancing-the-gridview/inserting-a-new-record-from-the-gridview-s-footer-cs
title: Inserindo um novo registro do rodapé do GridView (c#) | Microsoft Docs
author: rick-anderson
description: Enquanto o controle GridView não fornece suporte interno para inserir um novo registro de dados, este tutorial mostra como incrementar o GridView para incluir um...
ms.author: riande
ms.date: 03/06/2007
ms.assetid: 49545652-98af-46ba-9dbc-9ab529805d9b
msc.legacyurl: /web-forms/overview/data-access/enhancing-the-gridview/inserting-a-new-record-from-the-gridview-s-footer-cs
msc.type: authoredcontent
ms.openlocfilehash: ae27b25a0a7f37cc273d88d7165c8be33ce2f6cc
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57052523"
---
<a name="inserting-a-new-record-from-the-gridviews-footer-c"></a><span data-ttu-id="8f5f0-103">Inserir um novo registro do rodapé do GridView (C#)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-103">Inserting a New Record from the GridView's Footer (C#)</span></span>
====================
<span data-ttu-id="8f5f0-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="8f5f0-105">[Baixe o aplicativo de exemplo](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_53_CS.exe) ou [baixar PDF](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/datatutorial53cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-105">[Download Sample App](http://download.microsoft.com/download/4/a/7/4a7a3b18-d80e-4014-8e53-a6a2427f0d93/ASPNET_Data_Tutorial_53_CS.exe) or [Download PDF](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/datatutorial53cs1.pdf)</span></span>

> <span data-ttu-id="8f5f0-106">Enquanto o controle GridView não fornece suporte interno para inserir um novo registro de dados, este tutorial mostra como incrementar o GridView para incluir uma interface de inserção.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-106">While the GridView control does not provide built-in support for inserting a new record of data, this tutorial shows how to augment the GridView to include an inserting interface.</span></span>


## <a name="introduction"></a><span data-ttu-id="8f5f0-107">Introdução</span><span class="sxs-lookup"><span data-stu-id="8f5f0-107">Introduction</span></span>

<span data-ttu-id="8f5f0-108">Conforme discutido na [uma visão geral de inserção de, atualizando e excluindo dados](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, os controles GridView, DetailsView e FormView Web cada incluem recursos de modificação de dados internos.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-108">As discussed in the [An Overview of Inserting, Updating, and Deleting Data](../editing-inserting-and-deleting-data/an-overview-of-inserting-updating-and-deleting-data-cs.md) tutorial, the GridView, DetailsView, and FormView Web controls each include built-in data modification capabilities.</span></span> <span data-ttu-id="8f5f0-109">Quando usado com controles de fonte de dados declarativa, esses três controles da Web podem ser rápida e facilmente configurados para modificar dados – e em cenários sem a necessidade de escrever uma única linha de código.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-109">When used with declarative data source controls, these three Web controls can be quickly and easily configured to modify data - and in scenarios without needing to write a single line of code.</span></span> <span data-ttu-id="8f5f0-110">Infelizmente, somente os controles DetailsView e FormView fornecem interna inserir, editar e excluir recursos.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-110">Unfortunately, only the DetailsView and FormView controls provide built-in inserting, editing, and deleting capabilities.</span></span> <span data-ttu-id="8f5f0-111">O GridView oferece apenas a edição e exclusão de suporte.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-111">The GridView only offers editing and deleting support.</span></span> <span data-ttu-id="8f5f0-112">No entanto, com um pouco graxa de canto, podemos pode aumentar o GridView para incluir uma interface de inserção.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-112">However, with a little elbow grease, we can augment the GridView to include an inserting interface.</span></span>

<span data-ttu-id="8f5f0-113">Para adicionar recursos inserindo a GridView, somos responsáveis por decidir como os novos registros serão adicionados, criando a interface de inserção e escrever o código para inserir o novo registro.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-113">In adding inserting capabilities to the GridView, we are responsible for deciding on how new records will be added, creating the inserting interface, and writing the code to insert the new record.</span></span> <span data-ttu-id="8f5f0-114">Neste tutorial, veremos adicionando a interface de inserção para o rodapé do GridView s de linhas (veja a Figura 1).</span><span class="sxs-lookup"><span data-stu-id="8f5f0-114">In this tutorial we will look at adding the inserting interface to the GridView s footer row (see Figure 1).</span></span> <span data-ttu-id="8f5f0-115">A célula do rodapé para cada coluna inclui o elemento de dados apropriado coleção usuário interface (uma caixa de texto para o nome do produto s, DropDownList para o fornecedor e assim por diante).</span><span class="sxs-lookup"><span data-stu-id="8f5f0-115">The footer cell for each column includes the appropriate data collection user interface element (a TextBox for the product s name, a DropDownList for the supplier, and so on).</span></span> <span data-ttu-id="8f5f0-116">Também precisamos de uma coluna para uma adição botão que, quando clicado, causará um postback e inserir um novo registro para o `Products` usando os valores fornecidos na linha de rodapé da tabela.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-116">We also need a column for an Add button that, when clicked, will cause a postback and insert a new record into the `Products` table using the values supplied in the footer row.</span></span>


<span data-ttu-id="8f5f0-117">[![A linha de rodapé fornece uma Interface para adicionar novos produtos](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image1.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-117">[![The Footer Row Provides an Interface for Adding New Products](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image1.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image1.png)</span></span>

<span data-ttu-id="8f5f0-118">**Figura 1**: A linha de rodapé fornece uma Interface para adição de novos produtos ([clique para exibir a imagem em tamanho normal](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="8f5f0-118">**Figure 1**: The Footer Row Provides an Interface for Adding New Products ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image2.png))</span></span>


## <a name="step-1-displaying-product-information-in-a-gridview"></a><span data-ttu-id="8f5f0-119">Etapa 1: Exibindo informações de produto em um GridView</span><span class="sxs-lookup"><span data-stu-id="8f5f0-119">Step 1: Displaying Product Information in a GridView</span></span>

<span data-ttu-id="8f5f0-120">Antes de nós mesmos estamos envolvem com a criação da interface de inserção no rodapé do GridView de s, deixe o primeiro foco sobre como adicionar um controle GridView à página que lista os produtos no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-120">Before we concern ourselves with creating the inserting interface in the GridView s footer, let s first focus on adding a GridView to the page that lists the products in the database.</span></span> <span data-ttu-id="8f5f0-121">Comece abrindo o `InsertThroughFooter.aspx` página o `EnhancedGridView` pasta e arraste um controle GridView da caixa de ferramentas para o Designer, definindo o s GridView `ID` propriedade para `Products`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-121">Start by opening the `InsertThroughFooter.aspx` page in the `EnhancedGridView` folder and drag a GridView from the Toolbox onto the Designer, setting the GridView s `ID` property to `Products`.</span></span> <span data-ttu-id="8f5f0-122">Em seguida, use a marca inteligente do GridView s vinculá-la a um novo ObjectDataSource chamado `ProductsDataSource`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-122">Next, use the GridView s smart tag to bind it to a new ObjectDataSource named `ProductsDataSource`.</span></span>


<span data-ttu-id="8f5f0-123">[![Criar um novo ObjectDataSource chamado ProductsDataSource](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image2.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-123">[![Create a New ObjectDataSource Named ProductsDataSource](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image2.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image3.png)</span></span>

<span data-ttu-id="8f5f0-124">**Figura 2**: Criar um novo ObjectDataSource nomeado `ProductsDataSource` ([clique para exibir a imagem em tamanho normal](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="8f5f0-124">**Figure 2**: Create a New ObjectDataSource Named `ProductsDataSource` ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image4.png))</span></span>


<span data-ttu-id="8f5f0-125">Configurar o ObjectDataSource para usar o `ProductsBLL` classe s `GetProducts()` método para recuperar informações sobre o produto.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-125">Configure the ObjectDataSource to use the `ProductsBLL` class s `GetProducts()` method to retrieve product information.</span></span> <span data-ttu-id="8f5f0-126">Para este tutorial, deixe s focalizar estritamente adicionando recursos de inserção e não se preocupar sobre edição e exclusão.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-126">For this tutorial, let s focus strictly on adding inserting capabilities and not worry about editing and deleting.</span></span> <span data-ttu-id="8f5f0-127">Portanto, certifique-se de que a lista suspensa na guia Inserir é definida como `AddProduct()` e que as listas suspensas nas guias de UPDATE e DELETE são definidas como (nenhum).</span><span class="sxs-lookup"><span data-stu-id="8f5f0-127">Therefore, make sure that the drop-down list in the INSERT tab is set to `AddProduct()` and that the drop-down lists in the UPDATE and DELETE tabs are set to (None) .</span></span>


<span data-ttu-id="8f5f0-128">[![Mapear o método AddProduct para o método de Insert () do ObjectDataSource s](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image3.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-128">[![Map the AddProduct Method to the ObjectDataSource s Insert() Method](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image3.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image5.png)</span></span>

<span data-ttu-id="8f5f0-129">**Figura 3**: Mapa de `AddProduct` método no s ObjectDataSource `Insert()` método ([clique para exibir a imagem em tamanho normal](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="8f5f0-129">**Figure 3**: Map the `AddProduct` Method to the ObjectDataSource s `Insert()` Method ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image6.png))</span></span>


<span data-ttu-id="8f5f0-130">[![Define a atualização e exclusão guias listas suspensas para (nenhum)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image4.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-130">[![Set the UPDATE and DELETE Tabs Drop-Down Lists to (None)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image4.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image7.png)</span></span>

<span data-ttu-id="8f5f0-131">**Figura 4**: Defina a atualização e excluir guias menu suspenso lista como (nenhum) ([clique para exibir a imagem em tamanho normal](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="8f5f0-131">**Figure 4**: Set the UPDATE and DELETE Tabs Drop-Down Lists to (None) ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image8.png))</span></span>


<span data-ttu-id="8f5f0-132">Depois de concluir o Assistente de configurar fonte de dados s ObjectDataSource, Visual Studio adicionará automaticamente campos para o GridView para cada um dos campos de dados correspondentes.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-132">After completing the ObjectDataSource s Configure Data Source wizard, Visual Studio will automatically add fields to the GridView for each of the corresponding data fields.</span></span> <span data-ttu-id="8f5f0-133">Por enquanto, deixe todos os campos adicionados pelo Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-133">For now, leave all of the fields added by Visual Studio.</span></span> <span data-ttu-id="8f5f0-134">Mais tarde neste tutorial vamos voltar e remover alguns dos campos cujos valores don t precisam ser especificado ao adicionar um novo registro.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-134">Later in this tutorial we'll come back and remove some of the fields whose values don t need to be specified when adding a new record.</span></span>

<span data-ttu-id="8f5f0-135">Como há perto de 80 produtos no banco de dados, um usuário terá que rolar até a parte inferior da página da web para adicionar um novo registro.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-135">Since there are close to 80 products in the database, a user will have to scroll all the way down to the bottom of the web page in order to add a new record.</span></span> <span data-ttu-id="8f5f0-136">Portanto, deixe s habilitar paginação tornar a interface de inserção mais visível e acessível.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-136">Therefore, let s enable paging to make the inserting interface more visible and accessible.</span></span> <span data-ttu-id="8f5f0-137">Para ativar a paginação, basta marcar a caixa de seleção Habilitar paginação a marca inteligente do GridView s.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-137">To turn on paging, simply check the Enable Paging checkbox from the GridView s smart tag.</span></span>

<span data-ttu-id="8f5f0-138">Neste ponto, GridView e ObjectDataSource s marcação declarativa deve ser semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="8f5f0-138">At this point, the GridView and ObjectDataSource s declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample1.aspx)]


<span data-ttu-id="8f5f0-139">[![Todos os campos de dados de produto são exibidos em um GridView paginável](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image5.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-139">[![All Product Data Fields are Displayed in a Paged GridView](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image5.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image9.png)</span></span>

<span data-ttu-id="8f5f0-140">**Figura 5**: Todos os campos de dados de produto são exibidos em um GridView paginável ([clique para exibir a imagem em tamanho normal](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="8f5f0-140">**Figure 5**: All Product Data Fields are Displayed in a Paged GridView ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image10.png))</span></span>


## <a name="step-2-adding-a-footer-row"></a><span data-ttu-id="8f5f0-141">Etapa 2: Adicionando uma linha de rodapé</span><span class="sxs-lookup"><span data-stu-id="8f5f0-141">Step 2: Adding a Footer Row</span></span>

<span data-ttu-id="8f5f0-142">Juntamente com seu cabeçalho e linhas de dados, o GridView inclui uma linha de rodapé.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-142">Along with its header and data rows, the GridView includes a footer row.</span></span> <span data-ttu-id="8f5f0-143">As linhas de cabeçalho e rodapé são exibidas dependendo dos valores de s o GridView [ `ShowHeader` ](https://msdn.microsoft.com/en-gb/library/system.web.ui.webcontrols.gridview.showheader.aspx) e [ `ShowFooter` ](https://msdn.microsoft.com/en-gb/library/system.web.ui.webcontrols.gridview.showfooter.aspx) propriedades.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-143">The header and footer rows are displayed depending on the values of the GridView s [`ShowHeader`](https://msdn.microsoft.com/en-gb/library/system.web.ui.webcontrols.gridview.showheader.aspx) and [`ShowFooter`](https://msdn.microsoft.com/en-gb/library/system.web.ui.webcontrols.gridview.showfooter.aspx) properties.</span></span> <span data-ttu-id="8f5f0-144">Para mostrar a linha de rodapé, basta definir a `ShowFooter` propriedade para `true`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-144">To show the footer row, simply set the `ShowFooter` property to `true`.</span></span> <span data-ttu-id="8f5f0-145">Como ilustra a Figura 6, definindo o `ShowFooter` propriedade para `true` adiciona uma linha de rodapé à grade.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-145">As Figure 6 illustrates, setting the `ShowFooter` property to `true` adds a footer row to the grid.</span></span>


<span data-ttu-id="8f5f0-146">[![Para exibir a linha de rodapé, defina ShowFooter como True](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image6.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image11.png)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-146">[![To Display the Footer Row, Set ShowFooter to True](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image6.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image11.png)</span></span>

<span data-ttu-id="8f5f0-147">**Figura 6**: Para exibir a linha de rodapé, defina `ShowFooter` à `True` ([clique para exibir a imagem em tamanho normal](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="8f5f0-147">**Figure 6**: To Display the Footer Row, Set `ShowFooter` to `True` ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image12.png))</span></span>


<span data-ttu-id="8f5f0-148">Observe que a linha de rodapé tem uma cor de plano de fundo vermelho escuro.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-148">Note that the footer row has a dark red background color.</span></span> <span data-ttu-id="8f5f0-149">Isso ocorre devido ao tema DataWebControls é criada e aplicada a todas as páginas de volta a [exibindo dados com o ObjectDataSource](../basic-reporting/displaying-data-with-the-objectdatasource-cs.md) tutorial.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-149">This is due to the DataWebControls Theme we created and applied to all pages back in the [Displaying Data With the ObjectDataSource](../basic-reporting/displaying-data-with-the-objectdatasource-cs.md) tutorial.</span></span> <span data-ttu-id="8f5f0-150">Especificamente, o `GridView.skin` arquivo configura o `FooterStyle` propriedade tal que usa o `FooterStyle` classe CSS.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-150">Specifically, the `GridView.skin` file configures the `FooterStyle` property such that is uses the `FooterStyle` CSS class.</span></span> <span data-ttu-id="8f5f0-151">O `FooterStyle` classe é definida em `Styles.css` da seguinte maneira:</span><span class="sxs-lookup"><span data-stu-id="8f5f0-151">The `FooterStyle` class is defined in `Styles.css` as follows:</span></span>


[!code-css[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample2.css)]

> [!NOTE]
> <span data-ttu-id="8f5f0-152">Podemos var explorado usando a linha de rodapé do GridView s nos tutoriais anteriores.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-152">We ve explored using the GridView s footer row in previous tutorials.</span></span> <span data-ttu-id="8f5f0-153">Se necessário, consulte a [exibindo informações de resumo no rodapé do GridView](../custom-formatting/displaying-summary-information-in-the-gridview-s-footer-cs.md) tutorial para uma atualização.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-153">If needed, refer back to the [Displaying Summary Information in the GridView's Footer](../custom-formatting/displaying-summary-information-in-the-gridview-s-footer-cs.md) tutorial for a refresher.</span></span>


<span data-ttu-id="8f5f0-154">Depois de definir a `ShowFooter` propriedade para `true`, reserve um tempo para exibir a saída em um navegador.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-154">After setting the `ShowFooter` property to `true`, take a moment to view the output in a browser.</span></span> <span data-ttu-id="8f5f0-155">Atualmente, o rodapé linha contém qualquer texto ou controles da Web.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-155">Currently the footer row doesn t contain any text or Web controls.</span></span> <span data-ttu-id="8f5f0-156">Na etapa 3, modificaremos o rodapé para cada campo de GridView para que ele inclui a interface apropriada de inserção.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-156">In Step 3 we'll modify the footer for each GridView field so that it includes the appropriate inserting interface.</span></span>


<span data-ttu-id="8f5f0-157">[![A linha de rodapé vazio é exibido acima a paginação de controles de Interface](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image7.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-157">[![The Empty Footer Row is Displayed Above the Paging Interface Controls](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image7.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image13.png)</span></span>

<span data-ttu-id="8f5f0-158">**Figura 7**: A linha de rodapé vazio é exibido acima a paginação de controles de Interface ([clique para exibir a imagem em tamanho normal](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="8f5f0-158">**Figure 7**: The Empty Footer Row is Displayed Above the Paging Interface Controls ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image14.png))</span></span>


## <a name="step-3-customizing-the-footer-row"></a><span data-ttu-id="8f5f0-159">Etapa 3: Personalizando a linha de rodapé</span><span class="sxs-lookup"><span data-stu-id="8f5f0-159">Step 3: Customizing the Footer Row</span></span>

<span data-ttu-id="8f5f0-160">Volta a [Usando TemplateFields no controle GridView](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) tutorial vimos como bastante personalizar a exibição de uma determinada coluna de GridView usando TemplateFields (em vez de BoundFields ou CheckBoxFields); em [ Personalizando a Interface de modificação de dados](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) analisamos Usando TemplateFields para personalizar a interface de edição em um GridView.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-160">Back in the [Using TemplateFields in the GridView Control](../custom-formatting/using-templatefields-in-the-gridview-control-cs.md) tutorial we saw how to greatly customize the display of a particular GridView column using TemplateFields (as opposed to BoundFields or CheckBoxFields); in [Customizing the Data Modification Interface](../editing-inserting-and-deleting-data/customizing-the-data-modification-interface-cs.md) we looked at using TemplateFields to customize the editing interface in a GridView.</span></span> <span data-ttu-id="8f5f0-161">Lembre-se de que um TemplateField é composto de vários modelos que define a combinação de marcação, controles da Web e sintaxe de associação de dados usado para determinados tipos de linhas.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-161">Recall that a TemplateField is composed of a number of templates that defines the mix of markup, Web controls, and databinding syntax used for certain types of rows.</span></span> <span data-ttu-id="8f5f0-162">O `ItemTemplate`, por exemplo, especifica o modelo usado para linhas de somente leitura, enquanto o `EditItemTemplate` define o modelo para a linha editável.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-162">The `ItemTemplate`, for example, specifies the template used for read-only rows, while the `EditItemTemplate` defines the template for the editable row.</span></span>

<span data-ttu-id="8f5f0-163">Juntamente com o `ItemTemplate` e `EditItemTemplate`, o TemplateField também inclui um `FooterTemplate` que especifica o conteúdo para a linha de rodapé.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-163">Along with the `ItemTemplate` and `EditItemTemplate`, the TemplateField also includes a `FooterTemplate` that specifies the content for the footer row.</span></span> <span data-ttu-id="8f5f0-164">Portanto, podemos adicionar os controles da Web necessários para cada s de campo inserindo a interface para o `FooterTemplate`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-164">Therefore, we can add the Web controls needed for each field s inserting interface into the `FooterTemplate`.</span></span> <span data-ttu-id="8f5f0-165">Para iniciar, converta todos os campos no GridView TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-165">To start, convert all of the fields in the GridView to TemplateFields.</span></span> <span data-ttu-id="8f5f0-166">Isso pode ser feito clicando no link Edit Columns na GridView s marca inteligente, selecionando cada campo no canto inferior esquerdo e, em seguida, clicando em converter este campo em um TemplateField link.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-166">This can be done by clicking the Edit Columns link in the GridView s smart tag, selecting each field in the lower left corner, and clicking the Convert this field into a TemplateField link.</span></span>


![Converter cada campo em um TemplateField](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image8.gif)

<span data-ttu-id="8f5f0-168">**Figura 8**: Converter cada campo em um TemplateField</span><span class="sxs-lookup"><span data-stu-id="8f5f0-168">**Figure 8**: Convert Each Field Into a TemplateField</span></span>


<span data-ttu-id="8f5f0-169">Na converter este campo em um TemplateField transforma o tipo do campo atual em um TemplateField equivalente.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-169">Clicking the Convert this field into a TemplateField turns the current field type into an equivalent TemplateField.</span></span> <span data-ttu-id="8f5f0-170">Por exemplo, cada BoundField é substituído por um TemplateField com um `ItemTemplate` que contém um rótulo que exibe o campo de dados correspondente e um `EditItemTemplate` que exibe o campo de dados em uma caixa de texto.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-170">For example, each BoundField is replaced by a TemplateField with an `ItemTemplate` that contains a Label that displays the corresponding data field and an `EditItemTemplate` that displays the data field in a TextBox.</span></span> <span data-ttu-id="8f5f0-171">O `ProductName` BoundField foi convertido na TemplateField a seguinte marcação:</span><span class="sxs-lookup"><span data-stu-id="8f5f0-171">The `ProductName` BoundField has been converted into the following TemplateField markup:</span></span>


[!code-aspx[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample3.aspx)]

<span data-ttu-id="8f5f0-172">Da mesma forma, o `Discontinued` CheckBoxField foi convertido em um TemplateField cuja `ItemTemplate` e `EditItemTemplate` contém um controle de caixa de seleção Web (com o `ItemTemplate` s caixa de seleção desabilitada).</span><span class="sxs-lookup"><span data-stu-id="8f5f0-172">Likewise, the `Discontinued` CheckBoxField has been converted into a TemplateField whose `ItemTemplate` and `EditItemTemplate` contain a CheckBox Web control (with the `ItemTemplate` s CheckBox disabled).</span></span> <span data-ttu-id="8f5f0-173">Somente leitura `ProductID` BoundField foi convertido em um TemplateField com um controle Label em ambos os `ItemTemplate` e `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-173">The read-only `ProductID` BoundField has been converted into a TemplateField with a Label control in both the `ItemTemplate` and `EditItemTemplate`.</span></span> <span data-ttu-id="8f5f0-174">Em resumo, o campo em um TemplateField convertendo um GridView existente é uma maneira rápida e fácil para alternar para o TemplateField mais personalizável sem perder qualquer campo s funcionalidade existente.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-174">In short, converting an existing GridView field into a TemplateField is a quick and easy way to switch to the more customizable TemplateField without losing any of the existing field s functionality.</span></span>

<span data-ttu-id="8f5f0-175">Desde o GridView, está trabalhando t suporte de edição, fique à vontade remover o `EditItemTemplate` de cada TemplateField, deixando apenas o `ItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-175">Since the GridView we re working with doesn t support editing, feel free to remove the `EditItemTemplate` from each TemplateField, leaving just the `ItemTemplate`.</span></span> <span data-ttu-id="8f5f0-176">Depois de fazer isso, sua marcação declarativa do GridView s deve ser semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="8f5f0-176">After doing this, your GridView s declarative markup should look like the following:</span></span>


[!code-aspx[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample4.aspx)]

<span data-ttu-id="8f5f0-177">Agora que cada campo de GridView foi convertido em um TemplateField, podemos inserir a interface de inserção apropriada em cada campo s `FooterTemplate`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-177">Now that each GridView field has been converted into a TemplateField, we can enter the appropriate inserting interface into each field s `FooterTemplate`.</span></span> <span data-ttu-id="8f5f0-178">Alguns dos campos não terá uma interface de inserção (`ProductID`, por exemplo); outros irão variar nos controles da Web usados para coletar as novas informações de produto s.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-178">Some of the fields will not have an inserting interface (`ProductID`, for instance); others will vary in the Web controls used to collect the new product s information.</span></span>

<span data-ttu-id="8f5f0-179">Para criar a interface de edição, escolha o link Editar modelos da marca inteligente s GridView.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-179">To create the editing interface, choose the Edit Templates link from the GridView s smart tag.</span></span> <span data-ttu-id="8f5f0-180">Em seguida, na lista suspensa, selecione o campo apropriado s `FooterTemplate` e arraste o controle apropriado na caixa de ferramentas para o Designer.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-180">Then, from the drop-down list, select the appropriate field s `FooterTemplate` and drag the appropriate control from the Toolbox onto the Designer.</span></span>


<span data-ttu-id="8f5f0-181">[![Adicionar a Interface apropriada de inserção para cada FooterTemplate s de campo](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image9.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image15.png)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-181">[![Add the Appropriate Inserting Interface to Each Field s FooterTemplate](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image9.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image15.png)</span></span>

<span data-ttu-id="8f5f0-182">**Figura 9**: Adicionar a Interface apropriada de inserção para cada campo s `FooterTemplate` ([clique para exibir a imagem em tamanho normal](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image16.png))</span><span class="sxs-lookup"><span data-stu-id="8f5f0-182">**Figure 9**: Add the Appropriate Inserting Interface to Each Field s `FooterTemplate` ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image16.png))</span></span>


<span data-ttu-id="8f5f0-183">A lista com marcadores a seguir enumera os campos de GridView, especificando a interface de inserção para adicionar:</span><span class="sxs-lookup"><span data-stu-id="8f5f0-183">The following bulleted list enumerates the GridView fields, specifying the inserting interface to add:</span></span>

- <span data-ttu-id="8f5f0-184">`ProductID` Nenhum.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-184">`ProductID` none.</span></span>
- <span data-ttu-id="8f5f0-185">`ProductName` Adicione uma caixa de texto e defina suas `ID` para `NewProductName`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-185">`ProductName` add a TextBox and set its `ID` to `NewProductName`.</span></span> <span data-ttu-id="8f5f0-186">Adicione um controle RequiredFieldValidator também para garantir que o usuário insere um valor para o novo nome de produto s.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-186">Add a RequiredFieldValidator control as well to ensure that the user enters a value for the new product s name.</span></span>
- <span data-ttu-id="8f5f0-187">`SupplierID` Nenhum.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-187">`SupplierID` none.</span></span>
- <span data-ttu-id="8f5f0-188">`CategoryID` Nenhum.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-188">`CategoryID` none.</span></span>
- <span data-ttu-id="8f5f0-189">`QuantityPerUnit` Adicione uma caixa de texto, definindo sua `ID` para `NewQuantityPerUnit`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-189">`QuantityPerUnit` add a TextBox, setting its `ID` to `NewQuantityPerUnit`.</span></span>
- <span data-ttu-id="8f5f0-190">`UnitPrice` Adicione uma caixa de texto chamada `NewUnitPrice` e um CompareValidator que garante que o valor inserido é um valor de moeda, maior que ou igual a zero.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-190">`UnitPrice` add a TextBox named `NewUnitPrice` and a CompareValidator that ensures the value entered is a currency value greater than or equal to zero.</span></span>
- <span data-ttu-id="8f5f0-191">`UnitsInStock` usar uma caixa de texto cuja `ID` é definido como `NewUnitsInStock`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-191">`UnitsInStock` use a TextBox whose `ID` is set to `NewUnitsInStock`.</span></span> <span data-ttu-id="8f5f0-192">Inclua um CompareValidator que garante que o valor inserido é um valor inteiro maior ou igual a zero.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-192">Include a CompareValidator that ensures that the value entered is an integer value greater than or equal to zero.</span></span>
- <span data-ttu-id="8f5f0-193">`UnitsOnOrder` usar uma caixa de texto cuja `ID` é definido como `NewUnitsOnOrder`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-193">`UnitsOnOrder` use a TextBox whose `ID` is set to `NewUnitsOnOrder`.</span></span> <span data-ttu-id="8f5f0-194">Inclua um CompareValidator que garante que o valor inserido é um valor inteiro maior ou igual a zero.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-194">Include a CompareValidator that ensures that the value entered is an integer value greater than or equal to zero.</span></span>
- <span data-ttu-id="8f5f0-195">`ReorderLevel` usar uma caixa de texto cuja `ID` é definido como `NewReorderLevel`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-195">`ReorderLevel` use a TextBox whose `ID` is set to `NewReorderLevel`.</span></span> <span data-ttu-id="8f5f0-196">Inclua um CompareValidator que garante que o valor inserido é um valor inteiro maior ou igual a zero.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-196">Include a CompareValidator that ensures that the value entered is an integer value greater than or equal to zero.</span></span>
- <span data-ttu-id="8f5f0-197">`Discontinued` Adicione uma caixa de seleção, definindo sua `ID` para `NewDiscontinued`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-197">`Discontinued` add a CheckBox, setting its `ID` to `NewDiscontinued`.</span></span>
- <span data-ttu-id="8f5f0-198">`CategoryName` Adicione uma DropDownList e defina suas `ID` para `NewCategoryID`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-198">`CategoryName` add a DropDownList and set its `ID` to `NewCategoryID`.</span></span> <span data-ttu-id="8f5f0-199">Associá-lo a um novo ObjectDataSource denominado `CategoriesDataSource` e configurá-lo para usar o `CategoriesBLL` classe s `GetCategories()` método.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-199">Bind it to a new ObjectDataSource named `CategoriesDataSource` and configure it to use the `CategoriesBLL` class s `GetCategories()` method.</span></span> <span data-ttu-id="8f5f0-200">Ter o s DropDownList `ListItem` exibição s a `CategoryName` dados de campo, usando o `CategoryID` campo de dados como seus valores.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-200">Have the DropDownList s `ListItem` s display the `CategoryName` data field, using the `CategoryID` data field as their values.</span></span>
- <span data-ttu-id="8f5f0-201">`SupplierName` Adicione uma DropDownList e defina suas `ID` para `NewSupplierID`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-201">`SupplierName` add a DropDownList and set its `ID` to `NewSupplierID`.</span></span> <span data-ttu-id="8f5f0-202">Associá-lo a um novo ObjectDataSource denominado `SuppliersDataSource` e configurá-lo para usar o `SuppliersBLL` classe s `GetSuppliers()` método.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-202">Bind it to a new ObjectDataSource named `SuppliersDataSource` and configure it to use the `SuppliersBLL` class s `GetSuppliers()` method.</span></span> <span data-ttu-id="8f5f0-203">Ter o s DropDownList `ListItem` exibição s a `CompanyName` dados de campo, usando o `SupplierID` campo de dados como seus valores.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-203">Have the DropDownList s `ListItem` s display the `CompanyName` data field, using the `SupplierID` data field as their values.</span></span>

<span data-ttu-id="8f5f0-204">Para cada um dos controles de validação, desmarque as `ForeColor` propriedade para que o `FooterStyle` cor de primeiro plano branco s da classe CSS será usado em vez do padrão vermelho.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-204">For each of the validation controls, clear out the `ForeColor` property so that the `FooterStyle` CSS class s white foreground color will be used in place of the default red.</span></span> <span data-ttu-id="8f5f0-205">Também use o `ErrorMessage` propriedade para obter uma descrição detalhada, mas defina o `Text` propriedade como um asterisco.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-205">Also use the `ErrorMessage` property for a detailed description, but set the `Text` property to an asterisk.</span></span> <span data-ttu-id="8f5f0-206">Para impedir que o texto do controle s validação fazendo com que a interface de inserção para ficar em duas linhas, defina as `FooterStyle` s `Wrap` propriedade como false para cada um do `FooterTemplate` s que usam um controle de validação.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-206">To prevent the validation control s text from causing the inserting interface to wrap to two lines, set the `FooterStyle` s `Wrap` property to false for each of the `FooterTemplate` s that use a validation control.</span></span> <span data-ttu-id="8f5f0-207">Por fim, adicione um controle ValidationSummary abaixo a GridView e defina sua `ShowMessageBox` propriedade para `true` e seu `ShowSummary` propriedade `false`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-207">Finally, add a ValidationSummary control beneath the GridView and set its `ShowMessageBox` property to `true` and its `ShowSummary` property to `false`.</span></span>

<span data-ttu-id="8f5f0-208">Ao adicionar um novo produto, é necessário fornecer o `CategoryID` e `SupplierID`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-208">When adding a new product, we need to provide the `CategoryID` and `SupplierID`.</span></span> <span data-ttu-id="8f5f0-209">Essas informações são capturadas por meio de DropDownLists nas células do rodapé para o `CategoryName` e `SupplierName` campos.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-209">This information is captured through the DropDownLists in the footer cells for the `CategoryName` and `SupplierName` fields.</span></span> <span data-ttu-id="8f5f0-210">Optei por usar esses campos em vez de `CategoryID` e `SupplierID` TemplateFields como linhas de usuário na grade s dados é provavelmente mais interessado em ver os nomes de categoria e fornecedor em vez de seus valores de ID.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-210">I chose to use these fields as opposed to the `CategoryID` and `SupplierID` TemplateFields because in the grid s data rows the user is likely more interested in seeing the category and supplier names rather than their ID values.</span></span> <span data-ttu-id="8f5f0-211">Uma vez que o `CategoryID` e `SupplierID` valores agora estão sendo capturados na `CategoryName` e `SupplierName` interfaces de inserção de s de campo, podemos remover o `CategoryID` e `SupplierID` TemplateFields de GridView.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-211">Since the `CategoryID` and `SupplierID` values are now being captured in the `CategoryName` and `SupplierName` field s inserting interfaces, we can remove the `CategoryID` and `SupplierID` TemplateFields from the GridView.</span></span>

<span data-ttu-id="8f5f0-212">Da mesma forma, o `ProductID` não é usado ao adicionar um novo produto, portanto, o `ProductID` TemplateField também pode ser removido.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-212">Similarly, the `ProductID` is not used when adding a new product, so the `ProductID` TemplateField can be removed as well.</span></span> <span data-ttu-id="8f5f0-213">No entanto, deixe o s deixar o `ProductID` campo na grade.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-213">However, let s leave the `ProductID` field in the grid.</span></span> <span data-ttu-id="8f5f0-214">Além de caixas de texto, DropDownLists, caixas de seleção e controles de validação que compõem a interface de inserção, precisaremos também uma adição botão que, quando clicado, executa a lógica para adicionar o novo produto no banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-214">In addition to the TextBoxes, DropDownLists, CheckBoxes, and validation controls that make up the inserting interface, we'll also need an Add button that, when clicked, performs the logic to add the new product to the database.</span></span> <span data-ttu-id="8f5f0-215">Na etapa 4, incluiremos um botão Add na interface de inserção na `ProductID` TemplateField s `FooterTemplate`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-215">In Step 4 we'll include an Add button in the inserting interface in the `ProductID` TemplateField s `FooterTemplate`.</span></span>

<span data-ttu-id="8f5f0-216">Fique à vontade para melhorar a aparência de vários campos de GridView.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-216">Feel free to improve the appearance of the various GridView fields.</span></span> <span data-ttu-id="8f5f0-217">Por exemplo, você talvez queira formatar a `UnitPrice` Alinhar à direita de valores como uma moeda, o `UnitsInStock`, `UnitsOnOrder`, e `ReorderLevel` campos e atualizar o `HeaderText` valores para o TemplateFields.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-217">For example, you might want to format the `UnitPrice` values as a currency, right-align the `UnitsInStock`, `UnitsOnOrder`, and `ReorderLevel` fields, and update the `HeaderText` values for the TemplateFields.</span></span>

<span data-ttu-id="8f5f0-218">Depois de criar a enorme quantidade de inserção de interfaces na `FooterTemplate` s, removendo a `SupplierID`, e `CategoryID` TemplateFields e melhorar a estética da grade por meio de formatação e alinhando TemplateFields, seu s GridView declarativo marcação deve ser semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="8f5f0-218">After creating the slew of inserting interfaces in the `FooterTemplate` s, removing the `SupplierID`, and `CategoryID` TemplateFields, and improving the aesthetics of the grid through formatting and aligning the TemplateFields, your GridView s declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample5.aspx)]

<span data-ttu-id="8f5f0-219">Quando visualizado por meio de um navegador, a linha de rodapé do GridView s agora inclui concluído inserindo interface (consulte a Figura 10).</span><span class="sxs-lookup"><span data-stu-id="8f5f0-219">When viewed through a browser, the GridView s footer row now includes the completed inserting interface (see Figure 10).</span></span> <span data-ttu-id="8f5f0-220">Neste ponto, o inserção t da interface incluem um meio para que o usuário indique que s she inseriu os dados para o novo produto e deseja inserir um novo registro de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-220">At this point, the inserting interface doesn t include a means for the user to indicate that she s entered the data for the new product and wants to insert a new record into the database.</span></span> <span data-ttu-id="8f5f0-221">Além disso, podemos ver ainda para abordar como os dados inseridos no rodapé se traduzirá em um novo registro no `Products` banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-221">Also, we ve yet to address how the data entered into the footer will translate into a new record in the `Products` database.</span></span> <span data-ttu-id="8f5f0-222">Na etapa 4, examinaremos como incluir um botão Add à interface de inserção e como executar código no postback quando ele s clicado.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-222">In Step 4 we'll look at how to include an Add button to the inserting interface and how to execute code on postback when it s clicked.</span></span> <span data-ttu-id="8f5f0-223">Etapa 5 mostra como inserir um novo registro usando os dados do rodapé.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-223">Step 5 shows how to insert a new record using the data from the footer.</span></span>


<span data-ttu-id="8f5f0-224">[![O rodapé do GridView fornece uma Interface para adicionar um novo registro](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image10.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image17.png)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-224">[![The GridView Footer Provides an Interface for Adding a New Record](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image10.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image17.png)</span></span>

<span data-ttu-id="8f5f0-225">**Figura 10**: O rodapé do GridView fornece uma Interface para adicionar um novo registro ([clique para exibir a imagem em tamanho normal](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="8f5f0-225">**Figure 10**: The GridView Footer Provides an Interface for Adding a New Record ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image18.png))</span></span>


## <a name="step-4-including-an-add-button-in-the-inserting-interface"></a><span data-ttu-id="8f5f0-226">Etapa 4: Incluindo um botão Add na Interface de inserção</span><span class="sxs-lookup"><span data-stu-id="8f5f0-226">Step 4: Including an Add Button in the Inserting Interface</span></span>

<span data-ttu-id="8f5f0-227">É necessário incluir um botão Add em algum lugar na interface de inserção, pois o s da linha de rodapé inserindo interface atualmente não tem os meios para o usuário indicar que ele tem terminado de inserir as novas informações de produto s.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-227">We need to include an Add button somewhere in the inserting interface since the footer row s inserting interface currently lacks the means for the user to indicate that they have completed entering the new product s information.</span></span> <span data-ttu-id="8f5f0-228">Isso poderia ser colocado em um dos existentes `FooterTemplate` s ou podemos poderia adicionar uma nova coluna à grade para essa finalidade.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-228">This could be placed in one of the existing `FooterTemplate` s or we could add a new column to the grid for this purpose.</span></span> <span data-ttu-id="8f5f0-229">Para este tutorial, vamos s colocar no botão Adicionar na `ProductID` TemplateField s `FooterTemplate`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-229">For this tutorial, let s place the Add button in the `ProductID` TemplateField s `FooterTemplate`.</span></span>

<span data-ttu-id="8f5f0-230">No Designer, clique no link Editar modelos na marca inteligente GridView s e, em seguida, escolha o `ProductID` campo s `FooterTemplate` na lista suspensa.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-230">From the Designer, click on the Edit Templates link in the GridView s smart tag and then choose the `ProductID` field s `FooterTemplate` from the drop-down list.</span></span> <span data-ttu-id="8f5f0-231">Adicionar um controle da Web de botão (ou um LinkButton ou ImageButton, se você preferir) para o modelo, definindo sua identificação para `AddProduct`, seus `CommandName` para inserir e seu `Text` propriedade para adicionar, conforme mostrado na Figura 11.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-231">Add a Button Web control (or a LinkButton or ImageButton, if you prefer) to the template, setting its ID to `AddProduct`, its `CommandName` to Insert, and its `Text` property to Add as shown in Figure 11.</span></span>


<span data-ttu-id="8f5f0-232">[![Coloque o botão Adicionar s ProductID TemplateField noFooterTemplate](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image11.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image19.png)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-232">[![Place the Add Button in the ProductID TemplateField s FooterTemplate](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image11.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image19.png)</span></span>

<span data-ttu-id="8f5f0-233">**Figura 11**: Colocar o botão Adicionar na `ProductID` s TemplateField `FooterTemplate` ([clique para exibir a imagem em tamanho normal](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image20.png))</span><span class="sxs-lookup"><span data-stu-id="8f5f0-233">**Figure 11**: Place the Add Button in the `ProductID` TemplateField s `FooterTemplate` ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image20.png))</span></span>


<span data-ttu-id="8f5f0-234">Depois que você tiver incluído o botão Adicionar, teste a página em um navegador.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-234">Once you ve included the Add button, test out the page in a browser.</span></span> <span data-ttu-id="8f5f0-235">Observe que, ao clicar no botão Adicionar com dados inválidos na interface de inserção, o postback é circuited curtas e controle ValidationSummary indica dados inválidos (veja a Figura 12).</span><span class="sxs-lookup"><span data-stu-id="8f5f0-235">Note that when clicking the Add button with invalid data in the inserting interface, the postback is short circuited and the ValidationSummary control indicates the invalid data (see Figure 12).</span></span> <span data-ttu-id="8f5f0-236">Os dados apropriados inseridos, clicando no botão Adicionar faz com que um postback.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-236">With appropriate data entered, clicking the Add button causes a postback.</span></span> <span data-ttu-id="8f5f0-237">Nenhum registro é adicionado ao banco de dados, no entanto.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-237">No record is added to the database, however.</span></span> <span data-ttu-id="8f5f0-238">Precisamos escrever um pouco de código para realmente executar a inserção.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-238">We will need to write a bit of code to actually perform the insert.</span></span>


<span data-ttu-id="8f5f0-239">[![O botão Adicionar s Postback é curto Circuited se não houver dados inválidos na Interface de inserção](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image12.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image21.png)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-239">[![The Add Button s Postback is Short Circuited if There is Invalid Data in the Inserting Interface](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image12.gif)](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image21.png)</span></span>

<span data-ttu-id="8f5f0-240">**Figura 12**: O botão Adicionar Postback a está Circuited curto se não houver dados inválidos na Interface de inserção ([clique para exibir a imagem em tamanho normal](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image22.png))</span><span class="sxs-lookup"><span data-stu-id="8f5f0-240">**Figure 12**: The Add Button s Postback is Short Circuited if There is Invalid Data in the Inserting Interface ([Click to view full-size image](inserting-a-new-record-from-the-gridview-s-footer-cs/_static/image22.png))</span></span>


> [!NOTE]
> <span data-ttu-id="8f5f0-241">Os controles de validação na interface de inserção não foram atribuídos a um grupo de validação.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-241">The validation controls in the inserting interface were not assigned to a validation group.</span></span> <span data-ttu-id="8f5f0-242">Isso funciona bem desde que a interface de inserção é o único conjunto de controles de validação na página.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-242">This works fine so long as the inserting interface is the only set of validation controls on the page.</span></span> <span data-ttu-id="8f5f0-243">Se, no entanto, há outros controles de validação na página (como controles de validação na interface de edição de grade s), os controles de validação na inserção de interface e adicionar botão s `ValidationGroup` propriedades devem ser atribuídas como o mesmo valor de so como para Associe esses controles a um grupo de validação em particular.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-243">If, however, there are other validation controls on the page (such as validation controls in the grid s editing interface), the validation controls in the inserting interface and Add button s `ValidationGroup` properties should be assigned the same value so as to associate these controls with a particular validation group.</span></span> <span data-ttu-id="8f5f0-244">Ver [dissecando os controles de validação no ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx) para obter mais informações sobre como particionar os controles de validação e botões em uma página em grupos de validação.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-244">See [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx) for more information on partitioning the validation controls and buttons on a page into validation groups.</span></span>


## <a name="step-5-inserting-a-new-record-into-theproductstable"></a><span data-ttu-id="8f5f0-245">Etapa 5: Inserindo um novo registro para o`Products`tabela</span><span class="sxs-lookup"><span data-stu-id="8f5f0-245">Step 5: Inserting a New Record Into the`Products`Table</span></span>

<span data-ttu-id="8f5f0-246">Ao utilizar os recursos internos de edição de GridView, GridView manipula automaticamente todo o trabalho necessário para executar a atualização.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-246">When utilizing the built-in editing features of the GridView, the GridView automatically handles all of the work necessary for performing the update.</span></span> <span data-ttu-id="8f5f0-247">Em particular, quando o botão de atualização é clicado ele copia os valores inseridos de interface de edição para os parâmetros no s ObjectDataSource `UpdateParameters` coleta e aciona a atualização, invocando o s ObjectDataSource `Update()` método.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-247">In particular, when the Update button is clicked it copies the values entered from the editing interface to the parameters in the ObjectDataSource s `UpdateParameters` collection and kicks off the update by invoking the ObjectDataSource s `Update()` method.</span></span> <span data-ttu-id="8f5f0-248">Uma vez que o GridView não fornece tal funcionalidade interna para a inserção, devemos implementar código que chama o s ObjectDataSource `Insert()` método e copia os valores da inserção de interface para o s ObjectDataSource `InsertParameters` coleção .</span><span class="sxs-lookup"><span data-stu-id="8f5f0-248">Since the GridView does not provide such built-in functionality for inserting, we must implement code that calls the ObjectDataSource s `Insert()` method and copies the values from the inserting interface to the ObjectDataSource s `InsertParameters` collection.</span></span>

<span data-ttu-id="8f5f0-249">Essa lógica de inserção deve ser executada depois que foi clicado no botão Adicionar.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-249">This insert logic should be executed after the Add button has been clicked.</span></span> <span data-ttu-id="8f5f0-250">Conforme discutido na [adicionar e responder a botões em um GridView](../custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs.md) tutorial, sempre que um botão, LinkButton ou ImageButton em um GridView é clicado, o GridView s `RowCommand` evento é acionado em um postback.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-250">As discussed in the [Adding and Responding to Buttons in a GridView](../custom-button-actions/adding-and-responding-to-buttons-to-a-gridview-cs.md) tutorial, anytime a Button, LinkButton, or ImageButton in a GridView is clicked, the GridView s `RowCommand` event fires on postback.</span></span> <span data-ttu-id="8f5f0-251">Esse evento é acionado se o botão, LinkButton ou ImageButton foi adicionado explicitamente, como o botão Adicionar na linha de rodapé ou se ele foi adicionado automaticamente pelo GridView (como botões de link na parte superior de cada coluna quando habilitar a classificação é selecionado, ou o Botões de link na interface de paginação quando habilitar a paginação está selecionada).</span><span class="sxs-lookup"><span data-stu-id="8f5f0-251">This event fires whether the Button, LinkButton, or ImageButton was added explicitly such as the Add button in the footer row or if it was automatically added by the GridView (such as the LinkButtons at the top of each column when Enable Sorting is selected, or the LinkButtons in the paging interface when Enable Paging is selected).</span></span>

<span data-ttu-id="8f5f0-252">Portanto, para responder ao usuário clicar no botão Adicionar, precisamos criar um manipulador de eventos para o s GridView `RowCommand` eventos.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-252">Therefore, to respond to the user clicking the Add button, we need to create an event handler for the GridView s `RowCommand` event.</span></span> <span data-ttu-id="8f5f0-253">Uma vez que esse evento é acionado sempre que *qualquer* ImageButton GridView, LinkButton ou botão é clicado, ele s vital que estamos apenas prosseguir com a lógica de inserção se o `CommandName` propriedade transmitido os mapeamentos de manipulador de eventos para o `CommandName` o valor do botão Adicionar (inserção).</span><span class="sxs-lookup"><span data-stu-id="8f5f0-253">Since this event fires whenever *any* Button, LinkButton, or ImageButton in the GridView is clicked, it s vital that we only proceed with the inserting logic if the `CommandName` property passed into the event handler maps to the `CommandName` value of the Add button ( Insert ).</span></span> <span data-ttu-id="8f5f0-254">Além disso, podemos também somente deverá continuar se os controles de validação relatam dados válidos.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-254">Moreover, we should also only proceed if the validation controls report valid data.</span></span> <span data-ttu-id="8f5f0-255">Para acomodar isso, crie um manipulador de eventos para o `RowCommand` evento com o código a seguir:</span><span class="sxs-lookup"><span data-stu-id="8f5f0-255">To accommodate this, create an event handler for the `RowCommand` event with the following code:</span></span>


[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample6.cs)]

> [!NOTE]
> <span data-ttu-id="8f5f0-256">Você pode estar se perguntando por que o manipulador de eventos incomodá-verificando o `Page.IsValid` propriedade.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-256">You may be wondering why the event handler bothers checking the `Page.IsValid` property.</span></span> <span data-ttu-id="8f5f0-257">Afinal de contas, t obtida a postagem ser suprimidos se dados inválidos são fornecidos na interface do inserindo?</span><span class="sxs-lookup"><span data-stu-id="8f5f0-257">After all, won t the postback be suppressed if invalid data is provided in the inserting interface?</span></span> <span data-ttu-id="8f5f0-258">Essa suposição está correta, desde que o usuário não tiver desabilitado o JavaScript ou tomou medidas para driblar a lógica de validação do lado do cliente.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-258">This assumption is correct as long as the user has not disabled JavaScript or has taken steps to circumvent the client-side validation logic.</span></span> <span data-ttu-id="8f5f0-259">Em suma, um nunca dependa estritamente validação do lado do cliente; sempre deve ser executada uma verificação do lado do servidor quanto à validade antes de trabalhar com os dados.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-259">In short, one should never rely strictly on client-side validation; a server-side check for validity should always be performed before working with the data.</span></span>


<span data-ttu-id="8f5f0-260">Na etapa 1 criamos a `ProductsDataSource` ObjectDataSource, de modo que suas `Insert()` método é mapeado para o `ProductsBLL` classe s `AddProduct` método.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-260">In Step 1 we created the `ProductsDataSource` ObjectDataSource such that its `Insert()` method is mapped to the `ProductsBLL` class s `AddProduct` method.</span></span> <span data-ttu-id="8f5f0-261">Para inserir o novo registro para o `Products` tabela, podemos simplesmente invocar o s ObjectDataSource `Insert()` método:</span><span class="sxs-lookup"><span data-stu-id="8f5f0-261">To insert the new record into the `Products` table, we can simply invoke the ObjectDataSource s `Insert()` method:</span></span>


[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample7.cs)]

<span data-ttu-id="8f5f0-262">Agora que o `Insert()` método foi invocado, tudo o que resta fazer é copiar os valores da interface de inserção para os parâmetros passados para o `ProductsBLL` classe s `AddProduct` método.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-262">Now that the `Insert()` method has been invoked, all that remains is to copy the values from the inserting interface to the parameters passed to the `ProductsBLL` class s `AddProduct` method.</span></span> <span data-ttu-id="8f5f0-263">Como vimos na [examinando os eventos associados inserindo, atualizando e excluindo](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial, isso pode ser feito com o ObjectDataSource s `Inserting` eventos.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-263">As we saw back in the [Examining the Events Associated with Inserting, Updating, and Deleting](../editing-inserting-and-deleting-data/examining-the-events-associated-with-inserting-updating-and-deleting-cs.md) tutorial, this can be accomplished through the ObjectDataSource s `Inserting` event.</span></span> <span data-ttu-id="8f5f0-264">No `Inserting` eventos, precisamos referenciar programaticamente os controles do `Products` rodapé do GridView s de linhas e atribuir os valores para o `e.InputParameters` coleção.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-264">In the `Inserting` event we need to programmatically reference the controls from the `Products` GridView s footer row and assign their values to the `e.InputParameters` collection.</span></span> <span data-ttu-id="8f5f0-265">Se o usuário omite um valor como deixar o `ReorderLevel` em branco de caixa de texto, precisamos especificar que o valor inserido no banco de dados deve ser `NULL`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-265">If the user omits a value such as leaving the `ReorderLevel` TextBox blank we need to specify that the value inserted into the database should be `NULL`.</span></span> <span data-ttu-id="8f5f0-266">Uma vez que o `AddProducts` método aceita tipos anuláveis para os campos de banco de dados que permite valor nulo, simplesmente use um tipo anulável e defina seu valor como `null` no caso em que a entrada do usuário for omitida.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-266">Since the `AddProducts` method accepts nullable types for the nullable database fields, simply use a nullable type and set its value to `null` in the case where user input is omitted.</span></span>


[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample8.cs)]

<span data-ttu-id="8f5f0-267">Com o `Inserting` manipulador de eventos concluído, novos registros podem ser adicionados à `Products` tabela de banco de dados por meio da linha de rodapé do GridView s.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-267">With the `Inserting` event handler completed, new records can be added to the `Products` database table via the GridView s footer row.</span></span> <span data-ttu-id="8f5f0-268">Vá em frente e tente adicionar vários novos produtos.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-268">Go ahead and try adding several new products.</span></span>

## <a name="enhancing-and-customizing-the-add-operation"></a><span data-ttu-id="8f5f0-269">Aprimorar e personalizar a operação de adição</span><span class="sxs-lookup"><span data-stu-id="8f5f0-269">Enhancing and Customizing the Add Operation</span></span>

<span data-ttu-id="8f5f0-270">No momento, clicando no botão Adicionar adiciona um novo registro na tabela de banco de dados, mas não fornece qualquer tipo de comentários visuais que o registro tenha sido adicionado com êxito.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-270">Currently, clicking the Add button adds a new record to the database table but does not provide any sort of visual feedback that the record has successfully been added.</span></span> <span data-ttu-id="8f5f0-271">O ideal é que uma caixa de chamadas alerta controle ou no lado do cliente da Web do rótulo informa o usuário que sua inserção foi concluída com êxito.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-271">Ideally, a Label Web control or client-side alert box would inform the user that their insert has completed with success.</span></span> <span data-ttu-id="8f5f0-272">Posso deixar isso como um exercício para o leitor.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-272">I leave this as an exercise for the reader.</span></span>

<span data-ttu-id="8f5f0-273">O GridView usado neste tutorial não se aplica a uma ordem de classificação para os produtos listados, nem permite que o usuário final classificar os dados.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-273">The GridView used in this tutorial does not apply any sort order to the listed products, nor does it allow the end user to sort the data.</span></span> <span data-ttu-id="8f5f0-274">Consequentemente, os registros são ordenados como estão no banco de dados por seu campo de chave primária.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-274">Consequently, the records are ordered as they are in the database by their primary key field.</span></span> <span data-ttu-id="8f5f0-275">Uma vez que cada novo registro tem um `ProductID` valor maior que o último deles, sempre que um novo produto é adicionado, ele é é incluído no final da grade.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-275">Since each new record has a `ProductID` value greater than the last one, every time a new product is added it is tacked on to the end of the grid.</span></span> <span data-ttu-id="8f5f0-276">Portanto, você talvez queira enviar automaticamente o usuário para a última página do GridView, depois de adicionar um novo registro.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-276">Therefore, you may want to automatically send the user to the last page of the GridView after adding a new record.</span></span> <span data-ttu-id="8f5f0-277">Isso pode ser feito adicionando a seguinte linha de código após a chamada para `ProductsDataSource.Insert()` no `RowCommand` manipulador de eventos para indicar que o usuário precisa ser enviada para a última página após a associação dos dados a GridView:</span><span class="sxs-lookup"><span data-stu-id="8f5f0-277">This can be accomplished by adding the following line of code after the call to `ProductsDataSource.Insert()` in the `RowCommand` event handler to indicate that the user needs to be sent to the last page after binding the data to the GridView:</span></span>


[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample9.cs)]

<span data-ttu-id="8f5f0-278">`SendUserToLastPage` é uma variável booliana de nível de página que inicialmente é atribuída um valor de `false`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-278">`SendUserToLastPage` is a page-level Boolean variable that is initially assigned a value of `false`.</span></span> <span data-ttu-id="8f5f0-279">Em s GridView `DataBound` manipulador de eventos, se `SendUserToLastPage` é false, o `PageIndex` propriedade é atualizada para enviar o usuário para a última página.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-279">In the GridView s `DataBound` event handler, if `SendUserToLastPage` is false, the `PageIndex` property is updated to send the user to the last page.</span></span>


[!code-csharp[Main](inserting-a-new-record-from-the-gridview-s-footer-cs/samples/sample10.cs)]

<span data-ttu-id="8f5f0-280">O motivo pelo qual o `PageIndex` propriedade é definida na `DataBound` manipulador de eventos (em oposição ao `RowCommand` manipulador de eventos) é porque quando o `RowCommand` manipulador de eventos é acionado, ve ainda para adicionar o novo registro para o `Products` tabela de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-280">The reason the `PageIndex` property is set in the `DataBound` event handler (as opposed to the `RowCommand` event handler) is because when the `RowCommand` event handler fires we ve yet to add the new record to the `Products` database table.</span></span> <span data-ttu-id="8f5f0-281">Portanto, nos `RowCommand` o último índice de página de manipulador de eventos (`PageCount - 1`) representa o índice da última página *antes de* foi adicionado o novo produto.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-281">Therefore, in the `RowCommand` event handler the last page index (`PageCount - 1`) represents the last page index *before* the new product has been added.</span></span> <span data-ttu-id="8f5f0-282">Para a maioria dos produtos que estão sendo adicionados, o último índice de página é o mesmo depois de adicionar o novo produto.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-282">For the majority of products being added, the last page index is the same after adding the new product.</span></span> <span data-ttu-id="8f5f0-283">Mas quando o produto adicionado resulta em um novo último índice de página, se atualizarmos incorretamente a `PageIndex` no `RowCommand` manipulador de eventos, em seguida, podemos serão levados para a segunda à última página (o último índice de página antes de adicionar o novo produto) em vez de última página novo i ndice.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-283">But when the added product results in a new last page index, if we incorrectly update the `PageIndex` in the `RowCommand` event handler then we'll be taken to the second to last page (the last page index prior to adding the new product) as opposed to the new last page index.</span></span> <span data-ttu-id="8f5f0-284">Uma vez que o `DataBound` manipulador de eventos é acionado depois que o novo produto foi adicionado e os dados se a grade, definindo o `PageIndex` propriedade existe sabemos que estamos aproveitando o último índice de página correta.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-284">Since the `DataBound` event handler fires after the new product has been added and the data rebound to the grid, by setting the `PageIndex` property there we know we re getting the correct last page index.</span></span>

<span data-ttu-id="8f5f0-285">Por fim, o GridView usado neste tutorial é bastante ampla devido ao número de campos que devem ser coletados para adicionar um novo produto.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-285">Finally, the GridView used in this tutorial is quite wide due to the number of fields that must be collected for adding a new product.</span></span> <span data-ttu-id="8f5f0-286">Devido a essa largura um layout vertical de s DetailsView talvez preferencial.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-286">Due to this width, a DetailsView s vertical layout might be preferred.</span></span> <span data-ttu-id="8f5f0-287">O s GridView largura geral poderia ser reduzida por coletar menos entradas.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-287">The GridView s overall width could be reduced by collecting fewer inputs.</span></span> <span data-ttu-id="8f5f0-288">Talvez, don precisa coletar as `UnitsOnOrder`, `UnitsInStock`, e `ReorderLevel` campos ao adicionar um novo produto, caso em que esses campos pôde ser removidos do GridView.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-288">Perhaps we don t need to collect the `UnitsOnOrder`, `UnitsInStock`, and `ReorderLevel` fields when adding a new product, in which case these fields could be removed from the GridView.</span></span>

<span data-ttu-id="8f5f0-289">Para ajustar os dados coletados, podemos usar uma das duas abordagens:</span><span class="sxs-lookup"><span data-stu-id="8f5f0-289">To adjust the data collected, we can use one of two approaches:</span></span>

- <span data-ttu-id="8f5f0-290">Continuar a usar o `AddProduct` método que espera valores para o `UnitsOnOrder`, `UnitsInStock`, e `ReorderLevel` campos.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-290">Continue to use the `AddProduct` method that expects values for the `UnitsOnOrder`, `UnitsInStock`, and `ReorderLevel` fields.</span></span> <span data-ttu-id="8f5f0-291">No `Inserting` manipulador de eventos, fornecer embutido em código, o padrão de valores a serem usados para essas entradas que foram removidas da interface de inserção.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-291">In the `Inserting` event handler, provide hard-coded, default values to use for these inputs that have been removed from the inserting interface.</span></span>
- <span data-ttu-id="8f5f0-292">Criar uma nova sobrecarga da `AddProduct` método no `ProductsBLL` classe que não aceita entradas para o `UnitsOnOrder`, `UnitsInStock`, e `ReorderLevel` campos.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-292">Create a new overload of the `AddProduct` method in the `ProductsBLL` class that does not accept inputs for the `UnitsOnOrder`, `UnitsInStock`, and `ReorderLevel` fields.</span></span> <span data-ttu-id="8f5f0-293">Em seguida, na página do ASP.NET, configure o ObjectDataSource para usar essa nova sobrecarga.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-293">Then, in the ASP.NET page, configure the ObjectDataSource to use this new overload.</span></span>

<span data-ttu-id="8f5f0-294">Cada opção funcionará igualmente bem.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-294">Either option will work equally as well.</span></span> <span data-ttu-id="8f5f0-295">Após tutoriais usamos a última opção, criando várias sobrecargas para o `ProductsBLL` classe s `UpdateProduct` método.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-295">In past tutorials we used the latter option, creating multiple overloads for the `ProductsBLL` class s `UpdateProduct` method.</span></span>

## <a name="summary"></a><span data-ttu-id="8f5f0-296">Resumo</span><span class="sxs-lookup"><span data-stu-id="8f5f0-296">Summary</span></span>

<span data-ttu-id="8f5f0-297">Os recursos internos de inserção encontrados na DetailsView e FormView não tem de GridView, mas com um pouco de esforço, uma interface de inserção pode ser adicionada à linha de rodapé.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-297">The GridView lacks the built-in inserting capabilities found in the DetailsView and FormView, but with a bit of effort an inserting interface can be added to the footer row.</span></span> <span data-ttu-id="8f5f0-298">Para exibir a linha de rodapé em um GridView simplesmente definir seus `ShowFooter` propriedade para `true`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-298">To display the footer row in a GridView simply set its `ShowFooter` property to `true`.</span></span> <span data-ttu-id="8f5f0-299">O conteúdo da linha de rodapé pode ser personalizado para cada campo ao converter o campo em um TemplateField e adicionando a inserção de interface para o `FooterTemplate`.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-299">The footer row content can be customized for each field by converting the field to a TemplateField and adding the inserting interface to the `FooterTemplate`.</span></span> <span data-ttu-id="8f5f0-300">Como vimos neste tutorial, o `FooterTemplate` pode conter botões, caixas de texto, DropDownLists, caixas de seleção, os controles de fonte de dados para popular os controles de Web controlado por dados (como DropDownLists) e controles de validação.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-300">As we saw in this tutorial, the `FooterTemplate` can contain Buttons, TextBoxes, DropDownLists, CheckBoxes, data source controls for populating data-driven Web controls (such as DropDownLists), and validation controls.</span></span> <span data-ttu-id="8f5f0-301">Juntamente com controles para coletar a entrada do usuário s, é necessário um botão Adicionar, LinkButton ou ImageButton.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-301">Along with controls for collecting the user s input, an Add Button, LinkButton, or ImageButton is needed.</span></span>

<span data-ttu-id="8f5f0-302">Quando o botão Adicionar é clicado, o s ObjectDataSource `Insert()` método é chamado para iniciar o fluxo de trabalho de inserção.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-302">When the Add button is clicked, the ObjectDataSource s `Insert()` method is invoked to start the inserting workflow.</span></span> <span data-ttu-id="8f5f0-303">O ObjectDataSource, em seguida, chamará o método insert configurado (o `ProductsBLL` classe s `AddProduct` método neste tutorial).</span><span class="sxs-lookup"><span data-stu-id="8f5f0-303">The ObjectDataSource will then call the configured insert method (the `ProductsBLL` class s `AddProduct` method, in this tutorial).</span></span> <span data-ttu-id="8f5f0-304">Podemos deve copiar os valores de s GridView inserindo a interface para o s ObjectDataSource `InsertParameters` coleção antes do método de inserção que está sendo invocado.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-304">We must copy the values from the GridView s inserting interface to the ObjectDataSource s `InsertParameters` collection prior to the insert method being invoked.</span></span> <span data-ttu-id="8f5f0-305">Isso pode ser feito referenciando programaticamente os controles da Web interface inserindo em s ObjectDataSource `Inserting` manipulador de eventos.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-305">This can be accomplished by programmatically referencing the inserting interface Web controls in the ObjectDataSource s `Inserting` event handler.</span></span>

<span data-ttu-id="8f5f0-306">Esse tutorial conclui nossa olhada técnicas para melhorar a aparência de s GridView.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-306">This tutorial completes our look at techniques for enhancing the GridView s appearance.</span></span> <span data-ttu-id="8f5f0-307">O próximo conjunto de tutoriais irá examinar os dados de controles da Web e de como trabalhar com dados binários como imagens, PDFs, documentos do Word e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-307">The next set of tutorials will examine how to work with binary data such as images, PDFs, Word documents, and so on and the data Web controls.</span></span>

<span data-ttu-id="8f5f0-308">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="8f5f0-308">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="8f5f0-309">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="8f5f0-309">About the Author</span></span>

<span data-ttu-id="8f5f0-310">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de sete livros sobre ASP/ASP.NET e fundador da [4GuysFromRolla.com](http://www.4guysfromrolla.com), tem trabalhado com tecnologias Microsoft Web desde 1998.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-310">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="8f5f0-311">Scott funciona como um consultor independente, instrutor e escritor.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-311">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="8f5f0-312">Seu livro mais recente é [ *Sams Teach por conta própria ASP.NET 2.0 em 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="8f5f0-312">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="8f5f0-313">Ele pode ser contatado pelo [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-313">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="8f5f0-314">ou por meio de seu blog, que pode ser encontrado em [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="8f5f0-314">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="8f5f0-315">Agradecimentos especiais a</span><span class="sxs-lookup"><span data-stu-id="8f5f0-315">Special Thanks To</span></span>

<span data-ttu-id="8f5f0-316">Esta série de tutoriais foi revisada por muitos revisores úteis.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-316">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="8f5f0-317">Revisor de avanço para este tutorial foi Bernadette Leigh.</span><span class="sxs-lookup"><span data-stu-id="8f5f0-317">Lead reviewer for this tutorial was Bernadette Leigh.</span></span> <span data-ttu-id="8f5f0-318">Você está interessado na revisão Meus próximos artigos do MSDN?</span><span class="sxs-lookup"><span data-stu-id="8f5f0-318">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="8f5f0-319">Nesse caso, me descartar uma linha na [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-319">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="8f5f0-320">[Anterior](adding-a-gridview-column-of-checkboxes-cs.md)
> [Próximo](adding-a-gridview-column-of-radio-buttons-vb.md)</span><span class="sxs-lookup"><span data-stu-id="8f5f0-320">[Previous](adding-a-gridview-column-of-checkboxes-cs.md)
[Next](adding-a-gridview-column-of-radio-buttons-vb.md)</span></span>
