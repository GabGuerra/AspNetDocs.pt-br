---
uid: web-forms/overview/data-access/caching-data/caching-data-at-application-startup-cs
title: Armazenar em cache dados na inicialização do aplicativo (c#) | Microsoft Docs
author: rick-anderson
description: Em qualquer aplicativo da Web alguns dados serão usados com frequência e alguns dados serão usados com pouca frequência. Podemos melhorar o desempenho do nosso aplicativo b do ASP.NET...
ms.author: riande
ms.date: 05/30/2007
ms.assetid: 22ca8efa-7cd1-45a7-b9ce-ce6eb3b3ff95
msc.legacyurl: /web-forms/overview/data-access/caching-data/caching-data-at-application-startup-cs
msc.type: authoredcontent
ms.openlocfilehash: 7e858fe4c1f8e93f6e6fa30b33f5682945d03c32
ms.sourcegitcommit: 0f1119340e4464720cfd16d0ff15764746ea1fea
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 04/09/2019
ms.locfileid: "59403071"
---
# <a name="caching-data-at-application-startup-c"></a><span data-ttu-id="1ef0b-104">Armazenar dados em cache na inicialização do aplicativo (C#)</span><span class="sxs-lookup"><span data-stu-id="1ef0b-104">Caching Data at Application Startup (C#)</span></span>

<span data-ttu-id="1ef0b-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="1ef0b-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

[<span data-ttu-id="1ef0b-106">Baixar PDF</span><span class="sxs-lookup"><span data-stu-id="1ef0b-106">Download PDF</span></span>](caching-data-at-application-startup-cs/_static/datatutorial60cs1.pdf)

> <span data-ttu-id="1ef0b-107">Em qualquer aplicativo da Web alguns dados serão usados com frequência e alguns dados serão usados com pouca frequência.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-107">In any Web application some data will be frequently used and some data will be infrequently used.</span></span> <span data-ttu-id="1ef0b-108">Podemos melhorar o desempenho do nosso aplicativo ASP.NET com antecedência carregando os dados usados com frequência, uma técnica conhecida como.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-108">We can improve the performance of our ASP.NET application by loading in advance the frequently-used data, a technique known as.</span></span> <span data-ttu-id="1ef0b-109">Este tutorial demonstra uma abordagem de carregamento proativo, o que é carregar dados em cache na inicialização do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-109">This tutorial demonstrates one approach to proactive loading, which is to load data into the cache at application startup.</span></span>


## <a name="introduction"></a><span data-ttu-id="1ef0b-110">Introdução</span><span class="sxs-lookup"><span data-stu-id="1ef0b-110">Introduction</span></span>

<span data-ttu-id="1ef0b-111">Dois tutoriais anteriores, examinamos dados em cache na apresentação e as camadas de armazenamento em cache.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-111">The two previous tutorials looked at caching data in the Presentation and Caching Layers.</span></span> <span data-ttu-id="1ef0b-112">Na [armazenando dados com o ObjectDataSource](caching-data-with-the-objectdatasource-cs.md), analisamos usando recursos de cache do ObjectDataSource em cache os dados na camada de apresentação.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-112">In [Caching Data with the ObjectDataSource](caching-data-with-the-objectdatasource-cs.md), we looked at using the ObjectDataSource's caching features to cache data in the Presentation Layer.</span></span> <span data-ttu-id="1ef0b-113">[Armazenar em cache dados na arquitetura](caching-data-in-the-architecture-cs.md) examinado em uma camada de cache novo e separado de cache.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-113">[Caching Data in the Architecture](caching-data-in-the-architecture-cs.md) examined caching in a new, separate Caching Layer.</span></span> <span data-ttu-id="1ef0b-114">Ambos esses tutoriais usados *reativo carregamento* ao trabalhar com o cache de dados.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-114">Both of these tutorials used *reactive loading* in working with the data cache.</span></span> <span data-ttu-id="1ef0b-115">Com o carregamento reativo, cada vez que os dados são solicitados, o sistema verifica primeiro se ele estiver no cache.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-115">With reactive loading, each time the data is requested, the system first checks if it's in the cache.</span></span> <span data-ttu-id="1ef0b-116">Caso contrário, ele captura os dados da fonte de origem, como o banco de dados e os armazena no cache.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-116">If not, it grabs the data from the originating source, such as the database, and then stores it in the cache.</span></span> <span data-ttu-id="1ef0b-117">A principal vantagem de carregamento reativo é sua facilidade de implementação.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-117">The main advantage to reactive loading is its ease of implementation.</span></span> <span data-ttu-id="1ef0b-118">Uma das desvantagens é seu desempenho irregular entre solicitações.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-118">One of its disadvantages is its uneven performance across requests.</span></span> <span data-ttu-id="1ef0b-119">Imagine que uma página que usa a camada de cache do tutorial anterior para exibir informações sobre o produto.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-119">Imagine a page that uses the Caching Layer from the preceding tutorial to display product information.</span></span> <span data-ttu-id="1ef0b-120">Quando esta página é visitada pela primeira vez ou visitada pela primeira vez, após os dados em cache foi removidos devido a restrições de memória ou a expiração especificada ter sido atingido, os dados devem ser recuperados do banco de dados.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-120">When this page is visited for the first time, or visited for the first time after the cached data has been evicted due to memory constraints or the specified expiry having been reached, the data must be retrieved from the database.</span></span> <span data-ttu-id="1ef0b-121">Portanto, essas solicitações de usuários levará mais tempo do que as solicitações de usuários que podem ser atendidas pelo cache.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-121">Therefore, these users requests will take longer than users requests that can be served by the cache.</span></span>

<span data-ttu-id="1ef0b-122">*Carregamento proativo* fornece uma estratégia de gerenciamento de cache alternativo que suaviza o desempenho em todas as solicitações ao carregar os dados em cache antes que seja necessária.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-122">*Proactive loading* provides an alternative cache management strategy that smoothes out the performance across requests by loading the cached data before it's needed.</span></span> <span data-ttu-id="1ef0b-123">Normalmente, o carregamento proativo usa algum processo que periodicamente verifica ou é notificado quando houver uma atualização para os dados subjacentes.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-123">Typically, proactive loading uses some process that either periodically checks or is notified when there has been an update to the underlying data.</span></span> <span data-ttu-id="1ef0b-124">Esse processo, em seguida, atualiza o cache para mantê-la atualizada.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-124">This process then updates the cache to keep it fresh.</span></span> <span data-ttu-id="1ef0b-125">Carregamento proativo é especialmente útil se os dados subjacentes for proveniente de uma conexão de banco de dados lenta, um serviço Web ou alguma outra fonte de dados especialmente lenta.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-125">Proactive loading is especially useful if the underlying data comes from a slow database connection, a Web service, or some other particularly sluggish data source.</span></span> <span data-ttu-id="1ef0b-126">Mas essa abordagem de carregamento proativo é mais difícil de implementar, pois exige criar, gerenciar e implantar um processo para verificar as alterações e atualizar o cache.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-126">But this approach to proactive loading is more difficult to implement, as it requires creating, managing, and deploying a process to check for changes and update the cache.</span></span>

<span data-ttu-id="1ef0b-127">Outro tipo de carregamento proativo e o tipo que vamos explorar neste tutorial, está carregando dados em cache na inicialização do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-127">Another flavor of proactive loading, and the type we'll be exploring in this tutorial, is loading data into the cache at application startup.</span></span> <span data-ttu-id="1ef0b-128">Essa abordagem é especialmente útil para armazenar em cache dados estáticos, como os registros em tabelas de pesquisa de banco de dados.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-128">This approach is especially useful for caching static data, such as the records in database lookup tables.</span></span>

> [!NOTE]
> <span data-ttu-id="1ef0b-129">Para obter uma visão mais detalhada sobre as diferenças entre carregamento proativo e reativo, bem como listas de prós e contras recomendações de implementação, consulte o [gerenciar o conteúdo de um Cache](https://msdn.microsoft.com/library/ms978503.aspx) seção o [ Guia de arquitetura para aplicativos do .NET Framework de cache](https://msdn.microsoft.com/library/ms978498.aspx).</span><span class="sxs-lookup"><span data-stu-id="1ef0b-129">For a more in-depth look at the differences between proactive and reactive loading, as well as lists of pros, cons, and implementation recommendations, refer to the [Managing the Contents of a Cache](https://msdn.microsoft.com/library/ms978503.aspx) section of the [Caching Architecture Guide for .NET Framework Applications](https://msdn.microsoft.com/library/ms978498.aspx).</span></span>


## <a name="step-1-determining-what-data-to-cache-at-application-startup"></a><span data-ttu-id="1ef0b-130">Etapa 1: Determinando quais dados de Cache na inicialização do aplicativo</span><span class="sxs-lookup"><span data-stu-id="1ef0b-130">Step 1: Determining What Data to Cache at Application Startup</span></span>

<span data-ttu-id="1ef0b-131">Os exemplos de cache usando o carregamento reativo, examinamos no trabalho dois tutoriais anteriores bem com dados que pode ser alterado periodicamente e não demorarem exorbitantly para gerar.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-131">The caching examples using reactive loading that we examined in the previous two tutorials work well with data that may periodically change and does not take exorbitantly long to generate.</span></span> <span data-ttu-id="1ef0b-132">Mas se os dados em cache nunca mudarem, a expiração usada pelo carregamento reativo é supérflua.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-132">But if the cached data never changes, the expiry used by reactive loading is superfluous.</span></span> <span data-ttu-id="1ef0b-133">Da mesma forma, se os dados sejam armazenados em cache levam um tempo extremamente longo para gerar, esses usuários cujas solicitações encontrar a Esvaziar cache terão que suportar uma longa espera enquanto os dados subjacentes é recuperado.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-133">Likewise, if the data being cached takes an exceedingly long time to generate, then those users whose requests find the cache empty will have to endure a lengthy wait while the underlying data is retrieved.</span></span> <span data-ttu-id="1ef0b-134">Considere o armazenamento em cache os dados estáticos e dados que leva um tempo muito longo para gerar na inicialização do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-134">Consider caching static data and data that takes an exceptionally long time to generate at application startup.</span></span>

<span data-ttu-id="1ef0b-135">Enquanto bancos de dados têm muitos dinâmico, valores alterados com frequência, a maioria também tem uma quantidade razoável de dados estáticos.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-135">While databases have many dynamic, frequently-changing values, most also have a fair amount of static data.</span></span> <span data-ttu-id="1ef0b-136">Por exemplo, praticamente todos os modelos de dados tem uma ou mais colunas que contêm um valor específico em um conjunto fixo de opções.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-136">For example, virtually all data models have one or more columns that contain a particular value from a fixed set of choices.</span></span> <span data-ttu-id="1ef0b-137">Um `Patients` tabela de banco de dados pode ter um `PrimaryLanguage` coluna, cujo conjunto de valores pode ser o inglês, espanhol, francês, russo, japonês e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-137">A `Patients` database table might have a `PrimaryLanguage` column, whose set of values could be English, Spanish, French, Russian, Japanese, and so on.</span></span> <span data-ttu-id="1ef0b-138">Muitas vezes, esses tipos de colunas são implementados usando *tabelas de pesquisa*.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-138">Oftentimes, these types of columns are implemented using *lookup tables*.</span></span> <span data-ttu-id="1ef0b-139">Em vez de armazenar a cadeia de caracteres inglês ou francês no `Patients` tabela, uma segunda tabela é criada que tem, normalmente, duas colunas - um identificador exclusivo e uma descrição de cadeia de caracteres - com um registro para cada valor possível.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-139">Rather than storing the string English or French in the `Patients` table, a second table is created that has, commonly, two columns - a unique identifier and a string description - with a record for each possible value.</span></span> <span data-ttu-id="1ef0b-140">O `PrimaryLanguage` coluna o `Patients` tabela armazena o identificador exclusivo correspondente na tabela de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-140">The `PrimaryLanguage` column in the `Patients` table stores the corresponding unique identifier in the lookup table.</span></span> <span data-ttu-id="1ef0b-141">Na Figura 1, o idioma principal do paciente John Doe é inglês, enquanto Ed Johnson é russo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-141">In Figure 1, patient John Doe's primary language is English, while Ed Johnson's is Russian.</span></span>


![A tabela de idiomas é uma tabela de pesquisa usada pela tabela pacientes](caching-data-at-application-startup-cs/_static/image1.png)

<span data-ttu-id="1ef0b-143">**Figura 1**: O `Languages` tabela é uma tabela de pesquisa usado pelo `Patients` tabela</span><span class="sxs-lookup"><span data-stu-id="1ef0b-143">**Figure 1**: The `Languages` Table is a Lookup Table Used by the `Patients` Table</span></span>


<span data-ttu-id="1ef0b-144">A interface do usuário para editar ou criar um novo paciente inclui uma lista suspensa de idiomas permitidos preenchido pelos registros no `Languages` tabela.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-144">The user interface for editing or creating a new patient would include a drop-down list of allowable languages populated by the records in the `Languages` table.</span></span> <span data-ttu-id="1ef0b-145">Sem cache, cada vez que essa interface é visitado o sistema deve consultar o `Languages` tabela.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-145">Without caching, each time this interface is visited the system must query the `Languages` table.</span></span> <span data-ttu-id="1ef0b-146">Isso é um desperdício e desnecessário, pois os valores de tabela de pesquisa mudam com muita frequência, ou nunca.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-146">This is wasteful and unnecessary since lookup table values change very infrequently, if ever.</span></span>

<span data-ttu-id="1ef0b-147">Podemos pode armazenar em cache o `Languages` dados usando as mesmas técnicas de carregamento reativo examinadas nos tutoriais anteriores.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-147">We could cache the `Languages` data using the same reactive loading techniques examined in the previous tutorials.</span></span> <span data-ttu-id="1ef0b-148">No entanto, carregar reativo, usa uma expiração com base no tempo, não é necessária para dados de tabela de pesquisa estática.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-148">Reactive loading, however, uses a time-based expiry, which is not needed for static lookup table data.</span></span> <span data-ttu-id="1ef0b-149">Enquanto o cache usando o carregamento reativo seria melhor do que absolutamente nenhum cache, a melhor abordagem seria proativamente carregar os dados da tabela de pesquisa no cache na inicialização do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-149">While caching using reactive loading would be better than no caching at all, the best approach would be to proactively load the lookup table data into the cache at application startup.</span></span>

<span data-ttu-id="1ef0b-150">Neste tutorial vamos examinar como dados de tabela de pesquisa de cache e outras informações estáticas.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-150">In this tutorial we will look at how to cache lookup table data and other static information.</span></span>

## <a name="step-2-examining-the-different-ways-to-cache-data"></a><span data-ttu-id="1ef0b-151">Etapa 2: Examinar as diferentes maneiras de armazenar dados em Cache</span><span class="sxs-lookup"><span data-stu-id="1ef0b-151">Step 2: Examining the Different Ways to Cache Data</span></span>

<span data-ttu-id="1ef0b-152">Informações podem ser programaticamente armazenadas em cache em um aplicativo ASP.NET usando uma variedade de abordagens.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-152">Information can be programmatically cached in an ASP.NET application using a variety of approaches.</span></span> <span data-ttu-id="1ef0b-153">Podemos var já viu como usar o cache de dados nos tutoriais anteriores.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-153">We ve already seen how to use the data cache in previous tutorials.</span></span> <span data-ttu-id="1ef0b-154">Como alternativa, objetos podem ser programaticamente armazenados em cache usando *membros estáticos* ou *estado do aplicativo*.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-154">Alternatively, objects can be programmatically cached using *static members* or *application state*.</span></span>

<span data-ttu-id="1ef0b-155">Ao trabalhar com uma classe, normalmente a classe deve primeiro ser instanciada antes de seus membros podem ser acessados.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-155">When working with a class, typically the class must first be instantiated before its members can be accessed.</span></span> <span data-ttu-id="1ef0b-156">Por exemplo, para invocar um método de uma das classes em nossa camada de lógica de negócios, deve primeiro criamos uma instância da classe:</span><span class="sxs-lookup"><span data-stu-id="1ef0b-156">For example, in order to invoke a method from one of the classes in our Business Logic Layer, we must first create an instance of the class:</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample1.cs)]

<span data-ttu-id="1ef0b-157">Antes de nós pode invocar *SomeMethod* ou trabalhar com *SomeProperty*, primeiro devemos criar uma instância da classe usando o `new` palavra-chave.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-157">Before we can invoke *SomeMethod* or work with *SomeProperty*, we must first create an instance of the class using the `new` keyword.</span></span> <span data-ttu-id="1ef0b-158">*SomeMethod* e *SomeProperty* estão associados uma determinada instância.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-158">*SomeMethod* and *SomeProperty* are associated with a particular instance.</span></span> <span data-ttu-id="1ef0b-159">O tempo de vida desses membros está ligado ao tempo de vida de seu objeto associado.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-159">The lifetime of these members is tied to the lifetime of their associated object.</span></span> <span data-ttu-id="1ef0b-160">*Membros estáticos*, por outro lado, são variáveis, propriedades e métodos que são compartilhados entre *todos os* instâncias da classe e, consequentemente, têm um tempo de vida, desde que a classe.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-160">*Static members*, on the other hand, are variables, properties, and methods that are shared among *all* instances of the class and, consequently, have a lifetime as long as the class.</span></span> <span data-ttu-id="1ef0b-161">Membros estáticos são indicados pela palavra-chave `static`.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-161">Static members are denoted by the keyword `static`.</span></span>

<span data-ttu-id="1ef0b-162">Além dos membros estáticos, dados podem ser armazenados em cache usando o estado do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-162">In addition to static members, data can be cached using application state.</span></span> <span data-ttu-id="1ef0b-163">Cada aplicativo ASP.NET mantém uma coleção de nome/valor que é compartilhada entre todos os usuários e as páginas do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-163">Each ASP.NET application maintains a name/value collection that's shared across all users and pages of the application.</span></span> <span data-ttu-id="1ef0b-164">Essa coleção pode ser acessada usando o [ `HttpContext` classe](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)do [ `Application` propriedade](https://msdn.microsoft.com/library/system.web.httpcontext.application.aspx)e usado na classe code-behind de uma página ASP.NET da seguinte forma:</span><span class="sxs-lookup"><span data-stu-id="1ef0b-164">This collection can be accessed using the [`HttpContext` class](https://msdn.microsoft.com/library/system.web.httpcontext.aspx)'s [`Application` property](https://msdn.microsoft.com/library/system.web.httpcontext.application.aspx), and used from an ASP.NET page's code-behind class like so:</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample2.cs)]

<span data-ttu-id="1ef0b-165">O cache de dados fornece uma API muito mais rica para o cache de dados, fornecendo mecanismos para expirações baseados em tempo e dependência, as prioridades de item de cache e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-165">The data cache provides a much richer API for caching data, providing mechanisms for time- and dependency-based expiries, cache item priorities, and so forth.</span></span> <span data-ttu-id="1ef0b-166">Com os membros estáticos e o estado do aplicativo, esses recursos devem ser adicionados manualmente pelo desenvolvedor da página.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-166">With static members and application state, such features must be manually added by the page developer.</span></span> <span data-ttu-id="1ef0b-167">No entanto, ao armazenar em cache dados na inicialização do aplicativo para o tempo de vida do aplicativo, vantagens do cache de dados são questão discutível.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-167">When caching data at application startup for the lifetime of the application, however, the data cache's advantages are moot.</span></span> <span data-ttu-id="1ef0b-168">Neste tutorial, examinaremos o código que usa todas as três técnicas para armazenar em cache dados estáticos.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-168">In this tutorial we'll look at code that uses all three techniques for caching static data.</span></span>

## <a name="step-3-caching-thesupplierstable-data"></a><span data-ttu-id="1ef0b-169">Etapa 3: Armazenamento em cache o`Suppliers`dados da tabela</span><span class="sxs-lookup"><span data-stu-id="1ef0b-169">Step 3: Caching the`Suppliers`Table Data</span></span>

<span data-ttu-id="1ef0b-170">A Northwind tabelas de banco de dados é ve implementado para data não incluem quaisquer tabelas de pesquisa tradicional.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-170">The Northwind database tables we ve implemented to date do not include any traditional lookup tables.</span></span> <span data-ttu-id="1ef0b-171">As quatro tabelas de dados implementado em nossa DAL todas as tabelas do modelo cujos valores são não estático.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-171">The four DataTables implemented in our DAL all model tables whose values are non-static.</span></span> <span data-ttu-id="1ef0b-172">Em vez de gastar tempo para adicionar uma nova DataTable da DAL e, em seguida, uma nova classe e métodos para a BLL, para este tutorial apenas suponha que o `Suppliers` dados da tabela são estáticos.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-172">Rather than spending the time to add a new DataTable to the DAL and then a new class and methods to the BLL, for this tutorial let's just pretend that the `Suppliers` table's data is static.</span></span> <span data-ttu-id="1ef0b-173">Portanto, podemos poderia armazenar em cache esses dados na inicialização do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-173">Therefore, we could cache this data at application startup.</span></span>

<span data-ttu-id="1ef0b-174">Para começar, crie uma nova classe chamada `StaticCache.cs` no `CL` pasta.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-174">To start, create a new class named `StaticCache.cs` in the `CL` folder.</span></span>


![Criar a classe StaticCache.cs na pasta CL](caching-data-at-application-startup-cs/_static/image2.png)

<span data-ttu-id="1ef0b-176">**Figura 2**: Criar o `StaticCache.cs` classe o `CL` pasta</span><span class="sxs-lookup"><span data-stu-id="1ef0b-176">**Figure 2**: Create the `StaticCache.cs` Class in the `CL` Folder</span></span>


<span data-ttu-id="1ef0b-177">Precisamos adicionar um método que carrega os dados na inicialização para o armazenamento em cache apropriado, bem como os métodos que retornam dados deste cache.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-177">We need to add a method that loads the data at startup into the appropriate cache store, as well as methods that return data from this cache.</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample3.cs)]

<span data-ttu-id="1ef0b-178">O código acima usa uma variável de membro estático `suppliers`, para armazenar os resultados do `SuppliersBLL` da classe `GetSuppliers()` método, que é chamado do `LoadStaticCache()` método.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-178">The above code uses a static member variable, `suppliers`, to hold the results from the `SuppliersBLL` class's `GetSuppliers()` method, which is called from the `LoadStaticCache()` method.</span></span> <span data-ttu-id="1ef0b-179">O `LoadStaticCache()` método destina-se a ser chamado durante a inicialização do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-179">The `LoadStaticCache()` method is meant to be called during the application's start.</span></span> <span data-ttu-id="1ef0b-180">Depois que esses dados forem carregados na inicialização do aplicativo, qualquer página que precisa para trabalhar com dados do fornecedor pode chamar o `StaticCache` da classe `GetSuppliers()` método.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-180">Once this data has been loaded at application startup, any page that needs to work with supplier data can call the `StaticCache` class's `GetSuppliers()` method.</span></span> <span data-ttu-id="1ef0b-181">Portanto, a chamada para o banco de dados para obter os fornecedores ocorre apenas uma vez, ao iniciar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-181">Therefore, the call to the database to get the suppliers only happens once, at application start.</span></span>

<span data-ttu-id="1ef0b-182">Em vez de usar uma variável de membro estático como o armazenamento em cache, poderíamos ter Alternativamente usado o estado do aplicativo ou o cache de dados.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-182">Rather than using a static member variable as the cache store, we could have alternatively used application state or the data cache.</span></span> <span data-ttu-id="1ef0b-183">O código a seguir mostra a classe alterada para usar o estado do aplicativo:</span><span class="sxs-lookup"><span data-stu-id="1ef0b-183">The following code shows the class retooled to use application state:</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample4.cs)]

<span data-ttu-id="1ef0b-184">Na `LoadStaticCache()`, as informações de fornecedor são armazenadas para a variável de aplicativo *chave*.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-184">In `LoadStaticCache()`, the supplier information is stored to the application variable *key*.</span></span> <span data-ttu-id="1ef0b-185">Ele é retornado como tipo apropriado (`Northwind.SuppliersDataTable`) de `GetSuppliers()`.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-185">It's returned as the appropriate type (`Northwind.SuppliersDataTable`) from `GetSuppliers()`.</span></span> <span data-ttu-id="1ef0b-186">Enquanto o estado do aplicativo pode ser acessado nas classes de lógica de páginas do ASP.NET usando `Application["key"]`, na arquitetura, devemos usar `HttpContext.Current.Application["key"]` para obter atual `HttpContext`.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-186">While application state can be accessed in the code-behind classes of ASP.NET pages using `Application["key"]`, in the architecture we must use `HttpContext.Current.Application["key"]` in order to get the current `HttpContext`.</span></span>

<span data-ttu-id="1ef0b-187">Da mesma forma, o cache de dados pode ser usado como um armazenamento de cache, como mostra o código a seguir:</span><span class="sxs-lookup"><span data-stu-id="1ef0b-187">Likewise, the data cache can be used as a cache store, as the following code shows:</span></span>


[!code-csharp[Main](caching-data-at-application-startup-cs/samples/sample5.cs)]

<span data-ttu-id="1ef0b-188">Para adicionar um item ao cache de dados com nenhum vencimento baseada em tempo, use o `System.Web.Caching.Cache.NoAbsoluteExpiration` e `System.Web.Caching.Cache.NoSlidingExpiration` valores como parâmetros de entrada.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-188">To add an item to the data cache with no time-based expiry, use the `System.Web.Caching.Cache.NoAbsoluteExpiration` and `System.Web.Caching.Cache.NoSlidingExpiration` values as input parameters.</span></span> <span data-ttu-id="1ef0b-189">Essa sobrecarga específica do cache de dados `Insert` método foi selecionado para que pudéssemos especificar a *prioridade* do item de cache.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-189">This particular overload of the data cache's `Insert` method was selected so that we could specify the *priority* of the cache item.</span></span> <span data-ttu-id="1ef0b-190">A prioridade é usada para determinar quais itens serão eliminados do cache quando há pouca memória disponível.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-190">The priority is used to determine what items to scavenge from the cache when available memory runs low.</span></span> <span data-ttu-id="1ef0b-191">Aqui, usamos a prioridade `NotRemovable`, que garante que esse item de cache não será eliminado.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-191">Here we use the priority `NotRemovable`, which ensures that this cache item won't be scavenged.</span></span>

> [!NOTE]
> <span data-ttu-id="1ef0b-192">Este tutorial implementa de baixar o `StaticCache` classe usando a abordagem de variável de membro estático.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-192">This tutorial's download implements the `StaticCache` class using the static member variable approach.</span></span> <span data-ttu-id="1ef0b-193">O código para as técnicas de cache de estado e os dados de aplicativo está disponível nos comentários no arquivo de classe.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-193">The code for the application state and data cache techniques is available in the comments in the class file.</span></span>


## <a name="step-4-executing-code-at-application-startup"></a><span data-ttu-id="1ef0b-194">Etapa 4: Executar o código na inicialização do aplicativo</span><span class="sxs-lookup"><span data-stu-id="1ef0b-194">Step 4: Executing Code at Application Startup</span></span>

<span data-ttu-id="1ef0b-195">Para executar código quando um aplicativo web é iniciado pela primeira vez, precisamos criar um arquivo especial chamado `Global.asax`.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-195">To execute code when a web application first starts, we need to create a special file named `Global.asax`.</span></span> <span data-ttu-id="1ef0b-196">Esse arquivo pode conter os manipuladores de eventos para o aplicativo-, sessão-, e eventos de nível de solicitação e é aqui onde podemos adicionar código que será executado sempre que o aplicativo é iniciado.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-196">This file can contain event handlers for application-, session-, and request-level events, and it is here where we can add code that will be executed whenever the application starts.</span></span>

<span data-ttu-id="1ef0b-197">Adicionar o `Global.asax` arquivo para diretório de raiz do seu aplicativo web clicando duas vezes no nome do projeto de site no Gerenciador de soluções do Visual Studio e escolhendo Adicionar Novo Item.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-197">Add the `Global.asax` file to your web application's root directory by right-clicking on the website project name in Visual Studio's Solution Explorer and choosing Add New Item.</span></span> <span data-ttu-id="1ef0b-198">Na caixa de diálogo Add New Item, selecione o tipo de item de classe de aplicativo Global e, em seguida, clique no botão Adicionar.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-198">From the Add New Item dialog box, select the Global Application Class item type and then click the Add button.</span></span>

> [!NOTE]
> <span data-ttu-id="1ef0b-199">Se você já tiver um `Global.asax` arquivo em seu projeto, a classe de aplicativo Global, tipo de item não será listado na caixa de diálogo Adicionar Novo Item.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-199">If you already have a `Global.asax` file in your project, the Global Application Class item type will not be listed in the Add New Item dialog box.</span></span>


[![A<span data-ttu-id="1ef0b-200">dd arquivo global asax para o diretório raiz do aplicativo Web Your]</span><span class="sxs-lookup"><span data-stu-id="1ef0b-200">dd the Global.asax File to Your Web Application's Root Directory]</span></span>(caching-data-at-application-startup-cs/_static/image4.png)](caching-data-at-application-startup-cs/_static/image3.png)

<span data-ttu-id="1ef0b-201">**Figura 3**: Adicione a `Global.asax` arquivo para o diretório raiz do aplicativo Web Your ([clique para exibir a imagem em tamanho normal](caching-data-at-application-startup-cs/_static/image5.png))</span><span class="sxs-lookup"><span data-stu-id="1ef0b-201">**Figure 3**: Add the `Global.asax` File to Your Web Application's Root Directory ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image5.png))</span></span>


<span data-ttu-id="1ef0b-202">O padrão `Global.asax` modelo de arquivo inclui cinco métodos dentro de um servidor `<script>` marca:</span><span class="sxs-lookup"><span data-stu-id="1ef0b-202">The default `Global.asax` file template includes five methods within a server-side `<script>` tag:</span></span>

- <span data-ttu-id="1ef0b-203">**`Application_Start`** executa quando o aplicativo web é iniciado pela primeira vez</span><span class="sxs-lookup"><span data-stu-id="1ef0b-203">**`Application_Start`** executes when the web application first starts</span></span>
- <span data-ttu-id="1ef0b-204">**`Application_End`** é executado quando o aplicativo está sendo desligado</span><span class="sxs-lookup"><span data-stu-id="1ef0b-204">**`Application_End`** runs when the application is shutting down</span></span>
- <span data-ttu-id="1ef0b-205">**`Application_Error`** é executado sempre que uma exceção sem tratamento atinge o aplicativo</span><span class="sxs-lookup"><span data-stu-id="1ef0b-205">**`Application_Error`** executes whenever an unhandled exception reaches the application</span></span>
- <span data-ttu-id="1ef0b-206">**`Session_Start`** é executado quando uma nova sessão é criada.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-206">**`Session_Start`** executes when a new session is created</span></span>
- <span data-ttu-id="1ef0b-207">**`Session_End`** é executado quando uma sessão expirou ou foi abandonada</span><span class="sxs-lookup"><span data-stu-id="1ef0b-207">**`Session_End`** runs when a session is expired or abandoned</span></span>

<span data-ttu-id="1ef0b-208">O `Application_Start` manipulador de eventos é chamado apenas uma vez durante o ciclo de vida do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-208">The `Application_Start` event handler is called only once during an application's life cycle.</span></span> <span data-ttu-id="1ef0b-209">O aplicativo é iniciado na primeira vez um recurso do ASP.NET é solicitado do aplicativo e continua a ser executado até que o aplicativo for reiniciado, que pode ocorrer ao modificar o conteúdo do `/Bin` pasta, modificar `Global.asax`, modificando o conteúdo na `App_Code` pasta ou modificando o `Web.config` arquivo, entre outras causas.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-209">The application starts the first time an ASP.NET resource is requested from the application and continues to run until the application is restarted, which can happen by modifying the contents of the `/Bin` folder, modifying `Global.asax`, modifying the contents in the `App_Code` folder, or modifying the `Web.config` file, among other causes.</span></span> <span data-ttu-id="1ef0b-210">Consulte a [visão geral do ciclo de vida de aplicativos ASP.NET](https://msdn.microsoft.com/library/ms178473.aspx) para uma discussão mais detalhada sobre o ciclo de vida do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-210">Refer to [ASP.NET Application Life Cycle Overview](https://msdn.microsoft.com/library/ms178473.aspx) for a more detailed discussion on the application life cycle.</span></span>

<span data-ttu-id="1ef0b-211">Para esses tutoriais só precisamos adicionar código para o `Application_Start` método, portanto, sinta-se livre para remover os outros.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-211">For these tutorials we only need to add code to the `Application_Start` method, so feel free to remove the others.</span></span> <span data-ttu-id="1ef0b-212">Na `Application_Start`, basta chamar o `StaticCache` da classe `LoadStaticCache()` método, que irá carregar e armazenar em cache as informações do fornecedor:</span><span class="sxs-lookup"><span data-stu-id="1ef0b-212">In `Application_Start`, simply call the `StaticCache` class's `LoadStaticCache()` method, which will load and cache the supplier information:</span></span>


[!code-aspx[Main](caching-data-at-application-startup-cs/samples/sample6.aspx)]

<span data-ttu-id="1ef0b-213">E isso é tudo!</span><span class="sxs-lookup"><span data-stu-id="1ef0b-213">That's all there is to it!</span></span> <span data-ttu-id="1ef0b-214">Na inicialização do aplicativo, o `LoadStaticCache()` método pegar as informações do fornecedor da BLL e armazená-lo em uma variável de membro estático (ou qualquer cache armazenar você terminou usando no `StaticCache` classe).</span><span class="sxs-lookup"><span data-stu-id="1ef0b-214">At application startup, the `LoadStaticCache()` method will grab the supplier information from the BLL, and store it in a static member variable (or whatever cache store you ended up using in the `StaticCache` class).</span></span> <span data-ttu-id="1ef0b-215">Para verificar esse comportamento, defina um ponto de interrupção no `Application_Start` método e executar seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-215">To verify this behavior, set a breakpoint in the `Application_Start` method and run your application.</span></span> <span data-ttu-id="1ef0b-216">Observe que o ponto de interrupção é atingido durante a inicialização do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-216">Note that the breakpoint is hit upon the application starting.</span></span> <span data-ttu-id="1ef0b-217">As solicitações subsequentes, no entanto, não causam o `Application_Start` método a ser executado.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-217">Subsequent requests, however, do not cause the `Application_Start` method to execute.</span></span>


[![U<span data-ttu-id="1ef0b-218">Se um ponto de interrupção Verifique se o manipulador de eventos Application_Start está sendo executado]</span><span class="sxs-lookup"><span data-stu-id="1ef0b-218">se a Breakpoint to Verify that the Application_Start Event Handler is Being Executed]</span></span>(caching-data-at-application-startup-cs/_static/image7.png)](caching-data-at-application-startup-cs/_static/image6.png)

<span data-ttu-id="1ef0b-219">**Figura 4**: Use um ponto de interrupção para verificar que o `Application_Start` manipulador de eventos está sendo executado ([clique para exibir a imagem em tamanho normal](caching-data-at-application-startup-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="1ef0b-219">**Figure 4**: Use a Breakpoint to Verify that the `Application_Start` Event Handler is Being Executed ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image8.png))</span></span>


> [!NOTE]
> <span data-ttu-id="1ef0b-220">Se você não encontrar o `Application_Start` ponto de interrupção quando você começa a depuração, é porque seu aplicativo já foi iniciado.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-220">If you do not hit the `Application_Start` breakpoint when you first start debugging, it is because your application has already started.</span></span> <span data-ttu-id="1ef0b-221">Forçar o aplicativo reinicie modificando sua `Global.asax` ou `Web.config` arquivos e, em seguida, tente novamente.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-221">Force the application to restart by modifying your `Global.asax` or `Web.config` files and then try again.</span></span> <span data-ttu-id="1ef0b-222">Você pode simplesmente adicionar (ou remover) uma linha em branco no final de um desses arquivos rapidamente reiniciar o aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-222">You can simply add (or remove) a blank line at the end of one of these files to quickly restart the application.</span></span>


## <a name="step-5-displaying-the-cached-data"></a><span data-ttu-id="1ef0b-223">Etapa 5: Exibindo os dados armazenados em cache</span><span class="sxs-lookup"><span data-stu-id="1ef0b-223">Step 5: Displaying the Cached Data</span></span>

<span data-ttu-id="1ef0b-224">Neste momento a `StaticCache` classe tem uma versão dos dados do fornecedor armazenados em cache na inicialização do aplicativo que pode ser acessada por meio de seu `GetSuppliers()` método.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-224">At this point the `StaticCache` class has a version of the supplier data cached at application startup that can be accessed through its `GetSuppliers()` method.</span></span> <span data-ttu-id="1ef0b-225">Para trabalhar com esses dados da camada de apresentação, podemos usar um ObjectDataSource ou invocar programaticamente a `StaticCache` da classe `GetSuppliers()` método da classe code-behind de uma página ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-225">To work with this data from the Presentation Layer, we can use an ObjectDataSource or programmatically invoke the `StaticCache` class's `GetSuppliers()` method from an ASP.NET page's code-behind class.</span></span> <span data-ttu-id="1ef0b-226">Vejamos como usar os controles ObjectDataSource e GridView para exibir as informações do fornecedor armazenados em cache.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-226">Let's look at using the ObjectDataSource and GridView controls to display the cached supplier information.</span></span>

<span data-ttu-id="1ef0b-227">Comece abrindo o `AtApplicationStartup.aspx` página o `Caching` pasta.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-227">Start by opening the `AtApplicationStartup.aspx` page in the `Caching` folder.</span></span> <span data-ttu-id="1ef0b-228">Arraste um controle GridView da caixa de ferramentas para o designer, definindo sua `ID` propriedade para `Suppliers`.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-228">Drag a GridView from the Toolbox onto the designer, setting its `ID` property to `Suppliers`.</span></span> <span data-ttu-id="1ef0b-229">Em seguida, na marca inteligente do GridView optar por criar um novo ObjectDataSource chamado `SuppliersCachedDataSource`.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-229">Next, from the GridView's smart tag choose to create a new ObjectDataSource named `SuppliersCachedDataSource`.</span></span> <span data-ttu-id="1ef0b-230">Configurar o ObjectDataSource para usar o `StaticCache` da classe `GetSuppliers()` método.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-230">Configure the ObjectDataSource to use the `StaticCache` class's `GetSuppliers()` method.</span></span>


[![C<span data-ttu-id="1ef0b-231">onfigurar o ObjectDataSource para usar a classe StaticCache]</span><span class="sxs-lookup"><span data-stu-id="1ef0b-231">onfigure the ObjectDataSource to use the StaticCache Class]</span></span>(caching-data-at-application-startup-cs/_static/image10.png)](caching-data-at-application-startup-cs/_static/image9.png)

<span data-ttu-id="1ef0b-232">**Figura 5**: Configurar o ObjectDataSource para usar o `StaticCache` classe ([clique para exibir a imagem em tamanho normal](caching-data-at-application-startup-cs/_static/image11.png))</span><span class="sxs-lookup"><span data-stu-id="1ef0b-232">**Figure 5**: Configure the ObjectDataSource to use the `StaticCache` Class ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image11.png))</span></span>


[![U<span data-ttu-id="1ef0b-233">Se o método GetSuppliers() para recuperar os dados do fornecedor armazenados em cache]</span><span class="sxs-lookup"><span data-stu-id="1ef0b-233">se the GetSuppliers() Method to Retrieve the Cached Supplier Data]</span></span>(caching-data-at-application-startup-cs/_static/image13.png)](caching-data-at-application-startup-cs/_static/image12.png)

<span data-ttu-id="1ef0b-234">**Figura 6**: Use o `GetSuppliers()` método para recuperar os dados do fornecedor armazenados em cache ([clique para exibir a imagem em tamanho normal](caching-data-at-application-startup-cs/_static/image14.png))</span><span class="sxs-lookup"><span data-stu-id="1ef0b-234">**Figure 6**: Use the `GetSuppliers()` Method to Retrieve the Cached Supplier Data ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image14.png))</span></span>


<span data-ttu-id="1ef0b-235">Depois de concluir o assistente, o Visual Studio adicionará automaticamente BoundFields para cada um dos campos de dados em `SuppliersDataTable`.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-235">After completing the wizard, Visual Studio will automatically add BoundFields for each of the data fields in `SuppliersDataTable`.</span></span> <span data-ttu-id="1ef0b-236">O GridView e ObjectDataSource marcação declarativa deve ser semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="1ef0b-236">Your GridView and ObjectDataSource's declarative markup should look similar to the following:</span></span>


[!code-aspx[Main](caching-data-at-application-startup-cs/samples/sample7.aspx)]

<span data-ttu-id="1ef0b-237">Figura 7 mostra a página quando visualizado por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-237">Figure 7 shows the page when viewed through a browser.</span></span> <span data-ttu-id="1ef0b-238">A saída é o mesmo tinha removemos os dados da BLL `SuppliersBLL` classe, mas usando o `StaticCache` classe retorna os dados do fornecedor como armazenado em cache na inicialização do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-238">The output is the same had we pulled the data from the BLL's `SuppliersBLL` class, but using the `StaticCache` class returns the supplier data as cached at application startup.</span></span> <span data-ttu-id="1ef0b-239">Você pode definir pontos de interrupção a `StaticCache` da classe `GetSuppliers()` método para verificar esse comportamento.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-239">You can set breakpoints in the `StaticCache` class's `GetSuppliers()` method to verify this behavior.</span></span>


[![T<span data-ttu-id="1ef0b-240">ele é armazenada em cache dados do fornecedor é exibido em um GridView]</span><span class="sxs-lookup"><span data-stu-id="1ef0b-240">he Cached Supplier Data is Displayed in a GridView]</span></span>(caching-data-at-application-startup-cs/_static/image16.png)](caching-data-at-application-startup-cs/_static/image15.png)

<span data-ttu-id="1ef0b-241">**Figura 7**: Os dados do fornecedor armazenados em cache é exibido em um GridView ([clique para exibir a imagem em tamanho normal](caching-data-at-application-startup-cs/_static/image17.png))</span><span class="sxs-lookup"><span data-stu-id="1ef0b-241">**Figure 7**: The Cached Supplier Data is Displayed in a GridView ([Click to view full-size image](caching-data-at-application-startup-cs/_static/image17.png))</span></span>


## <a name="summary"></a><span data-ttu-id="1ef0b-242">Resumo</span><span class="sxs-lookup"><span data-stu-id="1ef0b-242">Summary</span></span>

<span data-ttu-id="1ef0b-243">A maioria dos cada modelo de dados contém uma quantidade razoável de dados estáticos, geralmente é implementados na forma de tabelas de pesquisa.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-243">Most every data model contains a fair amount of static data, usually implemented in the form of lookup tables.</span></span> <span data-ttu-id="1ef0b-244">Como essa informação é estática, não há nenhum motivo para acessar o banco de dados continuamente a cada vez que essas informações precisam ser exibidos.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-244">Since this information is static, there's no reason to continually access the database each time this information needs to be displayed.</span></span> <span data-ttu-id="1ef0b-245">Além disso, devido à sua natureza estática, ao armazenar em cache os dados lá está sem a necessidade de uma expiração.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-245">Furthermore, due to its static nature, when caching the data there's no need for an expiry.</span></span> <span data-ttu-id="1ef0b-246">Neste tutorial vimos como usar esses dados e o armazena em cache no cache de dados, o estado do aplicativo e por meio de uma variável de membro estático.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-246">In this tutorial we saw how to take such data and cache it in the data cache, application state, and through a static member variable.</span></span> <span data-ttu-id="1ef0b-247">Essa informação é armazenada em cache na inicialização do aplicativo e permanece no cache ao longo do tempo de vida do aplicativo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-247">This information is cached at application startup and remains in the cache throughout the application's lifetime.</span></span>

<span data-ttu-id="1ef0b-248">Este tutorial e os dois últimos, podemos ve examinamos em cache os dados para a duração de tempo de vida do aplicativo, bem como usando expirações baseada em tempo.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-248">In this tutorial and the past two, we ve looked at caching data for the duration of the application's lifetime as well as using time-based expiries.</span></span> <span data-ttu-id="1ef0b-249">Ao armazenar em cache de banco de dados, no entanto, uma expiração com base no tempo pode ser inferior ao ideal.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-249">When caching database data, though, a time-based expiry may be less than ideal.</span></span> <span data-ttu-id="1ef0b-250">Em vez de liberar periodicamente o cache, seria ideal para remover apenas o item em cache quando os dados do banco de dados subjacente são modificados.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-250">Rather than periodically flushing the cache, it would be optimal to only evict the cached item when the underlying database data is modified.</span></span> <span data-ttu-id="1ef0b-251">Esse ideal é possível com o uso de dependências de cache SQL, que vamos examinar nosso próximo tutorial.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-251">This ideal is possible through the use of SQL cache dependencies, which we'll examine in our next tutorial.</span></span>

<span data-ttu-id="1ef0b-252">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="1ef0b-252">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="1ef0b-253">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="1ef0b-253">About the Author</span></span>

<span data-ttu-id="1ef0b-254">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de sete livros sobre ASP/ASP.NET e fundador da [4GuysFromRolla.com](http://www.4guysfromrolla.com), tem trabalhado com tecnologias Microsoft Web desde 1998.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-254">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="1ef0b-255">Scott funciona como um consultor independente, instrutor e escritor.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-255">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="1ef0b-256">Seu livro mais recente é [ *Sams Teach por conta própria ASP.NET 2.0 em 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="1ef0b-256">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="1ef0b-257">Ele pode ser contatado pelo [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="1ef0b-257">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="1ef0b-258">ou por meio de seu blog, que pode ser encontrado em [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="1ef0b-258">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="1ef0b-259">Agradecimentos especiais a</span><span class="sxs-lookup"><span data-stu-id="1ef0b-259">Special Thanks To</span></span>

<span data-ttu-id="1ef0b-260">Esta série de tutoriais foi revisada por muitos revisores úteis.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-260">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="1ef0b-261">Os revisores de avanço para este tutorial foram Teresa Murphy e Zack Jones.</span><span class="sxs-lookup"><span data-stu-id="1ef0b-261">Lead reviewers for this tutorial were Teresa Murphy and Zack Jones.</span></span> <span data-ttu-id="1ef0b-262">Você está interessado na revisão Meus próximos artigos do MSDN?</span><span class="sxs-lookup"><span data-stu-id="1ef0b-262">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="1ef0b-263">Nesse caso, me descartar uma linha na [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="1ef0b-263">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="1ef0b-264">[Anterior](caching-data-in-the-architecture-cs.md)
> [Próximo](using-sql-cache-dependencies-cs.md)</span><span class="sxs-lookup"><span data-stu-id="1ef0b-264">[Previous](caching-data-in-the-architecture-cs.md)
[Next](using-sql-cache-dependencies-cs.md)</span></span>
