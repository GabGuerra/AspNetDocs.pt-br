---
uid: web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
title: Lote de exclusão (C#) | Microsoft Docs
author: rick-anderson
description: Saiba como excluir vários registros de banco de dados em uma única operação. Na camada de Interface do usuário que criamos em um GridView aprimorado criado em uma sessão tut...
ms.author: riande
ms.date: 06/26/2007
ms.assetid: ac6916d0-a5ab-4218-9760-7ba9e72d258c
msc.legacyurl: /web-forms/overview/data-access/working-with-batched-data/batch-deleting-cs
msc.type: authoredcontent
ms.openlocfilehash: c5b4d3c21fad9000ae50ecb35a5d94d176a135ee
ms.sourcegitcommit: 24b1f6decbb17bb22a45166e5fdb0845c65af498
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/01/2019
ms.locfileid: "57036493"
---
<a name="batch-deleting-c"></a><span data-ttu-id="f2e2e-104">Exclusão em lote (C#)</span><span class="sxs-lookup"><span data-stu-id="f2e2e-104">Batch Deleting (C#)</span></span>
====================
<span data-ttu-id="f2e2e-105">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="f2e2e-105">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="f2e2e-106">[Baixar o código](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) ou [baixar PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="f2e2e-106">[Download Code](http://download.microsoft.com/download/3/9/f/39f92b37-e92e-4ab3-909e-b4ef23d01aa3/ASPNET_Data_Tutorial_65_CS.zip) or [Download PDF](batch-deleting-cs/_static/datatutorial65cs1.pdf)</span></span>

> <span data-ttu-id="f2e2e-107">Saiba como excluir vários registros de banco de dados em uma única operação.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-107">Learn how to delete multiple database records in a single operation.</span></span> <span data-ttu-id="f2e2e-108">Na camada de Interface do usuário, aproveitam um GridView aprimorado criado em um tutorial anterior.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-108">In the User Interface Layer we build upon an enhanced GridView created in an earlier tutorial.</span></span> <span data-ttu-id="f2e2e-109">Na camada de acesso a dados, podemos encapsular as várias operações de exclusão em uma transação para garantir que todas as exclusões de êxito ou todas as exclusões são revertidas.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-109">In the Data Access Layer we wrap the multiple Delete operations within a transaction to ensure that all deletions succeed or all deletions are rolled back.</span></span>


## <a name="introduction"></a><span data-ttu-id="f2e2e-110">Introdução</span><span class="sxs-lookup"><span data-stu-id="f2e2e-110">Introduction</span></span>

<span data-ttu-id="f2e2e-111">O [tutorial anterior](batch-updating-cs.md) explorou como criar um lote usando um GridView editável totalmente de interface de edição.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-111">The [preceding tutorial](batch-updating-cs.md) explored how to create a batch editing interface using a fully-editable GridView.</span></span> <span data-ttu-id="f2e2e-112">Em situações onde os usuários são normalmente editando vários registros ao mesmo tempo, um lote de interface de edição será exigem muito menos postbacks e contexto de teclado ao mouse switches, melhorando a eficiência do usuário final s.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-112">In situations where users are commonly editing many records at once, a batch editing interface will require far fewer postbacks and keyboard-to-mouse context switches, thereby improving the end user s efficiency.</span></span> <span data-ttu-id="f2e2e-113">Essa técnica é da mesma forma útil para páginas em que é comum que os usuários excluam muitos registros de uma só vez.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-113">This technique is similarly useful for pages where it is common for users to delete many records in one go.</span></span>

<span data-ttu-id="f2e2e-114">Qualquer pessoa que tenha usado um cliente de email online já está familiarizada com uma das mais comuns lote excluindo interfaces: uma caixa de seleção em cada linha em uma grade com um correspondente excluir todos os itens verificados botão (consulte a Figura 1).</span><span class="sxs-lookup"><span data-stu-id="f2e2e-114">Anyone who has used an online email client is already familiar with one of the most common batch deleting interfaces: a checkbox in each row in a grid with a corresponding Delete All Checked Items button (see Figure 1).</span></span> <span data-ttu-id="f2e2e-115">Este tutorial é curto em vez disso porque estamos ve feita todo o trabalho pesado nos tutoriais anteriores na criação de interface baseada na web e um método para excluir uma série de registros como uma única operação atômica.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-115">This tutorial is rather short because we ve already done all of the hard work in previous tutorials in creating both the web-based interface and a method to delete a series of records as a single atomic operation.</span></span> <span data-ttu-id="f2e2e-116">No [adicionando uma coluna de GridView de caixas de seleção](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial, criamos um GridView com uma coluna de caixas de seleção e, nas [encapsulamento de modificações de banco de dados em uma transação](wrapping-database-modifications-within-a-transaction-cs.md) tutorial, criamos um método em a BLL que usaria uma transação para excluir uma `List<T>` de `ProductID` valores.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-116">In the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial we created a GridView with a column of checkboxes and in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial we created a method in the BLL that would use a transaction to delete a `List<T>` of `ProductID` values.</span></span> <span data-ttu-id="f2e2e-117">Neste tutorial, vamos aproveitam e nossas experiências anteriores para criar um lote de trabalho, excluindo o exemplo de mesclagem.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-117">In this tutorial, we will build upon and merge our previous experiences to create a working batch deleting example.</span></span>


<span data-ttu-id="f2e2e-118">[![Cada linha inclui uma caixa de seleção](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="f2e2e-118">[![Each Row Includes a Checkbox](batch-deleting-cs/_static/image1.gif)](batch-deleting-cs/_static/image1.png)</span></span>

<span data-ttu-id="f2e2e-119">**Figura 1**: Cada linha inclui uma caixa de seleção ([clique para exibir a imagem em tamanho normal](batch-deleting-cs/_static/image2.png))</span><span class="sxs-lookup"><span data-stu-id="f2e2e-119">**Figure 1**: Each Row Includes a Checkbox ([Click to view full-size image](batch-deleting-cs/_static/image2.png))</span></span>


## <a name="step-1-creating-the-batch-deleting-interface"></a><span data-ttu-id="f2e2e-120">Etapa 1: Criando o lote de exclusão de Interface</span><span class="sxs-lookup"><span data-stu-id="f2e2e-120">Step 1: Creating the Batch Deleting Interface</span></span>

<span data-ttu-id="f2e2e-121">Como já criamos o lote excluindo a interface na [adicionando uma coluna de GridView de caixas de seleção](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial, podemos pode simplesmente copiá-lo para `BatchDelete.aspx` em vez de criá-lo a partir do zero.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-121">Since we already created the batch deleting interface in the [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) tutorial, we can simply copy it to `BatchDelete.aspx` rather than creating it from scratch.</span></span> <span data-ttu-id="f2e2e-122">Comece abrindo o `BatchDelete.aspx` página o `BatchData` pasta e o `CheckBoxField.aspx` página no `EnhancedGridView` pasta.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-122">Start by opening the `BatchDelete.aspx` page in the `BatchData` folder and the `CheckBoxField.aspx` page in the `EnhancedGridView` folder.</span></span> <span data-ttu-id="f2e2e-123">Dos `CheckBoxField.aspx` página, vá para a exibição da fonte e copie a marcação entre o `<asp:Content>` marcas conforme mostrado na Figura 2.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-123">From the `CheckBoxField.aspx` page, go to the Source view and copy the markup between the `<asp:Content>` tags as shown in Figure 2.</span></span>


<span data-ttu-id="f2e2e-124">[![A marcação declarativa de CheckBoxField.aspx na área de transferência de cópia](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span><span class="sxs-lookup"><span data-stu-id="f2e2e-124">[![Copy the Declarative Markup of CheckBoxField.aspx to the Clipboard](batch-deleting-cs/_static/image2.gif)](batch-deleting-cs/_static/image3.png)</span></span>

<span data-ttu-id="f2e2e-125">**Figura 2**: Copie a marcação declarativa de `CheckBoxField.aspx` na área de transferência ([clique para exibir a imagem em tamanho normal](batch-deleting-cs/_static/image4.png))</span><span class="sxs-lookup"><span data-stu-id="f2e2e-125">**Figure 2**: Copy the Declarative Markup of `CheckBoxField.aspx` to the Clipboard ([Click to view full-size image](batch-deleting-cs/_static/image4.png))</span></span>


<span data-ttu-id="f2e2e-126">Em seguida, vá para a exibição da fonte no `BatchDelete.aspx` e cole o conteúdo da área de transferência dentro a `<asp:Content>` marcas.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-126">Next, go to the Source view in `BatchDelete.aspx` and paste the contents of the clipboard within the `<asp:Content>` tags.</span></span> <span data-ttu-id="f2e2e-127">Copie e cole o código de dentro a classe code-behind no também `CheckBoxField.aspx.cs` para dentro a classe code-behind no `BatchDelete.aspx.cs` (o `DeleteSelectedProducts` botão s `Click` manipulador de eventos, o `ToggleCheckState` método e o `Click` manipuladores de eventos para o `CheckAll` e `UncheckAll` botões).</span><span class="sxs-lookup"><span data-stu-id="f2e2e-127">Also copy and paste the code from within the code-behind class in `CheckBoxField.aspx.cs` to within the code-behind class in `BatchDelete.aspx.cs` (the `DeleteSelectedProducts` Button s `Click` event handler, the `ToggleCheckState` method, and the `Click` event handlers for the `CheckAll` and `UncheckAll` Buttons).</span></span> <span data-ttu-id="f2e2e-128">Depois de copiar sobre esse conteúdo, o `BatchDelete.aspx` classe code-behind de página s deve conter o código a seguir:</span><span class="sxs-lookup"><span data-stu-id="f2e2e-128">After copying over this content, the `BatchDelete.aspx` page s code-behind class should contain the following code:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample1.cs)]

<span data-ttu-id="f2e2e-129">Depois de copiar sobre a marcação declarativa e código-fonte, reserve um tempo para testar `BatchDelete.aspx` exibindo-o por meio de um navegador.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-129">After copying over the declarative markup and source code, take a moment to test `BatchDelete.aspx` by viewing it through a browser.</span></span> <span data-ttu-id="f2e2e-130">Você deve ver um GridView listando os dez primeiros produtos em um GridView com cada linha que lista o nome do produto s, categoria e preço, juntamente com uma caixa de seleção.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-130">You should see a GridView listing the first ten products in a GridView with each row listing the product s name, category, and price along with a checkbox.</span></span> <span data-ttu-id="f2e2e-131">Deve haver três botões: Verifique todas, desmarcar todos e excluir produtos selecionados.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-131">There should be three buttons: Check All, Uncheck All, and Delete Selected Products.</span></span> <span data-ttu-id="f2e2e-132">Clicar no botão Verificar todos os seleciona todas as caixas de seleção, enquanto desmarcar todos os limpa todas as caixas de seleção.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-132">Clicking the Check All button selects all checkboxes, while Uncheck All clears all checkboxes.</span></span> <span data-ttu-id="f2e2e-133">Clicar em excluir produtos selecionados exibe uma mensagem que lista o `ProductID` valores dos produtos selecionados, mas não exclui os produtos.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-133">Clicking Delete Selected Products displays a message that lists the `ProductID` values of the selected products, but does not actually delete the products.</span></span>


<span data-ttu-id="f2e2e-134">[![A Interface de CheckBoxField.aspx foi movida para BatchDeleting.aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span><span class="sxs-lookup"><span data-stu-id="f2e2e-134">[![The Interface from CheckBoxField.aspx has been Moved to BatchDeleting.aspx](batch-deleting-cs/_static/image3.gif)](batch-deleting-cs/_static/image5.png)</span></span>

<span data-ttu-id="f2e2e-135">**Figura 3**: A Interface de `CheckBoxField.aspx` foi movido para `BatchDeleting.aspx` ([clique para exibir a imagem em tamanho normal](batch-deleting-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="f2e2e-135">**Figure 3**: The Interface from `CheckBoxField.aspx` has been Moved to `BatchDeleting.aspx` ([Click to view full-size image](batch-deleting-cs/_static/image6.png))</span></span>


## <a name="step-2-deleting-the-checked-products-using-transactions"></a><span data-ttu-id="f2e2e-136">Etapa 2: Excluindo os produtos verificados usando transações</span><span class="sxs-lookup"><span data-stu-id="f2e2e-136">Step 2: Deleting the Checked Products Using Transactions</span></span>

<span data-ttu-id="f2e2e-137">Com o lote interface copiada com êxito para a exclusão `BatchDeleting.aspx`, tudo o que resta fazer é atualizar o código para que o botão excluir produtos selecionados exclui os produtos verificados usando o `DeleteProductsWithTransaction` método no `ProductsBLL` classe.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-137">With the batch deleting interface successfully copied over to `BatchDeleting.aspx`, all that remains is to update the code so that the Delete Selected Products button deletes the checked products using the `DeleteProductsWithTransaction` method in the `ProductsBLL` class.</span></span> <span data-ttu-id="f2e2e-138">Esse método, adicionado na [de encapsulamento de modificações de banco de dados em uma transação](wrapping-database-modifications-within-a-transaction-cs.md) tutorial, aceita como entrada uma `List<T>` de `ProductID` valores e exclui cada um correspondendo `ProductID` dentro do escopo de um transação.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-138">This method, added in the [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md) tutorial, accepts as its input a `List<T>` of `ProductID` values and deletes each corresponding `ProductID` within the scope of a transaction.</span></span>

<span data-ttu-id="f2e2e-139">O `DeleteSelectedProducts` botão s `Click` manipulador de eventos atualmente usa o seguinte `foreach` para iterar por meio de cada linha de GridView:</span><span class="sxs-lookup"><span data-stu-id="f2e2e-139">The `DeleteSelectedProducts` Button s `Click` event handler currently uses the following `foreach` loop to iterate through each GridView row:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample2.cs)]

<span data-ttu-id="f2e2e-140">Para cada linha, o `ProductSelector` controle da Web de caixa de seleção é referenciado por meio de programação.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-140">For each row, the `ProductSelector` CheckBox Web control is programmatically referenced.</span></span> <span data-ttu-id="f2e2e-141">Se estiver marcada, a linha s `ProductID` é recuperado do `DataKeys` coleção e o `DeleteResults` rótulo s `Text` propriedade é atualizada para incluir uma mensagem indicando que a linha foi selecionada para exclusão.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-141">If it is checked, the row s `ProductID` is retrieved from the `DataKeys` collection and the `DeleteResults` Label s `Text` property is updated to include a message indicating that the row was selected for deletion.</span></span>

<span data-ttu-id="f2e2e-142">O código acima não exclui todos os registros que a chamada para o `ProductsBLL` classe s `Delete` método é comentado. Foram essa exclusão lógica a ser aplicado, o código excluiria os produtos, mas não dentro de uma operação atômica.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-142">The above code does not actually delete any records as the call to the `ProductsBLL` class s `Delete` method is commented out. Were this delete logic to be applied, the code would delete the products but not within an atomic operation.</span></span> <span data-ttu-id="f2e2e-143">Ou seja, se as exclusões de alguns primeiro na sequência foi bem-sucedida, mas um posterior falha (talvez devido a uma violação de restrição de chave estrangeira), uma exceção seria lançada, mas esses produtos já excluídos permanecerão excluídos.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-143">That is, if the first few deletes in the sequence succeeded, but a later one failed (perhaps due to a foreign key constraint violation), an exception would be thrown but those products already deleted would remain deleted.</span></span>

<span data-ttu-id="f2e2e-144">Para garantir a atomicidade, precisamos usar em vez disso, o `ProductsBLL` classe s `DeleteProductsWithTransaction` método.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-144">In order to assure atomicity, we need to instead use the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="f2e2e-145">Como esse método aceita uma lista de `ProductID` valores, precisamos primeiro compilar essa lista na grade e, em seguida, passá-lo como um parâmetro.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-145">Because this method accepts a list of `ProductID` values, we need to first compile this list from the grid and then pass it as a parameter.</span></span> <span data-ttu-id="f2e2e-146">Primeiro, criamos uma instância de um `List<T>` do tipo `int`.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-146">We first create an instance of a `List<T>` of type `int`.</span></span> <span data-ttu-id="f2e2e-147">Dentro de `foreach` loop, precisamos adicionar os produtos selecionados `ProductID` valores a esse `List<T>`.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-147">Within the `foreach` loop we need to add the selected products `ProductID` values to this `List<T>`.</span></span> <span data-ttu-id="f2e2e-148">Após o loop isso `List<T>` deve ser passado para o `ProductsBLL` classe s `DeleteProductsWithTransaction` método.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-148">After the loop this `List<T>` must be passed to the `ProductsBLL` class s `DeleteProductsWithTransaction` method.</span></span> <span data-ttu-id="f2e2e-149">Atualizar o `DeleteSelectedProducts` botão s `Click` manipulador de eventos com o código a seguir:</span><span class="sxs-lookup"><span data-stu-id="f2e2e-149">Update the `DeleteSelectedProducts` Button s `Click` event handler with the following code:</span></span>


[!code-csharp[Main](batch-deleting-cs/samples/sample3.cs)]

<span data-ttu-id="f2e2e-150">O código atualizado cria uma `List<T>` do tipo `int` (`productIDsToDelete`) e a preenche com o `ProductID` valores para excluir.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-150">The updated code creates a `List<T>` of type `int` (`productIDsToDelete`) and populates it with the `ProductID` values to delete.</span></span> <span data-ttu-id="f2e2e-151">Após o `foreach` loop, se houver pelo menos um produto selecionado, o `ProductsBLL` classe s `DeleteProductsWithTransaction` método é chamado e passado nesta lista.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-151">After the `foreach` loop, if there is at least one product selected, the `ProductsBLL` class s `DeleteProductsWithTransaction` method is called and passed this list.</span></span> <span data-ttu-id="f2e2e-152">O `DeleteResults` rótulo também é exibido e os dados se a GridView (de modo que os registros excluídos recentemente não serão exibidos como linhas na grade).</span><span class="sxs-lookup"><span data-stu-id="f2e2e-152">The `DeleteResults` Label is also displayed and the data rebound to the GridView (so that the newly-deleted records no longer appear as rows in the grid).</span></span>

<span data-ttu-id="f2e2e-153">Figura 4 mostra o GridView após um número de linhas foram selecionado para exclusão.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-153">Figure 4 shows the GridView after a number of rows have been selected for deletion.</span></span> <span data-ttu-id="f2e2e-154">Figura 5 mostra a tela imediatamente depois que foi clicado no botão excluir produtos selecionados.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-154">Figure 5 shows the screen immediately after the Delete Selected Products button has been clicked.</span></span> <span data-ttu-id="f2e2e-155">Observe que na Figura 5 o `ProductID` valores dos registros excluídos são exibidos no rótulo abaixo GridView e essas linhas não estão mais em GridView.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-155">Note that in Figure 5 the `ProductID` values of the deleted records are displayed in the Label beneath the GridView and those rows are no longer in the GridView.</span></span>


<span data-ttu-id="f2e2e-156">[![Os produtos selecionados serão excluídos](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="f2e2e-156">[![The Selected Products Will Be Deleted](batch-deleting-cs/_static/image4.gif)](batch-deleting-cs/_static/image7.png)</span></span>

<span data-ttu-id="f2e2e-157">**Figura 4**: O selecionado produtos serão excluídos ([clique para exibir a imagem em tamanho normal](batch-deleting-cs/_static/image8.png))</span><span class="sxs-lookup"><span data-stu-id="f2e2e-157">**Figure 4**: The Selected Products Will Be Deleted ([Click to view full-size image](batch-deleting-cs/_static/image8.png))</span></span>


<span data-ttu-id="f2e2e-158">[![Os valores de ProductID de produtos excluídos são listados sob o controle GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span><span class="sxs-lookup"><span data-stu-id="f2e2e-158">[![The Deleted Products ProductID Values are Listed Beneath the GridView](batch-deleting-cs/_static/image5.gif)](batch-deleting-cs/_static/image9.png)</span></span>

<span data-ttu-id="f2e2e-159">**Figura 5**: Os produtos excluídos `ProductID` os valores são listados sob o controle GridView ([clique para exibir a imagem em tamanho normal](batch-deleting-cs/_static/image10.png))</span><span class="sxs-lookup"><span data-stu-id="f2e2e-159">**Figure 5**: The Deleted Products `ProductID` Values are Listed Beneath the GridView ([Click to view full-size image](batch-deleting-cs/_static/image10.png))</span></span>


> [!NOTE]
> <span data-ttu-id="f2e2e-160">Para testar o `DeleteProductsWithTransaction` atomicidade método s, adicionar manualmente uma entrada de um produto a `Order Details` de tabela e, em seguida, tente excluir o produto (juntamente com outras pessoas).</span><span class="sxs-lookup"><span data-stu-id="f2e2e-160">To test the `DeleteProductsWithTransaction` method s atomicity, manually add an entry for a product in the `Order Details` table and then attempt to delete that product (along with others).</span></span> <span data-ttu-id="f2e2e-161">Você receberá uma violação de restrição de chave estrangeira durante a tentativa de excluir o produto com um pedido associado, mas observe como as outras exclusões de produtos selecionados serão revertidas.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-161">You will receive a foreign key constraint violation when attempting to delete the product with an associated order, but note how the other selected products deletions are rolled back.</span></span>


## <a name="summary"></a><span data-ttu-id="f2e2e-162">Resumo</span><span class="sxs-lookup"><span data-stu-id="f2e2e-162">Summary</span></span>

<span data-ttu-id="f2e2e-163">Criação de um lote de exclusão de interface envolve a adição de um GridView com uma coluna de caixas de seleção e controlar uma Web de botão que, quando clicado, excluirá todas as linhas selecionadas como uma única operação atômica.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-163">Creating a batch deleting interface involves adding a GridView with a column of checkboxes and a Button Web control that, when clicked, will delete all of the selected rows as a single atomic operation.</span></span> <span data-ttu-id="f2e2e-164">Neste tutorial, criamos uma interface desse tipo por reunir o trabalho feito em dois tutoriais anteriores, [adicionando uma coluna de GridView de caixas de seleção](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) e [encapsulamento de modificações de banco de dados em uma transação](wrapping-database-modifications-within-a-transaction-cs.md).</span><span class="sxs-lookup"><span data-stu-id="f2e2e-164">In this tutorial we built such an interface by piecing together work done in two previous tutorials, [Adding a GridView Column of Checkboxes](../enhancing-the-gridview/adding-a-gridview-column-of-checkboxes-cs.md) and [Wrapping Database Modifications within a Transaction](wrapping-database-modifications-within-a-transaction-cs.md).</span></span> <span data-ttu-id="f2e2e-165">No primeiro tutorial, criamos um GridView com uma coluna de caixas de seleção e no último implementamos um método na BLL que, quando passado um `List<T>` de `ProductID` excluído valores, eles todos dentro do escopo de uma transação.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-165">In the first tutorial we created a GridView with a column of checkboxes and in the latter we implemented a method in the BLL that, when passed a `List<T>` of `ProductID` values, deleted them all within the scope of a transaction.</span></span>

<span data-ttu-id="f2e2e-166">O próximo tutorial, criaremos uma interface para executar inserções em lotes.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-166">In the next tutorial we'll create an interface for performing batch inserts.</span></span>

<span data-ttu-id="f2e2e-167">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="f2e2e-167">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="f2e2e-168">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="f2e2e-168">About the Author</span></span>

<span data-ttu-id="f2e2e-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de sete livros sobre ASP/ASP.NET e fundador da [4GuysFromRolla.com](http://www.4guysfromrolla.com), tem trabalhado com tecnologias Microsoft Web desde 1998.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-169">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="f2e2e-170">Scott funciona como um consultor independente, instrutor e escritor.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-170">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="f2e2e-171">Seu livro mais recente é [ *Sams Teach por conta própria ASP.NET 2.0 em 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="f2e2e-171">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="f2e2e-172">Ele pode ser contatado pelo [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f2e2e-172">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="f2e2e-173">ou por meio de seu blog, que pode ser encontrado em [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="f2e2e-173">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="f2e2e-174">Agradecimentos especiais a</span><span class="sxs-lookup"><span data-stu-id="f2e2e-174">Special Thanks To</span></span>

<span data-ttu-id="f2e2e-175">Esta série de tutoriais foi revisada por muitos revisores úteis.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-175">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="f2e2e-176">Os revisores de avanço para este tutorial foram Hilton Giesenow e Teresa Murphy.</span><span class="sxs-lookup"><span data-stu-id="f2e2e-176">Lead reviewers for this tutorial were Hilton Giesenow and Teresa Murphy.</span></span> <span data-ttu-id="f2e2e-177">Você está interessado na revisão Meus próximos artigos do MSDN?</span><span class="sxs-lookup"><span data-stu-id="f2e2e-177">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="f2e2e-178">Nesse caso, me descartar uma linha na [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="f2e2e-178">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="f2e2e-179">[Anterior](batch-updating-cs.md)
> [Próximo](batch-inserting-cs.md)</span><span class="sxs-lookup"><span data-stu-id="f2e2e-179">[Previous](batch-updating-cs.md)
[Next](batch-inserting-cs.md)</span></span>
