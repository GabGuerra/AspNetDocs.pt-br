---
uid: web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/adding-validation-controls-to-the-datalist-s-editing-interface-cs
title: Adicionando controles de validação à DataList de edição de Interface (C#) | Microsoft Docs
author: rick-anderson
description: Neste tutorial, veremos como é fácil adicionar controles de validação ao EditItemTemplate do DataList para fornecer um int mais infalível de usuário de edição...
ms.author: riande
ms.date: 10/30/2006
ms.assetid: 3ecc21c5-da0e-40ab-abb4-fac1e47398ad
msc.legacyurl: /web-forms/overview/data-access/editing-and-deleting-data-through-the-datalist/adding-validation-controls-to-the-datalist-s-editing-interface-cs
msc.type: authoredcontent
ms.openlocfilehash: c552dd54830152afbe100ed03fb6764ddfb590dd
ms.sourcegitcommit: 289e051cc8a90e8f7127e239fda73047bde4de12
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/25/2019
ms.locfileid: "58422656"
---
<a name="adding-validation-controls-to-the-datalists-editing-interface-c"></a><span data-ttu-id="9c6f2-103">Adicionar controles de validação à interface de edição do DataList (C#)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-103">Adding Validation Controls to the DataList's Editing Interface (C#)</span></span>
====================
<span data-ttu-id="9c6f2-104">por [Scott Mitchell](https://twitter.com/ScottOnWriting)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-104">by [Scott Mitchell](https://twitter.com/ScottOnWriting)</span></span>

<span data-ttu-id="9c6f2-105">[Baixe o aplicativo de exemplo](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_39_CS.exe) ou [baixar PDF](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/datatutorial39cs1.pdf)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-105">[Download Sample App](http://download.microsoft.com/download/9/c/1/9c1d03ee-29ba-4d58-aa1a-f201dcc822ea/ASPNET_Data_Tutorial_39_CS.exe) or [Download PDF](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/datatutorial39cs1.pdf)</span></span>

> <span data-ttu-id="9c6f2-106">Neste tutorial, veremos como é fácil adicionar controles de validação ao EditItemTemplate do DataList para fornecer uma interface de usuário de edição mais à prova de falhas.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-106">In this tutorial we'll see how easy it is to add validation controls to the DataList's EditItemTemplate in order to provide a more foolproof editing user interface.</span></span>


## <a name="introduction"></a><span data-ttu-id="9c6f2-107">Introdução</span><span class="sxs-lookup"><span data-stu-id="9c6f2-107">Introduction</span></span>

<span data-ttu-id="9c6f2-108">No DataList edição tutoriais até o momento, os DataLists interfaces de edição não incluíam qualquer validação de entrada do usuário proativo, mesmo que a entrada de usuário inválido, como um nome de produto ausente ou resultados de preço negativo em uma exceção.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-108">In the DataList editing tutorials thus far, the DataLists editing interfaces have not included any proactive user input validation even though invalid user input such as a missing product name or negative price results in an exception.</span></span> <span data-ttu-id="9c6f2-109">No [tutorial anterior](handling-bll-and-dal-level-exceptions-cs.md) examinamos como adicionar código à DataList s manipulação de exceção `UpdateCommand` manipulador de eventos para capturar e normalmente exibem informações sobre todas as exceções que foram gerados.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-109">In the [preceding tutorial](handling-bll-and-dal-level-exceptions-cs.md) we examined how to add exception handling code to the DataList s `UpdateCommand` event handler in order to catch and gracefully display information about any exceptions that were raised.</span></span> <span data-ttu-id="9c6f2-110">O ideal é que, no entanto, a interface de edição inclui controles de validação para impedir que um usuário inserir esses dados inválidos em primeiro lugar.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-110">Ideally, however, the editing interface would include validation controls to prevent a user from entering such invalid data in the first place.</span></span>

<span data-ttu-id="9c6f2-111">Neste tutorial, veremos como é fácil adicionar controles de validação à DataList s `EditItemTemplate` para fornecer uma interface de usuário de edição mais infalível.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-111">In this tutorial we'll see how easy it is to add validation controls to the DataList s `EditItemTemplate` in order to provide a more foolproof editing user interface.</span></span> <span data-ttu-id="9c6f2-112">Especificamente, este tutorial usa o exemplo criado no tutorial anterior e aumenta a interface de edição para incluir validação apropriado.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-112">Specifically, this tutorial takes the example created in the preceding tutorial and augments the editing interface to include appropriate validation.</span></span>

## <a name="step-1-replicating-the-example-fromhandling-bll--and-dal-level-exceptionshandling-bll-and-dal-level-exceptions-csmd"></a><span data-ttu-id="9c6f2-113">Etapa 1: Replicando o exemplo de[tratamento de exceções de nível BLL e DAL](handling-bll-and-dal-level-exceptions-cs.md)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-113">Step 1: Replicating the Example from[Handling BLL- and DAL-Level Exceptions](handling-bll-and-dal-level-exceptions-cs.md)</span></span>

<span data-ttu-id="9c6f2-114">No [tratamento BLL - e exceções de nível DAL](handling-bll-and-dal-level-exceptions-cs.md) tutorial, criamos uma página que são listados os nomes e os preços dos produtos em um DataList de duas colunas, editável.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-114">In the [Handling BLL- and DAL-Level Exceptions](handling-bll-and-dal-level-exceptions-cs.md) tutorial we created a page that listed the names and prices of the products in a two-column, editable DataList.</span></span> <span data-ttu-id="9c6f2-115">Nosso objetivo para este tutorial é para ampliar a interface de edição de s DataList para incluir controles de validação.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-115">Our goal for this tutorial is to augment the DataList s editing interface to include validation controls.</span></span> <span data-ttu-id="9c6f2-116">Em particular, nossa lógica de validação será:</span><span class="sxs-lookup"><span data-stu-id="9c6f2-116">In particular, our validation logic will:</span></span>

- <span data-ttu-id="9c6f2-117">Exigir que o nome do produto s ser fornecido</span><span class="sxs-lookup"><span data-stu-id="9c6f2-117">Require that the product s name be provided</span></span>
- <span data-ttu-id="9c6f2-118">Certifique-se de que o valor inserido para o preço é um formato de moeda válidos</span><span class="sxs-lookup"><span data-stu-id="9c6f2-118">Ensure that the value entered for the price is a valid currency format</span></span>
- <span data-ttu-id="9c6f2-119">Certifique-se de que o valor inserido para o preço é maior que ou igual a zero, desde um negativo `UnitPrice` valor é ilegal</span><span class="sxs-lookup"><span data-stu-id="9c6f2-119">Ensure that the value entered for the price is greater than or equal to zero, since a negative `UnitPrice` value is illegal</span></span>

<span data-ttu-id="9c6f2-120">Antes que possamos observar aumentando o exemplo anterior para incluir a validação, primeiro precisamos replicar o exemplo do `ErrorHandling.aspx` página o `EditDeleteDataList` pasta para a página para este tutorial, `UIValidation.aspx`.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-120">Before we can look at augmenting the previous example to include validation, we first need to replicate the example from the `ErrorHandling.aspx` page in the `EditDeleteDataList` folder to the page for this tutorial, `UIValidation.aspx`.</span></span> <span data-ttu-id="9c6f2-121">Para fazer isso, precisamos copiar ambos o `ErrorHandling.aspx` página marcação declarativa de s e seu código-fonte.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-121">To achieve this we need to copy over both the `ErrorHandling.aspx` page s declarative markup and its source code.</span></span> <span data-ttu-id="9c6f2-122">Primeiro copiar sobre a marcação declarativa, executando as seguintes etapas:</span><span class="sxs-lookup"><span data-stu-id="9c6f2-122">First copy over the declarative markup by performing the following steps:</span></span>

1. <span data-ttu-id="9c6f2-123">Abra o `ErrorHandling.aspx` página no Visual Studio</span><span class="sxs-lookup"><span data-stu-id="9c6f2-123">Open the `ErrorHandling.aspx` page in Visual Studio</span></span>
2. <span data-ttu-id="9c6f2-124">Vá para a marcação declarativa de página s (clique no botão Source na parte inferior da página)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-124">Go to the page s declarative markup (click on the Source button at the bottom of the page)</span></span>
3. <span data-ttu-id="9c6f2-125">Copie o texto dentro de `<asp:Content>` e `</asp:Content>` marcas (linhas 3 a 32), como mostrado na Figura 1.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-125">Copy the text within the `<asp:Content>` and `</asp:Content>` tags (lines 3 through 32), as shown in Figure 1.</span></span>


<span data-ttu-id="9c6f2-126">[![Copie o texto dentro de &lt;asp: Content&gt; controle](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image2.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image1.png)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-126">[![Copy the Text Within the &lt;asp:Content&gt; Control](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image2.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image1.png)</span></span>

<span data-ttu-id="9c6f2-127">**Figura 1**: Copie o texto dentro de `<asp:Content>` controle ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image3.png))</span><span class="sxs-lookup"><span data-stu-id="9c6f2-127">**Figure 1**: Copy the Text Within the `<asp:Content>` Control ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image3.png))</span></span>


1. <span data-ttu-id="9c6f2-128">Abra o `UIValidation.aspx` página</span><span class="sxs-lookup"><span data-stu-id="9c6f2-128">Open the `UIValidation.aspx` page</span></span>
2. <span data-ttu-id="9c6f2-129">Vá para a marcação declarativa de s de página</span><span class="sxs-lookup"><span data-stu-id="9c6f2-129">Go to the page s declarative markup</span></span>
3. <span data-ttu-id="9c6f2-130">Cole o texto dentro de `<asp:Content>` controle.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-130">Paste the text within the `<asp:Content>` control.</span></span>

<span data-ttu-id="9c6f2-131">Para copiar o código-fonte, abra o `ErrorHandling.aspx.vb` da página e copiar apenas o texto *dentro* o `EditDeleteDataList_ErrorHandling` classe.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-131">To copy over the source code, open the `ErrorHandling.aspx.vb` page and copy just the text *within* the `EditDeleteDataList_ErrorHandling` class.</span></span> <span data-ttu-id="9c6f2-132">Copie os manipuladores de eventos de três (`Products_EditCommand`, `Products_CancelCommand`, e `Products_UpdateCommand`) junto com o `DisplayExceptionDetails` método, mas não **não** copiar a declaração de classe ou `using` instruções.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-132">Copy the three event handlers (`Products_EditCommand`, `Products_CancelCommand`, and `Products_UpdateCommand`) along with the `DisplayExceptionDetails` method, but do **not** copy the class declaration or `using` statements.</span></span> <span data-ttu-id="9c6f2-133">Colar o texto copiado *dentro de* as `EditDeleteDataList_UIValidation` classe `UIValidation.aspx.vb`.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-133">Paste the copied text *within* the `EditDeleteDataList_UIValidation` class in `UIValidation.aspx.vb`.</span></span>

<span data-ttu-id="9c6f2-134">Depois de mover sobre o conteúdo e o código de `ErrorHandling.aspx` para `UIValidation.aspx`, reserve um tempo para testar as páginas em um navegador.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-134">After moving over the content and code from `ErrorHandling.aspx` to `UIValidation.aspx`, take a moment to test out the pages in a browser.</span></span> <span data-ttu-id="9c6f2-135">Você deve ver a mesma saída e experimentar a mesma funcionalidade em cada uma dessas duas páginas (consulte a Figura 2).</span><span class="sxs-lookup"><span data-stu-id="9c6f2-135">You should see the same output and experience the same functionality in each of these two pages (see Figure 2).</span></span>


<span data-ttu-id="9c6f2-136">[![A página UIValidation.aspx imita a funcionalidade no ErrorHandling.aspx](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image5.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image4.png)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-136">[![The UIValidation.aspx Page Mimics the Functionality in ErrorHandling.aspx](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image5.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image4.png)</span></span>

<span data-ttu-id="9c6f2-137">**Figura 2**: O `UIValidation.aspx` página imita a funcionalidade no `ErrorHandling.aspx` ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image6.png))</span><span class="sxs-lookup"><span data-stu-id="9c6f2-137">**Figure 2**: The `UIValidation.aspx` Page Mimics the Functionality in `ErrorHandling.aspx` ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image6.png))</span></span>


## <a name="step-2-adding-the-validation-controls-to-the-datalist-s-edititemtemplate"></a><span data-ttu-id="9c6f2-138">Etapa 2: Adicionando controles de validação ao EditItemTemplate s DataList</span><span class="sxs-lookup"><span data-stu-id="9c6f2-138">Step 2: Adding the Validation Controls to the DataList s EditItemTemplate</span></span>

<span data-ttu-id="9c6f2-139">Ao construir formulários de entrada de dados, é importante que os usuários insiram os campos necessários e que todas as suas entradas fornecidas são legais, formatado corretamente os valores.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-139">When constructing data entry forms, it is important that users enter any required fields and that all their provided inputs are legal, properly-formatted values.</span></span> <span data-ttu-id="9c6f2-140">Para ajudar a garantir que as entradas de s um usuário sejam válidos, o ASP.NET fornece cinco controles de validação internas que são projetados para validar o valor de um único controle de Web de entrada:</span><span class="sxs-lookup"><span data-stu-id="9c6f2-140">To help ensure that a user s inputs are valid, ASP.NET provides five built-in validation controls that are designed to validate the value of a single input Web control:</span></span>

- <span data-ttu-id="9c6f2-141">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) garante que um valor foi fornecido</span><span class="sxs-lookup"><span data-stu-id="9c6f2-141">[RequiredFieldValidator](https://msdn.microsoft.com/library/5hbw267h(VS.80).aspx) ensures that a value has been provided</span></span>
- <span data-ttu-id="9c6f2-142">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) valida um valor contra outro valor de controle de Web ou um valor constante ou garante que o formato do valor s é válido para um tipo de dados especificado</span><span class="sxs-lookup"><span data-stu-id="9c6f2-142">[CompareValidator](https://msdn.microsoft.com/library/db330ayw(VS.80).aspx) validates a value against another Web control value or a constant value, or ensures that the value s format is legal for a specified data type</span></span>
- <span data-ttu-id="9c6f2-143">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) garante que um valor está dentro de um intervalo de valores</span><span class="sxs-lookup"><span data-stu-id="9c6f2-143">[RangeValidator](https://msdn.microsoft.com/library/f70d09xt.aspx) ensures that a value is within a range of values</span></span>
- <span data-ttu-id="9c6f2-144">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) valida um valor em relação a um [expressão regular](http://en.wikipedia.org/wiki/Regular_expression)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-144">[RegularExpressionValidator](https://msdn.microsoft.com/library/eahwtc9e.aspx) validates a value against a [regular expression](http://en.wikipedia.org/wiki/Regular_expression)</span></span>
- <span data-ttu-id="9c6f2-145">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) valida um valor em relação a um método personalizado definido pelo usuário</span><span class="sxs-lookup"><span data-stu-id="9c6f2-145">[CustomValidator](https://msdn.microsoft.com/library/9eee01cx(VS.80).aspx) validates a value against a custom, user-defined method</span></span>

<span data-ttu-id="9c6f2-146">Para obter mais informações sobre esses cinco controles voltar para o [adicionando controles de validação para a edição e inserção de Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) tutorial ou check-out a [seção controles de validação](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/validation/default.aspx) dos [Tutoriais de início rápido do ASP.NET](https://quickstarts.asp.net).</span><span class="sxs-lookup"><span data-stu-id="9c6f2-146">For more information on these five controls refer back to the [Adding Validation Controls to the Editing and Inserting Interfaces](../editing-inserting-and-deleting-data/adding-validation-controls-to-the-editing-and-inserting-interfaces-cs.md) tutorial or check out the [Validation Controls section](https://quickstarts.asp.net/QuickStartv20/aspnet/doc/ctrlref/validation/default.aspx) of the [ASP.NET Quickstart Tutorials](https://quickstarts.asp.net).</span></span>

<span data-ttu-id="9c6f2-147">Para nosso tutorial precisaremos usar para garantir que um valor para o nome do produto foi fornecido um RequiredFieldValidator e um CompareValidator para garantir que o preço inserido tem um valor maior que ou igual a 0 e é apresentado em um formato de moeda válidos.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-147">For our tutorial we'll need to use a RequiredFieldValidator to ensure that a value for the product name has been supplied and a CompareValidator to ensure that the entered price has a value greater than or equal to 0 and is presented in a valid currency format.</span></span>

> [!NOTE]
> <span data-ttu-id="9c6f2-148">Embora o ASP.NET 1.x tivesse esses mesmos controles de validação de cinco, ASP.NET 2.0 adicionou uma série de aprimoramentos, principal sendo que o script do lado do cliente dois suportam para navegadores além do Internet Explorer e a capacidade de controles de validação de partição em uma página em grupos de validação.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-148">While ASP.NET 1.x had these same five validation controls, ASP.NET 2.0 has added a number of improvements, the main two being client-side script support for browsers in addition to Internet Explorer and the ability to partition validation controls on a page into validation groups.</span></span> <span data-ttu-id="9c6f2-149">Para obter mais informações sobre os novos recursos de controle de validação no 2.0, consulte [dissecando os controles de validação no ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span><span class="sxs-lookup"><span data-stu-id="9c6f2-149">For more information on the new validation control features in 2.0, refer to [Dissecting the Validation Controls in ASP.NET 2.0](http://aspnet.4guysfromrolla.com/articles/112305-1.aspx).</span></span>


<span data-ttu-id="9c6f2-150">Permitir que o s comece adicionando os controles de validação necessárias à DataList s `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-150">Let s start by adding the necessary validation controls to the DataList s `EditItemTemplate`.</span></span> <span data-ttu-id="9c6f2-151">Essa tarefa pode ser executada por meio do Designer clicando no link Editar modelos da marca inteligente s DataList, ou através de sintaxe declarativa.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-151">This task can be performed through the Designer by clicking on the Edit Templates link from the DataList s smart tag, or through the declarative syntax.</span></span> <span data-ttu-id="9c6f2-152">Deixe s percorra o processo usando a opção de editar modelos de exibição de Design.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-152">Let s step through the process using the Edit Templates option from the Design view.</span></span> <span data-ttu-id="9c6f2-153">Depois de optar por editar s DataList `EditItemTemplate`, adicione um RequiredFieldValidator, arrastando-a na caixa de ferramentas para a interface de edição de modelo, colocando-o após o `ProductName` caixa de texto.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-153">After choosing to edit the DataList s `EditItemTemplate`, add a RequiredFieldValidator by dragging it from the Toolbox into the template editing interface, placing it after the `ProductName` TextBox.</span></span>


<span data-ttu-id="9c6f2-154">[![Adicione um RequiredFieldValidator ao EditItemTemplate após a caixa de texto ProductName](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image8.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image7.png)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-154">[![Add a RequiredFieldValidator to the EditItemTemplate After the ProductName TextBox](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image8.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image7.png)</span></span>

<span data-ttu-id="9c6f2-155">**Figura 3**: Adicionar um RequiredFieldValidator para o `EditItemTemplate After` as `ProductName` caixa de texto ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image9.png))</span><span class="sxs-lookup"><span data-stu-id="9c6f2-155">**Figure 3**: Add a RequiredFieldValidator to the `EditItemTemplate After` the `ProductName` TextBox ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image9.png))</span></span>


<span data-ttu-id="9c6f2-156">Todos os controles de validação funcionam, validando a entrada de um único controle da Web do ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-156">All validation controls work by validating the input of a single ASP.NET Web control.</span></span> <span data-ttu-id="9c6f2-157">Portanto, precisamos indicar que o RequiredFieldValidator que acabamos de adicionar deve validar em relação a `ProductName` caixa de texto; isso é feito definindo o controle de validação s [ `ControlToValidate` propriedade](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) para o `ID` de o controle da Web apropriado (`ProductName`, nesta instância).</span><span class="sxs-lookup"><span data-stu-id="9c6f2-157">Therefore, we need to indicate that the RequiredFieldValidator we just added should validate against the `ProductName` TextBox; this is done by setting the validation control s [`ControlToValidate` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.controltovalidate(VS.80).aspx) to the `ID` of the appropriate Web control (`ProductName`, in this instance).</span></span> <span data-ttu-id="9c6f2-158">Em seguida, defina as [ `ErrorMessage` propriedade](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) para você deve fornecer o nome do produto s e o [ `Text` propriedade](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) para \*.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-158">Next, set the [`ErrorMessage` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.errormessage(VS.80).aspx) to You must provide the product s name and the [`Text` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basevalidator.text(VS.80).aspx) to \*.</span></span> <span data-ttu-id="9c6f2-159">O `Text` valor da propriedade, se fornecido, é o texto exibido pelo controle de validação se a validação falhar.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-159">The `Text` property value, if provided, is the text that is displayed by the validation control if the validation fails.</span></span> <span data-ttu-id="9c6f2-160">O `ErrorMessage` valor da propriedade, que é necessário, é usado pelo controle ValidationSummary; se o `Text` o valor da propriedade for omitido, o `ErrorMessage` valor da propriedade é exibido pelo controle de validação em uma entrada inválida.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-160">The `ErrorMessage` property value, which is required, is used by the ValidationSummary control; if the `Text` property value is omitted, the `ErrorMessage` property value is displayed by the validation control on invalid input.</span></span>

<span data-ttu-id="9c6f2-161">Depois de definir essas três propriedades do RequiredFieldValidator, sua tela deve ser semelhante à Figura 4.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-161">After setting these three properties of the RequiredFieldValidator, your screen should look similar to Figure 4.</span></span>


<span data-ttu-id="9c6f2-162">[![Defina as propriedades de texto, ErrorMessage e RequiredFieldValidator s ControlToValidate](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image11.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image10.png)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-162">[![Set the RequiredFieldValidator s ControlToValidate, ErrorMessage, and Text Properties](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image11.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image10.png)</span></span>

<span data-ttu-id="9c6f2-163">**Figura 4**: Definir o s RequiredFieldValidator `ControlToValidate`, `ErrorMessage`, e `Text` propriedades ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image12.png))</span><span class="sxs-lookup"><span data-stu-id="9c6f2-163">**Figure 4**: Set the RequiredFieldValidator s `ControlToValidate`, `ErrorMessage`, and `Text` Properties ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image12.png))</span></span>


<span data-ttu-id="9c6f2-164">Com o RequiredFieldValidator adicionado para o `EditItemTemplate`, tudo o que resta fazer é adicionar a validação necessária para o preço do produto s caixa de texto.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-164">With the RequiredFieldValidator added to the `EditItemTemplate`, all that remains is to add the necessary validation for the product s price TextBox.</span></span> <span data-ttu-id="9c6f2-165">Uma vez que o `UnitPrice` é opcional ao editar um registro, podemos don t é necessário adicionar um RequiredFieldValidator.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-165">Since the `UnitPrice` is optional when editing a record, we don t need to add a RequiredFieldValidator.</span></span> <span data-ttu-id="9c6f2-166">, No entanto, precisamos adicionar um CompareValidator para garantir que o `UnitPrice`, se fornecido, está formatado corretamente como uma moeda e é maior que ou igual a 0.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-166">We do, however, need to add a CompareValidator to ensure that the `UnitPrice`, if supplied, is properly formatted as a currency and is greater than or equal to 0.</span></span>

<span data-ttu-id="9c6f2-167">Adicionar CompareValidator para o `EditItemTemplate` e defina sua `ControlToValidate` propriedade a ser `UnitPrice`, sua `ErrorMessage` propriedade ao preço deve ser maior que ou igual a zero e não pode incluir o símbolo de moeda e seu `Text` propriedade para \*.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-167">Add the CompareValidator into the `EditItemTemplate` and set its `ControlToValidate` property to `UnitPrice`, its `ErrorMessage` property to The price must be greater than or equal to zero and cannot include the currency symbol, and its `Text` property to \*.</span></span> <span data-ttu-id="9c6f2-168">Para indicar que o `UnitPrice` valor deve ser maior que ou igual a 0, defina o s CompareValidator [ `Operator` propriedade](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) para `GreaterThanEqual`, sua [ `ValueToCompare` propriedade](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) como 0, e sua [ `Type` propriedade](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) para `Currency`.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-168">To indicate that the `UnitPrice` value must be greater than or equal to 0, set the CompareValidator s [`Operator` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.operator(VS.80).aspx) to `GreaterThanEqual`, its [`ValueToCompare` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.comparevalidator.valuetocompare(VS.80).aspx) to 0, and its [`Type` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.basecomparevalidator.type.aspx) to `Currency`.</span></span>

<span data-ttu-id="9c6f2-169">Depois de adicionar esses dois controles de validação, DataList s `EditItemTemplate` sintaxe declarativa do s deve ser semelhante ao seguinte:</span><span class="sxs-lookup"><span data-stu-id="9c6f2-169">After adding these two validation controls, the DataList s `EditItemTemplate` s declarative syntax should look similar to the following:</span></span>


[!code-aspx[Main](adding-validation-controls-to-the-datalist-s-editing-interface-cs/samples/sample1.aspx)]

<span data-ttu-id="9c6f2-170">Depois de fazer essas alterações, abra a página em um navegador.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-170">After making these changes, open the page in a browser.</span></span> <span data-ttu-id="9c6f2-171">Se você tentar se omitir o nome ou insira um valor de preço inválido ao editar um produto, um asterisco é exibido ao lado da caixa de texto.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-171">If you attempt to omit the name or enter an invalid price value when editing a product, an asterisk appears next to the textbox.</span></span> <span data-ttu-id="9c6f2-172">Como mostra a Figura 5, um valor de preço que inclui o símbolo de moeda como US $19,95 é considerado inválido.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-172">As Figure 5 shows, a price value that includes the currency symbol such as $19.95 is considered invalid.</span></span> <span data-ttu-id="9c6f2-173">O s CompareValidator `Currency` `Type` permite separadores de dígitos (como vírgulas ou períodos, dependendo das configurações de cultura) e um sinal de mais à esquerda ou sinal de subtração, mas faz *não* permitir um símbolo de moeda.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-173">The CompareValidator s `Currency` `Type` allows for digit separators (such as commas or periods, depending on the culture settings) and a leading plus or minus sign, but does *not* permit a currency symbol.</span></span> <span data-ttu-id="9c6f2-174">Esse comportamento pode perplex usuários conforme a interface de edição no momento, renderiza o `UnitPrice` usando o formato de moeda.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-174">This behavior may perplex users as the editing interface currently renders the `UnitPrice` using the currency format.</span></span>


<span data-ttu-id="9c6f2-175">[![Um asterisco é exibido ao lado de caixas de texto com uma entrada inválida](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image14.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image13.png)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-175">[![An Asterisk Appears Next to the Textboxes with Invalid Input](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image14.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image13.png)</span></span>

<span data-ttu-id="9c6f2-176">**Figura 5**: Um asterisco é exibido próximo para as caixas de texto com uma entrada inválida ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image15.png))</span><span class="sxs-lookup"><span data-stu-id="9c6f2-176">**Figure 5**: An Asterisk Appears Next to the Textboxes with Invalid Input ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image15.png))</span></span>


<span data-ttu-id="9c6f2-177">Embora a funciona de validação como-está, o usuário deve remover manualmente o símbolo de moeda ao editar um registro que não é aceitável.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-177">While the validation works as-is, the user has to manually remove the currency symbol when editing a record, which is not acceptable.</span></span> <span data-ttu-id="9c6f2-178">Além disso, se houver inválido de entradas na edição interface nem a atualização nem cancelar botões, quando clicado, invocará um postback.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-178">Moreover, if there are invalid inputs in the editing interface neither the Update nor Cancel buttons, when clicked, will invoke a postback.</span></span> <span data-ttu-id="9c6f2-179">O ideal é que o botão Cancelar retornaria DataList para seu estado de edição previamente, independentemente da validade de entradas do usuário de s.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-179">Ideally, the Cancel button would return the DataList to its pre-editing state regardless of the validity of the user s inputs.</span></span> <span data-ttu-id="9c6f2-180">Além disso, precisamos garantir que os dados da página s seja válidos antes de atualizar as informações do produto no DataList s `UpdateCommand` manipulador de eventos, como os controles de validação lógica do lado do cliente pode ser ignorada por usuários cujos navegadores don dão suporte a t JavaScript ou tem o suporte foi desabilitado.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-180">Also, we need to ensure that the page s data is valid before updating the product information in the DataList s `UpdateCommand` event handler, as the validation controls client-side logic can be bypassed by users whose browsers either don t support JavaScript or have its support disabled.</span></span>

## <a name="removing-the-currency-symbol-from-the-edititemtemplate-s-unitprice-textbox"></a><span data-ttu-id="9c6f2-181">Removendo o símbolo de moeda de EditItemTemplate s UnitPrice TextBox</span><span class="sxs-lookup"><span data-stu-id="9c6f2-181">Removing the Currency Symbol from the EditItemTemplate s UnitPrice TextBox</span></span>

<span data-ttu-id="9c6f2-182">Ao usar o s CompareValidator `Currency``Type`, a entrada que está sendo validada não deve incluir quaisquer símbolos de moeda.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-182">When using the CompareValidator s `Currency``Type`, the input being validated must not include any currency symbols.</span></span> <span data-ttu-id="9c6f2-183">A presença de tais símbolos faz com que o CompareValidator marcar a entrada como inválida.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-183">The presence of such symbols causes the CompareValidator to mark the input as invalid.</span></span> <span data-ttu-id="9c6f2-184">No entanto, nossa interface de edição atualmente, inclui um símbolo de moeda no `UnitPrice` TextBox, que significa que o usuário deve remover explicitamente o símbolo de moeda antes de salvar suas alterações.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-184">However, our editing interface currently includes a currency symbol in the `UnitPrice` TextBox, meaning the user must explicitly remove the currency symbol before saving their changes.</span></span> <span data-ttu-id="9c6f2-185">Para corrigir isso, temos três opções:</span><span class="sxs-lookup"><span data-stu-id="9c6f2-185">To remedy this we have three options:</span></span>

1. <span data-ttu-id="9c6f2-186">Configurar o `EditItemTemplate` para que o `UnitPrice` valor de caixa de texto não está formatado como uma moeda.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-186">Configure the `EditItemTemplate` so that the `UnitPrice` TextBox value is not formatted as a currency.</span></span>
2. <span data-ttu-id="9c6f2-187">Permitir que o usuário insira um símbolo de moeda, removendo CompareValidator e substituí-la por um RegularExpressionValidator que verifica se há um valor de moeda formatada corretamente.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-187">Allow the user to enter a currency symbol by removing the CompareValidator and replacing it with a RegularExpressionValidator that checks for a properly formatted currency value.</span></span> <span data-ttu-id="9c6f2-188">O desafio aqui é que a expressão regular para validar um valor de moeda não é tão simples quanto CompareValidator e exigiria escrevendo código, se quiséssemos incorporar as configurações de cultura.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-188">The challenge here is that the regular expression to validate a currency value is not as straightforward as the CompareValidator and would require writing code if we wanted to incorporate culture settings.</span></span>
3. <span data-ttu-id="9c6f2-189">Remover completamente o controle de validação e contam com lógica de validação personalizada do lado do servidor em s GridView `RowUpdating` manipulador de eventos.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-189">Remove the validation control altogether and rely on custom server-side validation logic in the GridView s `RowUpdating` event handler.</span></span>

<span data-ttu-id="9c6f2-190">Deixe s com a opção 1 para este tutorial.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-190">Let s go with option 1 for this tutorial.</span></span> <span data-ttu-id="9c6f2-191">Atualmente, o `UnitPrice` é formatado como um valor de moeda devido à expressão de associação de dados para a caixa de texto a `EditItemTemplate`: `<%# Eval("UnitPrice", "{0:c}") %>`.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-191">Currently the `UnitPrice` is formatted as a currency value due to the databinding expression for the TextBox in the `EditItemTemplate`: `<%# Eval("UnitPrice", "{0:c}") %>`.</span></span> <span data-ttu-id="9c6f2-192">Alterar o `Eval` instrução para `Eval("UnitPrice", "{0:n2}")`, que formata o resultado como um número com dois dígitos de precisão.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-192">Change the `Eval` statement to `Eval("UnitPrice", "{0:n2}")`, which formats the result as a number with two digits of precision.</span></span> <span data-ttu-id="9c6f2-193">Isso pode ser feito diretamente por meio da sintaxe declarativa ou clicando no link Editar DataBindings do `UnitPrice` caixa de texto no DataList s `EditItemTemplate`.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-193">This can be done directly through the declarative syntax or by clicking on the Edit DataBindings link from the `UnitPrice` TextBox in the DataList s `EditItemTemplate`.</span></span>

<span data-ttu-id="9c6f2-194">Com essa alteração, o preço formatado na interface de edição inclui vírgula como separador de grupo e um ponto como separador decimal, mas deixa desativar o símbolo de moeda.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-194">With this change, the formatted price in the editing interface includes commas as the group separator and a period as the decimal separator, but leaves off the currency symbol.</span></span>

> [!NOTE]
> <span data-ttu-id="9c6f2-195">Ao remover o formato de moeda da interface editável, considero útil para colocar o símbolo de moeda como texto fora da caixa de texto.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-195">When removing the currency format from the editable interface, I find it helpful to put the currency symbol as text outside the TextBox.</span></span> <span data-ttu-id="9c6f2-196">Isso serve como uma dica para o usuário que não seja necessário fornecer o símbolo de moeda.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-196">This serves as a hint to the user that they do not need to provide the currency symbol.</span></span>


## <a name="fixing-the-cancel-button"></a><span data-ttu-id="9c6f2-197">Corrigindo o botão Cancelar</span><span class="sxs-lookup"><span data-stu-id="9c6f2-197">Fixing the Cancel Button</span></span>

<span data-ttu-id="9c6f2-198">Por padrão, os controles da Web de validação emitem JavaScript para executar a validação no lado do cliente.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-198">By default, the validation Web controls emit JavaScript to perform validation on the client-side.</span></span> <span data-ttu-id="9c6f2-199">Quando um botão, LinkButton ou ImageButton é clicado, os controles de validação na página são verificados no lado do cliente antes que o postback ocorra.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-199">When a Button, LinkButton, or ImageButton is clicked, the validation controls on the page are checked on the client-side before the postback occurs.</span></span> <span data-ttu-id="9c6f2-200">Se houver uma todos os dados inválidos, o postback será cancelado.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-200">If there is any invalid data, the postback is cancelled.</span></span> <span data-ttu-id="9c6f2-201">Para determinados botões, no entanto, a validade dos dados pode ser irrelevante; Nesse caso, ter o postback cancelado devido a dados inválidos é um incômodo.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-201">For certain Buttons, though, the validity of the data might be immaterial; in such a case, having the postback cancelled due to invalid data is a nuisance.</span></span>

<span data-ttu-id="9c6f2-202">O botão Cancelar é um exemplo.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-202">The Cancel button is such an example.</span></span> <span data-ttu-id="9c6f2-203">Imagine que um usuário insere dados inválidos, como omitir o nome do produto s e, em seguida, decide she t deseja salvar o produto Afinal de contas e pressiona o botão Cancelar.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-203">Imagine that a user enters invalid data, such as omitting the product s name, and then decides she doesn t want to save the product after all and hits the Cancel button.</span></span> <span data-ttu-id="9c6f2-204">Atualmente, o botão Cancelar dispara os controles de validação na página, que relatam que o nome do produto está ausente e impedir que o postback.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-204">Currently, the Cancel button triggers the validation controls on the page, which report that the product name is missing and prevent the postback.</span></span> <span data-ttu-id="9c6f2-205">Nosso usuário deve digitar um texto no `ProductName` caixa de texto apenas para cancele o processo de edição.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-205">Our user has to type some text into the `ProductName` TextBox just to cancel out of the editing process.</span></span>

<span data-ttu-id="9c6f2-206">Felizmente, o botão, LinkButton e ImageButton tem um [ `CausesValidation` propriedade](https://msdn.microsoft.com/library/system.web.ui.webcontrols.button.causesvalidation.aspx) que pode indicar se clicar no botão deve iniciar a lógica de validação (o padrão é `True`).</span><span class="sxs-lookup"><span data-stu-id="9c6f2-206">Fortunately, the Button, LinkButton, and ImageButton have a [`CausesValidation` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.button.causesvalidation.aspx) that can indicate whether or not clicking the Button should initiate the validation logic (defaults to `True`).</span></span> <span data-ttu-id="9c6f2-207">Definir o botão Cancelar s `CausesValidation` propriedade para `False`.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-207">Set the Cancel Button s `CausesValidation` property to `False`.</span></span>

## <a name="ensuring-the-inputs-are-valid-in-the-updatecommand-event-handler"></a><span data-ttu-id="9c6f2-208">Garantir que as entradas são válido no manipulador de eventos UpdateCommand</span><span class="sxs-lookup"><span data-stu-id="9c6f2-208">Ensuring the Inputs are Valid in the UpdateCommand Event Handler</span></span>

<span data-ttu-id="9c6f2-209">Pois o script do lado do cliente emitido por controles de validação, se um usuário insere uma entrada inválida os controles de validação Cancelar quaisquer postagens iniciadas pelo botão LinkButton, ou ImageButton controles cuja `CausesValidation` são propriedades `True` (o padrão).</span><span class="sxs-lookup"><span data-stu-id="9c6f2-209">Due to the client-side script emitted by the validation controls, if a user enters invalid input the validation controls cancel any postbacks initiated by Button, LinkButton, or ImageButton controls whose `CausesValidation` properties are `True` (the default).</span></span> <span data-ttu-id="9c6f2-210">No entanto, se um usuário está visitando com um navegador antiquado ou cujo suporte a JavaScript foi desabilitado, as verificações de validação do lado do cliente não serão executado.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-210">However, if a user is visiting with an antiquated browser or one whose JavaScript support has been disabled, the client-side validation checks will not execute.</span></span>

<span data-ttu-id="9c6f2-211">Todos os controles de validação ASP.NET Repita sua lógica de validação imediatamente após o postback e a validade geral das entradas s de página por meio de relatórios do [ `Page.IsValid` propriedade](https://msdn.microsoft.com/library/system.web.ui.page.isvalid.aspx).</span><span class="sxs-lookup"><span data-stu-id="9c6f2-211">All of the ASP.NET validation controls repeat their validation logic immediately upon postback and report the overall validity of the page s inputs via the [`Page.IsValid` property](https://msdn.microsoft.com/library/system.web.ui.page.isvalid.aspx).</span></span> <span data-ttu-id="9c6f2-212">No entanto, o fluxo de página não é interrompido ou interrompido em qualquer forma, com base no valor de `Page.IsValid`.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-212">However, the page flow is not interrupted or stopped in any way based on the value of `Page.IsValid`.</span></span> <span data-ttu-id="9c6f2-213">Como desenvolvedores, é nossa responsabilidade para garantir que o `Page.IsValid` propriedade tem um valor de `True` antes de prosseguir com o código que pressupõe válido de dados de entrada.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-213">As developers, it is our responsibility to ensure that the `Page.IsValid` property has a value of `True` before proceeding with code that assumes valid input data.</span></span>

<span data-ttu-id="9c6f2-214">Se um usuário tiver o JavaScript desabilitado, visita nossa página, edita um produto, entra em um valor de preço de muito caro e clica no botão de atualização, a validação do lado do cliente será ignorada e ocorrerá um postback.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-214">If a user has JavaScript disabled, visits our page, edits a product, enters a price value of Too expensive, and clicks the Update button, the client-side validation will be bypassed and a postback will ensue.</span></span> <span data-ttu-id="9c6f2-215">No postback, o ASP.NET página s `UpdateCommand` executa o manipulador de eventos e uma exceção é gerada ao tentar analisar muito caro para um `Decimal`.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-215">On postback, the ASP.NET page s `UpdateCommand` event handler executes and an exception is raised when attempting to parse Too expensive to a `Decimal`.</span></span> <span data-ttu-id="9c6f2-216">Já que temos de manipulação de exceção, essa exceção será ser manipulada com elegância, mas podemos pode impedir que os dados inválidos passando por em primeiro lugar ao continuar apenas com o `UpdateCommand` manipulador de eventos se `Page.IsValid` tem um valor de `True`.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-216">Since we have exception handling, such an exception will be handled gracefully, but we could prevent the invalid data from slipping through in the first place by only proceeding with the `UpdateCommand` event handler if `Page.IsValid` has a value of `True`.</span></span>

<span data-ttu-id="9c6f2-217">Adicione o seguinte código ao início dos `UpdateCommand` manipulador de eventos, imediatamente antes do `Try` bloco:</span><span class="sxs-lookup"><span data-stu-id="9c6f2-217">Add the following code to the start of the `UpdateCommand` event handler, immediately before the `Try` block:</span></span>


[!code-csharp[Main](adding-validation-controls-to-the-datalist-s-editing-interface-cs/samples/sample2.cs)]

<span data-ttu-id="9c6f2-218">Com esse acréscimo, o produto tentará ser atualizada somente se os dados enviados são válidos.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-218">With this addition, the product will attempt to be updated only if the submitted data is valid.</span></span> <span data-ttu-id="9c6f2-219">A maioria dos usuários não conseguirá postback dados inválidos devido aos scripts do lado do cliente de controles de validação, mas os usuários cujos navegadores don t dá suporte a JavaScript ou que têm suporte a JavaScript desabilitado, pode ignorar as verificações do lado do cliente e enviar dados inválidos.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-219">Most users won't be able to postback invalid data due to the validation controls client-side scripts, but users whose browsers don t support JavaScript or that have JavaScript support disabled, can bypass the client-side checks and submit invalid data.</span></span>

> [!NOTE]
> <span data-ttu-id="9c6f2-220">O leitor astuto deve se lembrar que ao atualizar dados com o GridView, precisávamos verificar explicitamente o `Page.IsValid` propriedade na nossa classe de code-behind da página s.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-220">The astute reader will recall that when updating data with the GridView, we didn't need to explicitly check the `Page.IsValid` property in our page s code-behind class.</span></span> <span data-ttu-id="9c6f2-221">Isso ocorre porque a consulta de GridView de `Page.IsValid` propriedade para nós e só prossegue com a atualização somente se ele retorna um valor de `True`.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-221">This is because the GridView consults the `Page.IsValid` property for us and only proceeds with the update only if it returns a value of `True`.</span></span>


## <a name="step-3-summarizing-data-entry-problems"></a><span data-ttu-id="9c6f2-222">Etapa 3: Resumo de problemas de entrada de dados</span><span class="sxs-lookup"><span data-stu-id="9c6f2-222">Step 3: Summarizing Data Entry Problems</span></span>

<span data-ttu-id="9c6f2-223">Além dos controles de validação de cinco, o ASP.NET inclui o [controle ValidationSummary](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), que exibe o `ErrorMessage` s desses controles de validação que detectou dados inválidos.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-223">In addition to the five validation controls, ASP.NET includes the [ValidationSummary control](https://msdn.microsoft.com/library/f9h59855(VS.80).aspx), which displays the `ErrorMessage` s of those validation controls that detected invalid data.</span></span> <span data-ttu-id="9c6f2-224">Esses dados de resumo podem ser exibidos como texto na página da web ou por meio de uma caixa de mensagem modal, no lado do cliente.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-224">This summary data can be displayed as text on the web page or through a modal, client-side messagebox.</span></span> <span data-ttu-id="9c6f2-225">Deixe o s aprimorar este tutorial para incluir uma caixa de mensagem do lado do cliente resumindo quaisquer problemas de validação.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-225">Let s enhance this tutorial to include a client-side messagebox summarizing any validation problems.</span></span>

<span data-ttu-id="9c6f2-226">Para fazer isso, arraste um controle ValidationSummary da caixa de ferramentas para o Designer.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-226">To accomplish this, drag a ValidationSummary control from the Toolbox onto the Designer.</span></span> <span data-ttu-id="9c6f2-227">O local de t ValidationSummary controle importa, desde que criamos re vai configurá-lo para exibir somente o resumo como uma caixa de mensagem.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-227">The location of the ValidationSummary control doesn t really matter, since we re going to configure it to only display the summary as a messagebox.</span></span> <span data-ttu-id="9c6f2-228">Depois de adicionar o controle, defina suas [ `ShowSummary` propriedade](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) à `False` e sua [ `ShowMessageBox` propriedade](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) para `True`.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-228">After adding the control, set its [`ShowSummary` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showsummary(VS.80).aspx) to `False` and its [`ShowMessageBox` property](https://msdn.microsoft.com/library/system.web.ui.webcontrols.validationsummary.showmessagebox(VS.80).aspx) to `True`.</span></span> <span data-ttu-id="9c6f2-229">Com esse acréscimo, erros de validação são resumidos em uma caixa de mensagem do lado do cliente (veja a Figura 6).</span><span class="sxs-lookup"><span data-stu-id="9c6f2-229">With this addition, any validation errors are summarized in a client-side messagebox (see Figure 6).</span></span>


<span data-ttu-id="9c6f2-230">[![Os erros de validação são resumidos em uma caixa de mensagem do lado do cliente](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image17.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image16.png)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-230">[![The Validation Errors are Summarized in a Client-Side Messagebox](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image17.png)](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image16.png)</span></span>

<span data-ttu-id="9c6f2-231">**Figura 6**: Os erros de validação são resumidos em uma caixa de mensagem do lado do cliente ([clique para exibir a imagem em tamanho normal](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image18.png))</span><span class="sxs-lookup"><span data-stu-id="9c6f2-231">**Figure 6**: The Validation Errors are Summarized in a Client-Side Messagebox ([Click to view full-size image](adding-validation-controls-to-the-datalist-s-editing-interface-cs/_static/image18.png))</span></span>


## <a name="summary"></a><span data-ttu-id="9c6f2-232">Resumo</span><span class="sxs-lookup"><span data-stu-id="9c6f2-232">Summary</span></span>

<span data-ttu-id="9c6f2-233">Neste tutorial vimos como reduzir a probabilidade de exceções usando controles de validação para garantir proativamente nosso entradas de usuários são válidas antes de tentar usá-los no fluxo de trabalho atualização.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-233">In this tutorial we saw how to reduce the likelihood of exceptions by using validation controls to proactively ensure that our users inputs are valid before attempting to use them in the updating workflow.</span></span> <span data-ttu-id="9c6f2-234">O ASP.NET fornece cinco controles de Web de validação que são projetados para inspecionar uma Web específica s entradas de controle e relatam sobre a validade da entrada s.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-234">ASP.NET provides five validation Web controls that are designed to inspect a particular Web control s input and report back on the input s validity.</span></span> <span data-ttu-id="9c6f2-235">Neste tutorial usamos dois desses cinco controles o RequiredFieldValidator e CompareValidator para garantir que o nome do produto s foi fornecido e que o preço tinha um formato de moeda com um valor maior que ou igual a zero.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-235">In this tutorial we used two of those five controls the RequiredFieldValidator and the CompareValidator to ensure that the product s name was supplied and that the price had a currency format with a value greater than or equal to zero.</span></span>

<span data-ttu-id="9c6f2-236">Adicionando controles de validação para o s DataList editando a interface é tão simple quanto arrastá-las para o `EditItemTemplate` da caixa de ferramentas e definir algumas propriedades.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-236">Adding validation controls to the DataList s editing interface is as simple as dragging them onto the `EditItemTemplate` from the Toolbox and setting a handful of properties.</span></span> <span data-ttu-id="9c6f2-237">Por padrão, os controles de validação emitem automaticamente script de validação do lado do cliente; elas também fornecem validação do lado do servidor no postback, armazenando o resultado cumulativo no `Page.IsValid` propriedade.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-237">By default, the validation controls automatically emit client-side validation script; they also provide server-side validation on postback, storing the cumulative result in the `Page.IsValid` property.</span></span> <span data-ttu-id="9c6f2-238">Para ignorar a validação do lado do cliente quando um botão, LinkButton ou ImageButton é clicado, defina o botão s `CausesValidation` propriedade para `False`.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-238">To bypass the client-side validation when a Button, LinkButton, or ImageButton is clicked, set the button s `CausesValidation` property to `False`.</span></span> <span data-ttu-id="9c6f2-239">Além disso, antes de executar quaisquer tarefas com os dados enviados em um postback, certifique-se de que o `Page.IsValid` propriedade retorna `True`.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-239">Also, before performing any tasks with the data submitted on postback, ensure that the `Page.IsValid` property returns `True`.</span></span>

<span data-ttu-id="9c6f2-240">Todos DataList edição tutoriais podemos ve examinei até agora tenha tido interfaces de edição muito simples, uma caixa de texto para o nome do produto s e outro para o preço.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-240">All of the DataList editing tutorials we ve examined so far have had very simple editing interfaces a TextBox for the product s name and another for the price.</span></span> <span data-ttu-id="9c6f2-241">A interface de edição, no entanto, pode conter uma mistura de diferentes controles de Web, como DropDownLists, calendários, botões de opção, caixas de seleção e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-241">The editing interface, however, can contain a mix of different Web controls, such as DropDownLists, Calendars, RadioButtons, CheckBoxes, and so on.</span></span> <span data-ttu-id="9c6f2-242">Nosso próximo tutorial, examinaremos a criação de uma interface que usa uma variedade de controles da Web.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-242">In our next tutorial we'll look at building an interface that uses a variety of Web controls.</span></span>

<span data-ttu-id="9c6f2-243">Boa programação!</span><span class="sxs-lookup"><span data-stu-id="9c6f2-243">Happy Programming!</span></span>

## <a name="about-the-author"></a><span data-ttu-id="9c6f2-244">Sobre o autor</span><span class="sxs-lookup"><span data-stu-id="9c6f2-244">About the Author</span></span>

<span data-ttu-id="9c6f2-245">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), autor de sete livros sobre ASP/ASP.NET e fundador da [4GuysFromRolla.com](http://www.4guysfromrolla.com), tem trabalhado com tecnologias Microsoft Web desde 1998.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-245">[Scott Mitchell](http://www.4guysfromrolla.com/ScottMitchell.shtml), author of seven ASP/ASP.NET books and founder of [4GuysFromRolla.com](http://www.4guysfromrolla.com), has been working with Microsoft Web technologies since 1998.</span></span> <span data-ttu-id="9c6f2-246">Scott funciona como um consultor independente, instrutor e escritor.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-246">Scott works as an independent consultant, trainer, and writer.</span></span> <span data-ttu-id="9c6f2-247">Seu livro mais recente é [ *Sams Teach por conta própria ASP.NET 2.0 em 24 horas*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span><span class="sxs-lookup"><span data-stu-id="9c6f2-247">His latest book is [*Sams Teach Yourself ASP.NET 2.0 in 24 Hours*](https://www.amazon.com/exec/obidos/ASIN/0672327384/4guysfromrollaco).</span></span> <span data-ttu-id="9c6f2-248">Ele pode ser contatado pelo [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-248">He can be reached at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span> <span data-ttu-id="9c6f2-249">ou por meio de seu blog, que pode ser encontrado em [ http://ScottOnWriting.NET ](http://ScottOnWriting.NET).</span><span class="sxs-lookup"><span data-stu-id="9c6f2-249">or via his blog, which can be found at [http://ScottOnWriting.NET](http://ScottOnWriting.NET).</span></span>

## <a name="special-thanks-to"></a><span data-ttu-id="9c6f2-250">Agradecimentos especiais a</span><span class="sxs-lookup"><span data-stu-id="9c6f2-250">Special Thanks To</span></span>

<span data-ttu-id="9c6f2-251">Esta série de tutoriais foi revisada por muitos revisores úteis.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-251">This tutorial series was reviewed by many helpful reviewers.</span></span> <span data-ttu-id="9c6f2-252">Os revisores de avanço para este tutorial foram Dennis Patterson, Ken Pespisa e Liz Shulok.</span><span class="sxs-lookup"><span data-stu-id="9c6f2-252">Lead reviewers for this tutorial were Dennis Patterson, Ken Pespisa, and Liz Shulok.</span></span> <span data-ttu-id="9c6f2-253">Você está interessado na revisão Meus próximos artigos do MSDN?</span><span class="sxs-lookup"><span data-stu-id="9c6f2-253">Interested in reviewing my upcoming MSDN articles?</span></span> <span data-ttu-id="9c6f2-254">Nesse caso, me descartar uma linha na [ mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-254">If so, drop me a line at [mitchell@4GuysFromRolla.com.](mailto:mitchell@4GuysFromRolla.com)</span></span>

> [!div class="step-by-step"]
> <span data-ttu-id="9c6f2-255">[Anterior](handling-bll-and-dal-level-exceptions-cs.md)
> [Próximo](customizing-the-datalist-s-editing-interface-cs.md)</span><span class="sxs-lookup"><span data-stu-id="9c6f2-255">[Previous](handling-bll-and-dal-level-exceptions-cs.md)
[Next](customizing-the-datalist-s-editing-interface-cs.md)</span></span>
