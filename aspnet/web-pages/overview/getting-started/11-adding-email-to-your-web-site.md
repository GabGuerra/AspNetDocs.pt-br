---
uid: web-pages/overview/getting-started/11-adding-email-to-your-web-site
title: Enviar Email de uma Web do ASP.NET (Razor) sites de páginas | Microsoft Docs
author: Rick-Anderson
description: Este capítulo explica como enviar uma mensagem de email automatizadas de um site.
ms.author: riande
ms.date: 02/20/2014
ms.assetid: fc49bcb9-f1a9-4048-8c3f-b60951853200
msc.legacyurl: /web-pages/overview/getting-started/11-adding-email-to-your-web-site
msc.type: authoredcontent
ms.openlocfilehash: 23e9717329525fb5a0ed505c9dc94505d4f9dbbe
ms.sourcegitcommit: 51b01b6ff8edde57d8243e4da28c9f1e7f1962b2
ms.translationtype: MT
ms.contentlocale: pt-BR
ms.lasthandoff: 05/06/2019
ms.locfileid: "65130543"
---
# <a name="sending-email-from-an-aspnet-web-pages-razor-site"></a><span data-ttu-id="ca1b7-103">Enviar Email de um Site do ASP.NET Web Pages (Razor)</span><span class="sxs-lookup"><span data-stu-id="ca1b7-103">Sending Email from an ASP.NET Web Pages (Razor) Site</span></span>

<span data-ttu-id="ca1b7-104">por [Tom FitzMacken](https://github.com/tfitzmac)</span><span class="sxs-lookup"><span data-stu-id="ca1b7-104">by [Tom FitzMacken](https://github.com/tfitzmac)</span></span>

> <span data-ttu-id="ca1b7-105">Este artigo explica como enviar uma mensagem de email de um site quando você usa o ASP.NET Web Pages (Razor).</span><span class="sxs-lookup"><span data-stu-id="ca1b7-105">This article explains how to send an email message from a website when you use ASP.NET Web Pages (Razor).</span></span>
> 
> <span data-ttu-id="ca1b7-106">O que você aprenderá:</span><span class="sxs-lookup"><span data-stu-id="ca1b7-106">What you'll learn:</span></span>
> 
> - <span data-ttu-id="ca1b7-107">Como enviar uma mensagem de email do seu site.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-107">How to send an email message from your website.</span></span>
> - <span data-ttu-id="ca1b7-108">Como anexar um arquivo a uma mensagem de email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-108">How to attach a file to an email message.</span></span>
> 
> <span data-ttu-id="ca1b7-109">Esse é o recurso ASP.NET introduzido no artigo:</span><span class="sxs-lookup"><span data-stu-id="ca1b7-109">This is the ASP.NET feature introduced in the article:</span></span>
> 
> - <span data-ttu-id="ca1b7-110">O `WebMail` auxiliar.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-110">The `WebMail` helper.</span></span>
>   
> 
> ## <a name="software-versions-used-in-the-tutorial"></a><span data-ttu-id="ca1b7-111">Versões de software usadas no tutorial</span><span class="sxs-lookup"><span data-stu-id="ca1b7-111">Software versions used in the tutorial</span></span>
> 
> 
> - <span data-ttu-id="ca1b7-112">Páginas da Web do ASP.NET (Razor) 3</span><span class="sxs-lookup"><span data-stu-id="ca1b7-112">ASP.NET Web Pages (Razor) 3</span></span>
>   
> 
> <span data-ttu-id="ca1b7-113">Este tutorial também funciona com ASP.NET Web Pages 2.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-113">This tutorial also works with ASP.NET Web Pages 2.</span></span>

<a id="Sending_Email_Messages"></a>
## <a name="sending-email-messages-from-your-website"></a><span data-ttu-id="ca1b7-114">Enviar mensagens de Email do seu site</span><span class="sxs-lookup"><span data-stu-id="ca1b7-114">Sending Email Messages from Your Website</span></span>

<span data-ttu-id="ca1b7-115">Há inúmeras razões por que talvez você precise enviar um email de seu site.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-115">There are all sorts of reasons why you might need to send email from your website.</span></span> <span data-ttu-id="ca1b7-116">Você pode enviar mensagens de confirmação para os usuários, ou você pode enviar notificações para si mesmo (por exemplo, que um novo usuário registrado.) O `WebMail` auxiliar torna mais fácil de enviar email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-116">You might send confirmation messages to users, or you might send notifications to yourself (for example, that a new user has registered.) The `WebMail` helper makes it easy for you to send email.</span></span>

<span data-ttu-id="ca1b7-117">Para usar o `WebMail` auxiliar, você precisa ter acesso a um servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-117">To use the `WebMail` helper, you have to have access to an SMTP server.</span></span> <span data-ttu-id="ca1b7-118">(SMTP significa *Simple Mail Transfer Protocol*.) Um servidor SMTP é um servidor de email que apenas encaminha mensagens para o servidor do destinatário &#8212; é o lado de saída de email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-118">(SMTP stands for *Simple Mail Transfer Protocol*.) An SMTP server is an email server that only forwards messages to the recipient's server &#8212; it's the outbound side of email.</span></span> <span data-ttu-id="ca1b7-119">Se você usar um provedor de hospedagem para seu site, eles provavelmente configuraram você com o email e elas podem dizer o que é o nome do servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-119">If you use a hosting provider for your website, they probably set you up with email and they can tell you what your SMTP server name is.</span></span> <span data-ttu-id="ca1b7-120">Se você estiver trabalhando em uma rede corporativa, um administrador ou o departamento de TI poderá geralmente oferecem as informações sobre um servidor SMTP que você pode usar.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-120">If you're working inside a corporate network, an administrator or your IT department can usually give you the information about an SMTP server that you can use.</span></span> <span data-ttu-id="ca1b7-121">Se você estiver trabalhando em casa, você poderá até mesmo testar usando o provedor de email comum, que pode informar o nome do seu servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-121">If you're working at home, you might even be able to test using your ordinary email provider, who can tell you the name of their SMTP server.</span></span> <span data-ttu-id="ca1b7-122">Normalmente, você precisa:</span><span class="sxs-lookup"><span data-stu-id="ca1b7-122">You typically need:</span></span>

- <span data-ttu-id="ca1b7-123">O nome do servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-123">The name of the SMTP server.</span></span>
- <span data-ttu-id="ca1b7-124">O número da porta.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-124">The port number.</span></span> <span data-ttu-id="ca1b7-125">Isso quase sempre é 25.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-125">This is almost always 25.</span></span> <span data-ttu-id="ca1b7-126">No entanto, seu ISP pode exigir que você use a porta 587.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-126">However, your ISP may require you to use port 587.</span></span> <span data-ttu-id="ca1b7-127">Se você estiver usando o protocolo SSL (SSL) para email, talvez seja necessário uma porta diferente.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-127">If you are using secure sockets layer (SSL) for email, you might need a different port.</span></span> <span data-ttu-id="ca1b7-128">Verifique com seu provedor de email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-128">Check with your email provider.</span></span>
- <span data-ttu-id="ca1b7-129">Credenciais (nome de usuário, senha).</span><span class="sxs-lookup"><span data-stu-id="ca1b7-129">Credentials (user name, password).</span></span>

<span data-ttu-id="ca1b7-130">Neste procedimento, você criará duas páginas.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-130">In this procedure, you create two pages.</span></span> <span data-ttu-id="ca1b7-131">A primeira página tem um formulário que permite aos usuários inserir uma descrição, como se eles foram preenchendo um formulário de suporte técnico.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-131">The first page has a form that lets users enter a description, as if they were filling in a technical-support form.</span></span> <span data-ttu-id="ca1b7-132">A primeira página envia suas informações em uma segunda página.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-132">The first page submits its information to a second page.</span></span> <span data-ttu-id="ca1b7-133">Na segunda página, o código extrai as informações do usuário e envia uma mensagem de email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-133">In the second page, code extracts the user's information and sends an email message.</span></span> <span data-ttu-id="ca1b7-134">Ele também exibe uma mensagem confirmando que o relatório de problema foi recebido.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-134">It also displays a message confirming that the problem report has been received.</span></span>

![[image]](11-adding-email-to-your-web-site/_static/image1.jpg)

> [!NOTE]
> <span data-ttu-id="ca1b7-136">Para simplificar este exemplo, o código inicializa o `WebMail` direita de auxiliar na página em que você usá-lo.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-136">To keep this example simple, the code initializes the `WebMail` helper right in the page where you use it.</span></span> <span data-ttu-id="ca1b7-137">No entanto, para sites real, é uma ideia melhor colocar o código de inicialização como este em um arquivo global, para que você inicializa o `WebMail` auxiliar para todos os arquivos em seu site.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-137">However, for real websites, it's a better idea to put initialization code like this in a global file, so that you initialize the `WebMail` helper for all files in your website.</span></span> <span data-ttu-id="ca1b7-138">Para obter mais informações, consulte [Personalizando o comportamento de todo o Site do ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=202906#Setting_Values_For_Helpers).</span><span class="sxs-lookup"><span data-stu-id="ca1b7-138">For more information, see [Customizing Site-Wide Behavior for ASP.NET Web Pages](https://go.microsoft.com/fwlink/?LinkId=202906#Setting_Values_For_Helpers).</span></span>

1. <span data-ttu-id="ca1b7-139">Crie um novo site.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-139">Create a new website.</span></span>
2. <span data-ttu-id="ca1b7-140">Adicionar uma nova página chamada *EmailRequest.cshtml* e adicione a seguinte marcação:</span><span class="sxs-lookup"><span data-stu-id="ca1b7-140">Add a new page named *EmailRequest.cshtml* and add the following markup:</span></span> 

    [!code-html[Main](11-adding-email-to-your-web-site/samples/sample1.html)]

    <span data-ttu-id="ca1b7-141">Observe que o `action` atributo do elemento de formulário tiver sido definido *ProcessRequest.cshtml*.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-141">Notice that the `action` attribute of the form element has been set to *ProcessRequest.cshtml*.</span></span> <span data-ttu-id="ca1b7-142">Isso significa que o formulário será enviado para a página em vez de volta para a página atual.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-142">This means that the form will be submitted to that page instead of back to the current page.</span></span>
3. <span data-ttu-id="ca1b7-143">Adicionar uma nova página chamada *ProcessRequest.cshtml* para o site e adicione o código e a marcação a seguir:</span><span class="sxs-lookup"><span data-stu-id="ca1b7-143">Add a new page named *ProcessRequest.cshtml* to the website and add the following code and markup:</span></span>   

    [!code-cshtml[Main](11-adding-email-to-your-web-site/samples/sample2.cshtml)]

    <span data-ttu-id="ca1b7-144">No código, você obterá os valores dos campos de formulário que foram enviados para a página.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-144">In the code, you get the values of the form fields that were submitted to the page.</span></span> <span data-ttu-id="ca1b7-145">Depois, chame o `WebMail` do auxiliar `Send` método para criar e enviar a mensagem de email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-145">You then call the `WebMail` helper's `Send` method to create and send the email message.</span></span> <span data-ttu-id="ca1b7-146">Nesse caso, os valores a serem usados são compostos de texto que você concatenar com os valores que foram enviados do formulário.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-146">In this case, the values to use are made up of text that you concatenate with the values that were submitted from the form.</span></span>

    <span data-ttu-id="ca1b7-147">O código para essa página está dentro de um `try/catch` bloco.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-147">The code for this page is inside a `try/catch` block.</span></span> <span data-ttu-id="ca1b7-148">Se por qualquer motivo, a tentativa de enviar um email não funcionar (por exemplo, as configurações não são à direita), o código a `catch` bloco é executado e define o `errorMessage` variável para o erro que ocorreu.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-148">If for any reason the attempt to send an email doesn't work (for example, the settings aren't right), the code in the `catch` block runs and sets the `errorMessage` variable to the error that has occurred.</span></span> <span data-ttu-id="ca1b7-149">(Para obter mais informações sobre `try/catch` blocos ou o `<text>` marca, consulte [Introdução ao ASP.NET páginas da Web de programação usando a sintaxe Razor](https://go.microsoft.com/fwlink/?LinkID=251587#ID_HandlingErrors).)</span><span class="sxs-lookup"><span data-stu-id="ca1b7-149">(For more information about `try/catch` blocks or the `<text>` tag, see [Introduction to ASP.NET Web Pages Programming Using the Razor Syntax](https://go.microsoft.com/fwlink/?LinkID=251587#ID_HandlingErrors).)</span></span>

    <span data-ttu-id="ca1b7-150">No corpo da página, se o `errorMessage` variável está vazia (o padrão), o usuário vê uma mensagem de que a mensagem de email foi enviada.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-150">In the body of the page, if the `errorMessage` variable is empty (the default), the user sees a message that the email message has been sent.</span></span> <span data-ttu-id="ca1b7-151">Se o `errorMessage` variável é definida como true, o usuário vê uma mensagem que houve um problema ao enviar a mensagem.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-151">If the `errorMessage` variable is set to true, the user sees a message that there's been a problem sending the message.</span></span>

    <span data-ttu-id="ca1b7-152">Observe que, na parte da página que exibe uma mensagem de erro, há um teste adicional: `if(debuggingFlag)`.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-152">Notice that in the portion of the page that displays an error message, there's an additional test: `if(debuggingFlag)`.</span></span> <span data-ttu-id="ca1b7-153">Essa é uma variável que você pode definir como true se você estiver tendo problemas para enviar email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-153">This is a variable that you can set to true if you're having trouble sending email.</span></span> <span data-ttu-id="ca1b7-154">Quando `debuggingFlag` for true, e se houver um problema ao enviar email, uma mensagem de erro adicional é exibida que mostra o que for ASP.NET tiver relatado ao tentar enviar a mensagem de email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-154">When `debuggingFlag` is true, and if there's a problem sending email, an additional error message is displayed that shows whatever ASP.NET has reported when it tried to send the email message.</span></span> <span data-ttu-id="ca1b7-155">Aviso razoável, embora: as mensagens de erro ASP.NET relata quando ele não é possível enviar uma mensagem de email podem ser genéricas.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-155">Fair warning, though: the error messages that ASP.NET reports when it can't send an email message can be generic.</span></span> <span data-ttu-id="ca1b7-156">Por exemplo, se ASP.NET não é possível contatar o servidor SMTP (por exemplo, porque você fez um erro no nome do servidor), o erro é `Failure sending mail`.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-156">For example, if ASP.NET can't contact the SMTP server (for example, because you made an error in the server name), the error is `Failure sending mail`.</span></span>

    > [!NOTE] 
    > 
    > <span data-ttu-id="ca1b7-157">**Importante** quando você obtém uma mensagem de erro de um objeto de exceção (`ex` no código), fazer *não* rotineiramente passar essa mensagem por meio para os usuários.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-157">**Important** When you get an error message from an exception object (`ex` in the code), do *not* routinely pass that message through to users.</span></span> <span data-ttu-id="ca1b7-158">Objetos de exceção geralmente incluem informações que os usuários não podem ver e até mesmo, que pode ser uma vulnerabilidade de segurança.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-158">Exception objects often include information that users should not see and that can even be a security vulnerability.</span></span> <span data-ttu-id="ca1b7-159">É por isso que esse código inclui a variável `debuggingFlag` que é usado como uma opção para exibir a mensagem de erro, e por que a variável por padrão é definida como false.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-159">That's why this code includes the variable `debuggingFlag` that's used as a switch to display the error message, and why the variable by default is set to false.</span></span> <span data-ttu-id="ca1b7-160">Você deve definir essa variável como true (e, portanto, exibir a mensagem de erro) *apenas* se você estiver tendo problemas com o envio de email e você precisa depurar.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-160">You should set that variable to true (and therefore display the error message) *only* if you're having a problem with sending email and you need to debug.</span></span> <span data-ttu-id="ca1b7-161">Depois de corrigir quaisquer problemas, defina `debuggingFlag` novamente como falsa.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-161">Once you have fixed any problems, set `debuggingFlag` back to false.</span></span>

    <span data-ttu-id="ca1b7-162">Modificar configurações relacionadas no código de email a seguir:</span><span class="sxs-lookup"><span data-stu-id="ca1b7-162">Modify the following email related settings in the code:</span></span>

   - <span data-ttu-id="ca1b7-163">Definir `your-SMTP-host` como o nome do servidor SMTP que você tem acesso.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-163">Set `your-SMTP-host` to the name of the SMTP server that you have access to.</span></span>
   - <span data-ttu-id="ca1b7-164">Definir `your-user-name-here` ao nome de usuário para sua conta do servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-164">Set `your-user-name-here` to the user name for your SMTP server account.</span></span>
   - <span data-ttu-id="ca1b7-165">Definir `your-account-password` para a senha de sua conta do servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-165">Set `your-account-password` to the password for your SMTP server account.</span></span>
   - <span data-ttu-id="ca1b7-166">Definir `your-email-address-here` para seu próprio endereço de email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-166">Set `your-email-address-here` to your own email address.</span></span> <span data-ttu-id="ca1b7-167">Esse é o endereço de email que a mensagem é enviada.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-167">This is the email address that the message is sent from.</span></span> <span data-ttu-id="ca1b7-168">(Alguns provedores de email não permitem que você especifique uma opção diferente `From` tratar e usará seu nome de usuário como o `From` endereço.)</span><span class="sxs-lookup"><span data-stu-id="ca1b7-168">(Some email providers don't let you specify a different `From` address and will use your user name as the `From` address.)</span></span>

     > [!TIP] 
     > 
     > <a id="configuring_email_settings"></a>
     > ### <a name="configuring-email-settings"></a><span data-ttu-id="ca1b7-169">Definir configurações de Email</span><span class="sxs-lookup"><span data-stu-id="ca1b7-169">Configuring Email Settings</span></span>
     > 
     > <span data-ttu-id="ca1b7-170">Ele pode ser um desafio, às vezes, para garantir que você tem as configurações corretas para o servidor SMTP, número da porta e assim por diante.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-170">It can be a challenge sometimes to make sure you have the right settings for the SMTP server, port number, and so on.</span></span> <span data-ttu-id="ca1b7-171">Veja a seguir algumas dicas:</span><span class="sxs-lookup"><span data-stu-id="ca1b7-171">Here are a few tips:</span></span>
     > 
     > - <span data-ttu-id="ca1b7-172">O nome do servidor SMTP costuma ser algo como `smtp.provider.com` ou `smtp.provider.net`.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-172">The SMTP server name is often something like `smtp.provider.com` or `smtp.provider.net`.</span></span> <span data-ttu-id="ca1b7-173">No entanto, se você publicar seu site em um provedor de hospedagem, o nome do servidor SMTP nesse ponto pode ser `localhost`.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-173">However, if you publish your site to a hosting provider, the SMTP server name at that point might be `localhost`.</span></span> <span data-ttu-id="ca1b7-174">Isso ocorre porque depois que você publicou e seu site está em execução no servidor do provedor, o servidor de email pode ser local da perspectiva do seu aplicativo.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-174">This is because after you've published and your site is running on the provider's server, the email server might be local from the perspective of your application.</span></span> <span data-ttu-id="ca1b7-175">Essa alteração de nomes de servidor pode significar que você precisa alterar o nome do servidor SMTP como parte do processo de publicação.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-175">This change in server names might mean you have to change the SMTP server name as part of your publishing process.</span></span>
     > - <span data-ttu-id="ca1b7-176">Geralmente, o número da porta é 25.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-176">The port number is usually 25.</span></span> <span data-ttu-id="ca1b7-177">No entanto, alguns provedores exigem que você usar a porta 587 ou alguma outra porta.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-177">However, some providers require you to use port 587 or some other port.</span></span>
     > - <span data-ttu-id="ca1b7-178">Certifique-se de que você use as credenciais corretas.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-178">Make sure that you use the right credentials.</span></span> <span data-ttu-id="ca1b7-179">Se você publicar seu site em um provedor de hospedagem, use as credenciais que o provedor indicou especificamente são para email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-179">If you've published your site to a hosting provider, use the credentials that the provider has specifically indicated are for email.</span></span> <span data-ttu-id="ca1b7-180">Eles podem ser diferentes das credenciais que usar para publicar.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-180">These might be different from the credentials you use to publish.</span></span>
     > - <span data-ttu-id="ca1b7-181">Às vezes, você não precisa credenciais em todos os.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-181">Sometimes you don't need credentials at all.</span></span> <span data-ttu-id="ca1b7-182">Se você estiver enviando um email usando o seu ISP pessoal, seu provedor de email talvez já saiba suas credenciais.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-182">If you're sending email using your personal ISP, your email provider might already know your credentials.</span></span> <span data-ttu-id="ca1b7-183">Depois de publicar, você talvez precise usar credenciais diferentes quando você testa em seu computador local.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-183">After you publish, you might need to use different credentials than when you test on your local computer.</span></span>
     > - <span data-ttu-id="ca1b7-184">Se seu provedor de email usa a criptografia, você deve definir `WebMail.EnableSsl` para `true`.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-184">If your email provider uses encryption, you have to set `WebMail.EnableSsl` to `true`.</span></span>
4. <span data-ttu-id="ca1b7-185">Execute o *EmailRequest.cshtml* página em um navegador.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-185">Run the *EmailRequest.cshtml* page in a browser.</span></span> <span data-ttu-id="ca1b7-186">(Certifique-se de que a página está selecionada na **arquivos** espaço de trabalho antes de executá-lo.)</span><span class="sxs-lookup"><span data-stu-id="ca1b7-186">(Make sure the page is selected in the **Files** workspace before you run it.)</span></span>
5. <span data-ttu-id="ca1b7-187">Insira seu nome e uma descrição do problema e, em seguida, clique no **enviar** botão.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-187">Enter your name and a problem description, and then click the **Submit** button.</span></span> <span data-ttu-id="ca1b7-188">Você será redirecionado para o *ProcessRequest.cshtml* página, que confirma que sua mensagem e que envia uma mensagem de email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-188">You're redirected to the *ProcessRequest.cshtml* page, which confirms your message and which sends you an email message.</span></span> 

    ![[image]](11-adding-email-to-your-web-site/_static/image2.jpg)

<a id="Sending_a_File"></a>
## <a name="sending-a-file-using-email"></a><span data-ttu-id="ca1b7-190">Envia um arquivo usando o Email</span><span class="sxs-lookup"><span data-stu-id="ca1b7-190">Sending a File Using Email</span></span>

<span data-ttu-id="ca1b7-191">Você também pode enviar os arquivos que estão anexados a mensagens de email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-191">You can also send files that are attached to email messages.</span></span> <span data-ttu-id="ca1b7-192">Neste procedimento, você cria um arquivo de texto e duas páginas HTML.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-192">In this procedure, you create a text file and two HTML pages.</span></span> <span data-ttu-id="ca1b7-193">Você usará o arquivo de texto como um anexo de email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-193">You'll use the text file as an email attachment.</span></span>

1. <span data-ttu-id="ca1b7-194">No site, adicione um novo arquivo de texto e nomeie- *myfile*.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-194">In the website, add a new text file and name it *MyFile.txt*.</span></span>
2. <span data-ttu-id="ca1b7-195">Copie o seguinte texto e cole-o no arquivo:</span><span class="sxs-lookup"><span data-stu-id="ca1b7-195">Copy the following text and paste it in the file:</span></span> 

    `Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.`
3. <span data-ttu-id="ca1b7-196">Crie uma página chamada *SendFile.cshtml* e adicione a seguinte marcação:</span><span class="sxs-lookup"><span data-stu-id="ca1b7-196">Create a page named *SendFile.cshtml* and add the following markup:</span></span> 

    [!code-html[Main](11-adding-email-to-your-web-site/samples/sample3.html)]
4. <span data-ttu-id="ca1b7-197">Crie uma página chamada *ProcessFile.cshtml* e adicione a seguinte marcação:</span><span class="sxs-lookup"><span data-stu-id="ca1b7-197">Create a page named *ProcessFile.cshtml* and add the following markup:</span></span> 

    [!code-cshtml[Main](11-adding-email-to-your-web-site/samples/sample4.cshtml)]
5. <span data-ttu-id="ca1b7-198">Modificar configurações relacionadas no código do exemplo de email a seguir:</span><span class="sxs-lookup"><span data-stu-id="ca1b7-198">Modify the following email related settings in the code from the example:</span></span>

    - <span data-ttu-id="ca1b7-199">Definir `your-SMTP-host` ao nome de um servidor SMTP que você tem acesso.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-199">Set `your-SMTP-host` to the name of an SMTP server that you have access to.</span></span>
    - <span data-ttu-id="ca1b7-200">Definir `your-user-name-here` ao nome de usuário para sua conta do servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-200">Set `your-user-name-here` to the user name for your SMTP server account.</span></span>
    - <span data-ttu-id="ca1b7-201">Definir `your-email-address-here` para seu próprio endereço de email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-201">Set `your-email-address-here` to your own email address.</span></span> <span data-ttu-id="ca1b7-202">Esse é o endereço de email que a mensagem é enviada.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-202">This is the email address that the message is sent from.</span></span>
    - <span data-ttu-id="ca1b7-203">Definir `your-account-password` para a senha de sua conta do servidor SMTP.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-203">Set `your-account-password` to the password for your SMTP server account.</span></span>
    - <span data-ttu-id="ca1b7-204">Definir `target-email-address-here` para seu próprio endereço de email.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-204">Set `target-email-address-here` to your own email address.</span></span> <span data-ttu-id="ca1b7-205">(Como antes, você normalmente poderia enviar um email para outra pessoa, mas para teste, é possível enviar a mesmo.)</span><span class="sxs-lookup"><span data-stu-id="ca1b7-205">(As before, you'd normally send an email to someone else, but for testing, you can send it to yourself.)</span></span>
6. <span data-ttu-id="ca1b7-206">Execute o *SendFile.cshtml* página em um navegador.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-206">Run the *SendFile.cshtml* page in a browser.</span></span>
7. <span data-ttu-id="ca1b7-207">Insira seu nome, uma linha de assunto e o nome do arquivo de texto para anexar (*myfile*).</span><span class="sxs-lookup"><span data-stu-id="ca1b7-207">Enter your name, a subject line, and the name of the text file to attach (*MyFile.txt*).</span></span>
8. <span data-ttu-id="ca1b7-208">Clique no botão `Submit`.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-208">Click the `Submit` button.</span></span> <span data-ttu-id="ca1b7-209">Como antes, você será redirecionado para o *ProcessFile.cshtml* página, que confirma que sua mensagem e que envia uma mensagem de email com o arquivo anexado.</span><span class="sxs-lookup"><span data-stu-id="ca1b7-209">As before, you're redirected to the *ProcessFile.cshtml* page, which confirms your message and which sends you an email message with the attached file.</span></span>

<a id="Additional_Resources"></a>
## <a name="additional-resources"></a><span data-ttu-id="ca1b7-210">Recursos adicionais</span><span class="sxs-lookup"><span data-stu-id="ca1b7-210">Additional Resources</span></span>

- [<span data-ttu-id="ca1b7-211">Guia de solução de problemas de Páginas da Web do ASP.NET (Razor)</span><span class="sxs-lookup"><span data-stu-id="ca1b7-211">ASP.NET Web Pages (Razor) Troubleshooting Guide</span></span>](https://go.microsoft.com/fwlink/?LinkId=253001)
- [<span data-ttu-id="ca1b7-212">Protocolo SMTP</span><span class="sxs-lookup"><span data-stu-id="ca1b7-212">Simple Mail Transfer Protocol</span></span>](https://msdn.microsoft.com/library/aa480435.aspx)
- [<span data-ttu-id="ca1b7-213">Personalizando o comportamento de todo o Site para páginas da Web do ASP.NET</span><span class="sxs-lookup"><span data-stu-id="ca1b7-213">Customizing Site-Wide Behavior for ASP.NET Web Pages</span></span>](https://go.microsoft.com/fwlink/?LinkId=202906)
